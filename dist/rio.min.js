module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=40)}([function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DIR_MODEL="model",e.DIR_EVENT_CLICK="click",e.PRE="r-",e.REG_SINGLE=/^\{\{([^\{\}]*)\}\}$/,e.REG_MULTI=/\{\{(.*?)\}\}/,e.REG_EVENT=/^(\w+)\((.*)\)$/,e.REG_STR=/^(['"])(.*?)\1$/,e.REG_MID_STR=/(['"])(.*?)\1/,e.REG_IN=/^\[(\w+)\]$/,e.REG_OUT=/^\((\w+)\)$/,e.REG_ATTR=/^[A-z_]\w*$/,e.REG_TEST_OUTPUT=/^((click))$/,function(t){t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t[t.DEPRECATED=2]="DEPRECATED"}(e.VNodeStatus||(e.VNodeStatus={})),function(t){t[t.CONSTANT=0]="CONSTANT",t[t.NEW=1]="NEW",t[t.DELETE=2]="DELETE"}(e.DomType||(e.DomType={}))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.LogError=function(t){console.error(t)},e.LogInfo=function(t){console.log(t)},e.GetNS=function(t){var e=t.split(":");return 1==e.length?{namespace:null,value:e[0]}:{namespace:e[0],value:e.slice(1).join(":")}},e.HttpGet=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),4==e.readyState&&200==e.status?e.responseText:null},e.IsStringEmpty=function(t){return null==t||""==(t=t.trim())},e.Trim=function(t,e){if(e.length>1)throw new Error("only receve one character");for(var n=-1;t[n+1]==e;)n++;for(var o=t.length;t[o-1]==e;)o--;return t.substring(n+1,o)},e.StrToEvalstr=function(t){if(o.REG_SINGLE.test(t))return{isconst:!1,exp:RegExp.$1};if(o.REG_MULTI.test(t)){for(var e=/\{\{([^\{\}]*)\}\}/g,n=e.exec(t),r="",i=0;n;)n.index!=i&&(r+="'"+t.substring(i,n.index)+"'+"),i=n.index+n[0].length,r+="("+RegExp.$1+")+",n=e.exec(t);return r.endsWith("+")&&(r=r.substring(0,r.length-1)),{isconst:!1,exp:r}}return{isconst:!0,exp:t}},e.InsertDomChild=function(t,e,n){null==n?null!=t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e):null!=n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e)},e.TypeOf=function(t){if("[object Boolean]"==toString.call(t))return"boolean";if("[object Array]"==toString.call(t))return"array";if("[object Number]"==toString.call(t))return"number";if("[object Object]"==toString.call(t))return"object";if("[object Null]"==toString.call(t))return"object";if("[object String]"==toString.call(t))return"string";if("[object Undefined]"==toString.call(t))throw new Error("function TypeOf: undefined is not allowed")}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(0),i=function(){function t(t,e,n){this.Vdom=t,this.mvvm=e,this.Parent=n,this.attrs=[],this.Children=[],this.DomSet=[],this.status=r.VNodeStatus.ACTIVE,null!=this.Vdom&&(this.nodeValue=this.Vdom.NodeValue,this.nodeName=this.Vdom.NodeName,this.nodeType=this.Vdom.NodeType)}return t.prototype.Reflow=function(){var t=this;this.DomSet=[],this.Children.forEach(function(e){t.DomSet=t.DomSet.concat(e.DomSet)}),null!=this.Parent&&this.Parent.Reflow()},t.prototype.Rerender=function(){this.DomSet=this.DomSet.filter(function(t){return t.type!=r.DomType.DELETE}),this.Children.forEach(function(t){return t.Rerender()})},t.prototype.OnRemoved=function(){this.Children.forEach(function(t){t.OnRemoved()})},t.prototype.AttachChildren=function(){for(var t=0;t<this.Vdom.Children.length;t++){var e=this.Vdom.Children[t],n=o.NewVNode(e,this.mvvm,this);null!=n&&(n.AttachChildren(),this.Children.push(n))}},t.prototype.SetStatus=function(t){this.status=t,this.Children.forEach(function(e){e.SetStatus(t)})},t.prototype.GetStatus=function(){return this.status},t.prototype.OnRouterChange=function(){this.Children.forEach(function(t){return t.OnRouterChange()})},t.prototype.NavigateTo=function(t){this.mvvm.$IsRoot()?this.mvvm.$NavigateTo(t):null!=this.Parent?this.Parent.NavigateTo(t):this.mvvm.$GetFenceNode().NavigateTo(t)},t.prototype.GetNodeName=function(){return this.nodeName.toLowerCase()},t}();e.VNode=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(5),i=n(1),a=n(0),u=n(38),c=function(){function t(){this.Attrs=[],this.Children=[]}return t.prototype.GetAttr=function(t){for(var e=0;e<this.Attrs.length;e++)if(this.Attrs[e].Name==t)return this.Attrs[e].Value;return null},t.prototype.AddAttr=function(t){this.Attrs.push({Name:t,Value:""})},t}();e.VDom=c,e.TraverseDom=function t(e){if(3!=e.nodeType||""!=e.nodeValue.trim()){var n=new c;if(n.NodeValue=e.nodeValue,null!=n.NodeValue&&(n.NodeValue=n.NodeValue.replace(/\s+/g,"")),n.NodeName=e.nodeName.toLowerCase(),n.NodeType=e.nodeType,1==e.nodeType){for(var o=e,r=0;r<o.attributes.length;r++)n.Attrs.push({Name:o.attributes[r].name,Value:o.attributes[r].value});for(r=0;r<o.childNodes.length;r++){var i=t(o.childNodes[r]);i&&n.Children.push(i)}}return n}},function(t){t[t.NORMAL=0]="NORMAL",t[t.IF=1]="IF",t[t.FOR=2]="FOR"}(o=e.Priority||(e.Priority={})),e.NewVNode=function(t,e,c,s){if(void 0===s&&(s=o.FOR),"slot"==t.NodeName.toLowerCase())return new(0,n(29).SlotNode)(t,e,c,t.GetAttr("name"));if(s>=o.FOR&&null!=t.GetAttr(a.PRE+"for"))return new(0,n(28).ForNode)(t,e,c,t.GetAttr(a.PRE+"for"));if(s>=o.IF&&null!=t.GetAttr(a.PRE+"if"))return new(0,n(24).IfNode)(t,e,c,t.GetAttr(a.PRE+"if"));if("r-template"==t.NodeName)return new(0,n(23).TemplateNode)(t,e,c);if("router-view"==t.NodeName)return new(0,n(22).RouterNode)(t,e,c);var p=i.GetNS(t.NodeName);if(r.IsComponentRegistered(p.value,p.namespace||"default")){var l=new(r.InitComponent(p.value,p.namespace||"default")),f=new(0,n(9).CustomNode)(t,e,c,l);return l.$SetFenceNode(f),l.$initialize(),l.$AttachChildren(),f}return new u.VinallaNode(t,e,c)}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=[],o=[],r=[],i=[],a=[];e.Data=function(t,e){n.push(e)},e.Computed=function(t,e,n){o.push({name:e,get:n.get})},e.Prop=function(t,e,n){return r.push({name:t,required:e,type:n}),function(t,e){}},e.OnInit=function(t,e,n){i.push(e)},e.OnDestroy=function(t,e,n){a.push(e)},e.FetchProperty=function(){var t={computes:o,props:r,initFuncs:i,destroyFuncs:a,datas:n};return o=[],r=[],i=[],a=[],n=[],t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(3),i={};function a(t,e){return t+"::"+e}e.Id=a,e.RegisterComponent=function(t,e,n,o){var r={$constructor:n,$id:a(e,t),$preProcess:!1,$domtree:null,$origin:o};if(null!=i[r.$id])throw new Error("component "+r.$id+" already exists");i[r.$id]=r},e.RegisterComponentDirect=function(t){if(null!=i[t.$id])throw new Error("component "+t.$id+" has already exist");i[t.$id]=t},e.InitComponent=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();var n=i[a(e,t)];if(n&&!n.$preProcess&&(function(t){if(null==t.$origin.templateUrl||(t.$origin.template=o.HttpGet(t.$origin.templateUrl),null!=t.$origin.template)){var e=(new DOMParser).parseFromString(t.$origin.template,"text/html").body;if(e.children.length>1)throw new Error(t.$origin.name+"::"+t.$origin.namespace+" template should have only one root");if(1==e.children.length)t.$domtree=r.TraverseDom(e.children[0]);else{if(1!=e.childNodes.length)throw new Error("template should not be empty");t.$domtree=r.TraverseDom(e.childNodes[0])}if(null!=t.$origin.styleUrl&&(t.$origin.style=o.HttpGet(t.$origin.styleUrl)),null!=t.$origin.style){var n=document.createElement("style");n.type="text/css",n.innerHTML=t.$origin.style,document.getElementsByTagName("head")[0].appendChild(n),function t(e,n){e.AddAttr(n),1==e.NodeType&&e.Children.forEach(function(e){t(e,n)})}(t.$domtree,t.$id)}}else o.LogError("path "+t.$origin.templateUrl+" not found")}(n),n.$preProcess=!0),n)return n.$constructor;throw new Error("component "+a(e,t)+" not exists")},e.GetDomTree=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();var n=i[a(e,t)];return null==n?null:n.$domtree},e.IsComponentRegistered=function(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),!!i[a(e,t)]}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),r=n(8),i=[],a=[],u=-1,c=null;function s(t){for(var e=location.pathname;e.endsWith("/");)e=e.substr(0,e.length-1);for(var n=e.split("/"),o=function(e){var o=t.fullUrls[e].split("/");if(n.length!=o.length)return"continue";for(var r=[],i=0;i<o.length;i++){if(/^\:(\w+)$/.test(o[i])){if(""!=n[i]){var a=RegExp.$1;r.push({name:a,value:n[i]});continue}break}if(o[i]!=n[i])break}if(i==o.length){var u=t.params,c=function(){var t=location.search.split("?"),e=[];if(2==t.length){var n=t[1].split("&");n.forEach(function(t){var n=t.split("=");2==n.length&&e.push({name:n[0],value:n[1]})})}return e}();return r=r.concat(c),u.forEach(function(t){if(null==r.find(function(e){return e.name==t.name})&&t.required)throw new Error("router match failed,no matched params:"+t.name)}),{value:r}}},r=0;r<t.fullUrls.length;r++){var i=o(r);if("object"==typeof i)return i.value}return null}function p(){a.forEach(function(t){return function t(e){e.children.forEach(function(e){t(e)}),e.marked=!1}(t)});for(var t=[],e=function(){var e=[];if(a.forEach(function(t){e=e.concat(function t(e){if(e.marked)return[];if(0==e.children.length)return e.marked=!0,[e];var n=[];return e.children.forEach(function(e){n=n.concat(t(e))}),0==n.length?(e.marked=!0,[e]):n}(t))}),0==e.length)return"break";t=t.concat(e)};;){if("break"===e())break}for(var n=!1,r=0;r<t.length;r++){var u=t[r];if(null!=u.redirect){window.history.replaceState(null,"",u.redirect),n=!0;break}var c=s(u);if(null!=c){o.SetActiveRouter(location.pathname,c),i=[u];for(var l=u.parent;null!=l;)i.unshift(l),l=l.parent;break}}n&&p()}e.RegisterRouter=function(t){!function t(e){e.forEach(function(e){if(e.children=e.children?e.children:[],null!=e.redirect&&(e.component="",e.url=""),null==e.component&&null==e.components)throw new Error("must specify component or components in router");if(null==e.url&&null==e.urls)throw new Error("must specify url or urls in router");e.params=e.params?e.params:[],e.urls=e.urls?e.urls:[],null!=e.url&&e.urls.push(e.url),t(e.children)})}(t),t.forEach(function(t){t.urls=t.urls.map(function(t){return 0!=t.indexOf("/")?"/"+t:t})}),t.forEach(function(t){a.push(function t(e,n){var o={urls:n.urls,component:n.component,components:n.components,children:[],parent:e,fullUrls:[],params:n.params,redirect:n.redirect,marked:!1};null!=e?o.urls.forEach(function(t){e.fullUrls.forEach(function(e){0==t.indexOf("/")?o.fullUrls.push(t):""==t?o.fullUrls.push(e):o.fullUrls.push(e+"/"+t)})}):o.urls.forEach(function(t){return o.fullUrls.push(t)});for(var r=0;r<n.children.length;r++)o.children.push(t(o,n.children[r]));return o}(null,t))})},e.NextRouter=function(t,e){if(null==a)throw new Error("no router specified");if(-1==u&&(p(),c=t,u=0),u<i.length){var n=e?i[u].components[e]:i[u].component;return u++,n}throw new Error("router match failed")},e.MoveBack=function(){u--},e.NotifyUrlChange=function(){p(),c.OnRouterChange(),r.RefreshApp()}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),r=n(11),i=n(13),a=n(10),u=function(){function t(){this.$data={},this.$namespace="default",this.$dataItems=[],this.$computeItems=[],this.$isroot=!1}return Object.defineProperty(t.prototype,"$router",{get:function(){return{active:o.GetActiveRouter(),cur:null}},enumerable:!0,configurable:!0}),t.prototype.$initialize=function(){var t=this;this.$dataItems=this.$InitDataItems(),this.$computeItems=this.$InitComputeItems(),this.$treeRoot=this.$InitTreeroot(),this.$namespace=this.$InitNamespace(),this.$dataItems.forEach(function(e){t.$data[e.name]=e.value,Object.defineProperty(t,e.name,{get:function(){return t.$data[e.name]},set:function(n){t.$data[e.name]=n}})}),r.ReactiveData(this.$data),this.$computeItems.forEach(function(e){r.ReactiveComputed(t,t.$treeRoot,e.name,e.get)})},t.prototype.$AttachChildren=function(){this.$treeRoot.AttachChildren()},t.prototype.$GetExpOrFunValue=function(t){var e;return"string"==typeof t&&(e=i.EvalExp(this,t)),"function"==typeof t&&(e=t.call(this)),e},t.prototype.$ExtendMvvm=function(){return this},t.prototype.$SetValue=function(t,e){for(var n=t.split("."),o=this.$data,r=!0,i=0;i<n.length-1;i++){if(null==o){r=!1;break}o=o[n[i]]}r&&null!=o&&(o[n[n.length-1]]=e)},t.prototype.$CreateWatcher=function(t,e,n,o){new a.Watcher(this,t,e,n,o)},t.prototype.$OnDestroy=function(){this.$treeRoot.OnRemoved()},t.prototype.$SetRoot=function(t){this.$isroot=t},t.prototype.$IsRoot=function(){return this.$isroot},t.prototype.$GetDataItems=function(){return this.$dataItems},t.prototype.$GetComputedItems=function(){return this.$computeItems},t.prototype.$Refresh=function(){this.$treeRoot.Rerender()},t.prototype.$RevokeMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if("function"!=typeof this[t])throw new Error(t+" is not a function");this[t].apply(this,e)},t}();e.Mvvm=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=[];e.Start=function(){o.GetApp().forEach(function(t){var e=new t;e.$initialize(),e.$AttachChildren(),e.$SetRoot(!0),r.push(e);var n=e.$Render(),o=document.querySelector(e.$InitEl());o.parentElement.replaceChild(n.dom,o)})},e.RefreshApp=function(){r.forEach(function(t){return t.$Refresh()})}},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(3),u=n(21),c=function(t){function e(e,n,o,r){var a=t.call(this,e,n,o)||this;if(a.Vdom=e,a.mvvm=n,a.Parent=o,a.SurroundMvvm=r,a.ins_pure={},a.ins_exp={},a.outs={},a.Vdom)for(var u=0;u<a.Vdom.Attrs.length;u++){for(var c=a.Vdom.Attrs[u].Name,s=a.Vdom.Attrs[u].Value,p=a.SurroundMvvm.$InitIns(),l=0;l<p.length;l++){var f=p[l];if(i.REG_IN.test(c)&&f.name==RegExp.$1){a.ins_exp[RegExp.$1]=s;break}if(f.name==c){a.ins_pure[c]=s;break}}for(var h=a.SurroundMvvm.$InitOuts(),d=0;d<h.length;d++){var m=h[d];if(i.REG_OUT.test(c)&&m.name==RegExp.$1){a.outs[RegExp.$1]=s;break}}}return a}return r(e,t),e.prototype.AddIns=function(t,e){this.ins_exp[t]=e},e.prototype.GetTemplate=function(t){for(var e=0;e<this.Children.length;e++){var n=this.Children[e];if(n.templatename==t)return n}return null},e.prototype.Render=function(){var t=this.SurroundMvvm.$Render();return this.DomSet=[t],this.DomSet},e.prototype.AttachChildren=function(){if(null!=this.Vdom){for(var t={default:new u.PlugNode(null,this.mvvm,null,"default")},e=0;e<this.Vdom.Children.length;e++){var n=this.Vdom.Children[e],o=n.GetAttr("slot");null!=o&&""!=o||(o="default"),null==t[o]&&(t[o]=new u.PlugNode(null,this.mvvm,null,o));var r=a.NewVNode(n,t[o].mvvm,t[o]);r.AttachChildren(),t[o].Children.push(r)}for(var i in t)this.Children.push(t[i])}},e.prototype.GetInValue=function(t){return null!=this.ins_pure[t]?this.ins_pure[t]:null!=this.ins_exp[t]?this.mvvm.$GetExpOrFunValue(this.ins_exp[t]):null},e.prototype.GetIn=function(t){return null!=this.ins_pure[t]?{value:this.ins_pure[t],const:!0}:null!=this.ins_exp[t]?{value:this.ins_exp[t],const:!1}:null},e.prototype.GetOut=function(t){return this.outs[t]},e.prototype.Rerender=function(){this.SurroundMvvm.$Refresh()},e.prototype.Update=function(){this.SurroundMvvm.$Update()},e.prototype.OnRemoved=function(){this.SurroundMvvm.$OnDestroy()},e.prototype.SetStatus=function(t){this.status=t,this.SurroundMvvm.$SetStatus(t)},e.prototype.Reflow=function(){},e}(n(2).VNode);e.CustomNode=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(11),i=function(){function t(t,e,n,o,r){if(this.mvvm=t,this.vnode=e,this.ExpOrFunc=n,this.cb=o,this.watchingArrayItem=r,this.deepRecord=[],this.value=this.getValue(),this.watchingArrayItem&&"[object Array]"==toString.call(this.value))for(var i=0;i<this.value.length;i++)this.deepRecord[i]=this.value[i]}return t.prototype.getValue=function(){r.SetTarget(this);var t=this.mvvm.$GetExpOrFunValue(this.ExpOrFunc);return r.CleanTarget(),t},t.prototype.GetVNode=function(){return this.vnode},t.prototype.Update=function(){if(this.vnode.GetStatus()==o.VNodeStatus.ACTIVE){var t=this.getValue();if(this.value!=t)this.cb(t,this.value),this.value=t;else if(this.watchingArrayItem&&"[object Array]"==toString.call(this.value)){for(var e=!1,n=0;n<t.length;n++)if(t[n]!=this.deepRecord[n]){this.cb(t,this.value),e=!0;break}if(e){this.deepRecord=[];for(n=0;n<t.length;n++)this.deepRecord[n]=t[n]}}}},t}();e.Watcher=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(10),i=n(26);function a(t){null!=t&&"object"==typeof t&&Object.keys(t).forEach(function(e){u(t,e),a(t[e])})}function u(t,e){var n=new i.WatcherCollecter(e),r=t[e];"[object Array]"==toString.call(r)&&c(r,n),Object.defineProperty(t,e,{get:function(){return null!=o&&n.AddTarget(o),r},set:function(t){t!=r&&(r=t,"[object Array]"==toString.call(r)&&c(r,n),a(t),n.Notify())},enumerable:!0,configurable:!0})}function c(t,e){t.push==Array.prototype.push&&(Object.defineProperty(t,"push",{enumerable:!1,configurable:!0,value:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var r,i=t.length,a=(r=Array.prototype.push).call.apply(r,[t].concat(n)),c=i;c<a;c++)u(t,""+c);return e.Notify(),a}}),Object.defineProperty(t,"pop",{enumerable:!1,configurable:!0,value:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r,i=(r=Array.prototype.pop).call.apply(r,[t].concat(n));return e.Notify(),i}}),Object.defineProperty(t,"splice",{enumerable:!1,configurable:!0,value:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r,i=(r=Array.prototype.splice).call.apply(r,[t].concat(n));n.length>2&&n.slice(2).forEach(function(e){var n=t.indexOf(e);u(t,""+n)});return e.Notify(),i}}),Object.defineProperty(t,"shift",{enumerable:!1,configurable:!0,value:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r,i=(r=Array.prototype.shift).call.apply(r,[t].concat(n));return e.Notify(),i}}))}e.SetTarget=function(t){o=t},e.CleanTarget=function(){o=null},e.ReactiveData=a,e.ReactiveComputed=function(t,e,n,a){var u,c=new i.WatcherCollecter(n),s=!0;Object.defineProperty(t,n,{get:function(){if(null!=o&&c.AddTarget(o),s){var n=o;o=null,u=a.call(t),new r.Watcher(t,e,a,function(t){u=t,c.Notify()}),o=n,s=!1}return u},enumerable:!0,configurable:!0})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){function t(t,e){this.path=t,this.params=e}return t.prototype.getParam=function(t){var e=this.params.find(function(e){return e.name==t});return e&&e.value||null},t}(),i=new r("",[]),a=[];e.SetActiveRouter=function(t,e){var n=new r(t,e);i.path=t,i.params=e,(a=a.filter(function(t){return t.vnode.GetStatus()!=o.VNodeStatus.DEPRECATED})).forEach(function(t){t.vnode.GetStatus()==o.VNodeStatus.ACTIVE&&t.cb(i,n)})},e.GetActiveRouter=function(){return i},e.WatchRouterChange=function(t,e){a.push({cb:e,vnode:t})}},function(module,exports){var EvalExp=function(context,exp,attachObj){var res,newcontext=context;null!=attachObj&&(newcontext=Object.assign(context,$attachObj));try{with(newcontext)res=eval(exp);return res}catch(error){console.error("eval "+exp+" failed"),console.error(error)}return""};exports.EvalExp=EvalExp},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r={};e.RegisterDirective=function(t,e,n){if(null!=r[o.Id(e,t)])throw new Error("directive "+o.Id(e,t)+" already exists");r[o.Id(e,t)]=n},e.GetDirectiveCon=function(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),r[o.Id(e,t)]},e.IsDirectiveRegistered=function(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),null!=r[o.Id(e,t)]}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=[];e.RegisterApp=function(t){n.push(t)},e.GetApp=function(){return n}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.$directive=t,this.$vnode=e,this.$Ins=[],this.$Outs=[],this.$InitFuncs=[],this.$DestroyFuncs=[]}return t.prototype.$OnDestroy=function(){var t=this;this.$DestroyFuncs.forEach(function(e){t[e].call(t)})},t.prototype.$Render=function(){var t=this;this.$element=this.$vnode.DomSet[0].dom,this.$InitFuncs.forEach(function(e){t[e].call(t)}),this.$Ins.forEach(function(e){var n=t.$directive.GetIn(e.name);if(null==n&&e.required)throw new Error("component '"+t.$Name+"' need prop '"+e.name);if(null!=n)if(n.const)t[e.name]=n.value;else{var o=t.$vnode.mvvm.$GetExpOrFunValue(n.value);t.$checkProp(e,o),t[e.name]=o,t.$vnode.mvvm.$CreateWatcher(t.$vnode,n.value,function(n,o){t.$checkProp(e,n),t[e.name]=n})}})},t.prototype.$checkProp=function(t,e){var n=function(t,e,n){throw new Error("component '"+t+"' prop '"+e+"' not receive "+n)};"array"==t.type&&"[object Array]"!=toString.call(e)&&n(this.$Name,t.name,t.type),"object"==t.type&&"[object Object]"!=toString.call(e)&&n(this.$Name,t.name,t.type),"number"==t.type&&"[object Number]"!=toString.call(e)&&n(this.$Name,t.name,t.type),"boolean"==t.type&&"[object Boolean]"!=toString.call(e)&&n(this.$Name,t.name,t.type),"string"==t.type&&"[object String]"!=toString.call(e)&&n(this.$Name,t.name,t.type)},t}();e.DirectiveMVVM=n},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$el="",e}return r(e,t),e.prototype.$NavigateTo=function(t){window.history.replaceState(null,null,t),i.NotifyUrlChange()},e.prototype.$Render=function(){return this.$treeRoot.Render()[0]},e.prototype.$InitNamespace=function(){throw new Error("Method not implemented.")},e.prototype.$InitDataItems=function(){throw new Error("Method not implemented.")},e.prototype.$InitComputeItems=function(){throw new Error("Method not implemented.")},e.prototype.$InitTreeroot=function(){throw new Error("Method not implemented.")},e.prototype.$InitEl=function(){throw new Error("Method not implemented.")},e}(n(7).Mvvm);e.AppMvvm=a},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$name="",e.$ins=[],e.$outs=[],e}return r(e,t),e.prototype.$initialize=function(){var e=this;t.prototype.$initialize.call(this),this.$ins=this.$InitIns(),this.$outs=this.$InitOuts(),this.$name=this.$InitName(),this.$ins.forEach(function(t){var n=e.$fenceNode.GetIn(t.name);if(null==n&&t.required)throw new Error("component '"+e.$name+"' need prop '"+t.name);null!=n&&(n.const?e[t.name]=n.value:Object.defineProperty(e,t.name,{get:function(){var o=e.$fenceNode.mvvm.$GetExpOrFunValue(n.value);return e.$checkProp(t,o),o}}))})},e.prototype.$checkProp=function(t,e){var n=function(t,e,n){throw new Error("component '"+t+"' prop '"+e+"' not receive "+n)};"array"==t.type&&"[object Array]"!=toString.call(e)&&n(this.$name,t.name,t.type),"object"==t.type&&"[object Object]"!=toString.call(e)&&n(this.$name,t.name,t.type),"number"==t.type&&"[object Number]"!=toString.call(e)&&n(this.$name,t.name,t.type),"boolean"==t.type&&"[object Boolean]"!=toString.call(e)&&n(this.$name,t.name,t.type),"string"==t.type&&"[object String]"!=toString.call(e)&&n(this.$name,t.name,t.type)},e.prototype.$Render=function(){return this.$treeRoot.Render()[0]},e.prototype.$Update=function(){this.$treeRoot.Update()},e.prototype.$SetStatus=function(t){this.$treeRoot.SetStatus(t)},e.prototype.$Emit=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(null!=this.$fenceNode&&null!=this.$fenceNode.mvvm){var r=this.$outs.find(function(e){return e.name==t});if(null==r)throw new Error("no specified event "+t+" at component "+this.$namespace+"::"+this.$name);if(n.length!=r.paramsType.length)throw new Error("no specified params "+t+" at component "+this.$namespace+"::"+this.$name);for(var a=0;a<r.paramsType.length;a++)if(i.TypeOf(n[a])!=r.paramsType[a])throw new Error("params expected "+r.paramsType[a]+",but received "+toString.call(n[a])+" at component "+this.$namespace+"::"+this.$name);var u=this.$fenceNode.GetOut(t);(e=this.$fenceNode.mvvm).$RevokeMethod.apply(e,[u].concat(n))}},e.prototype.$OnRouterChange=function(){this.$treeRoot.OnRouterChange()},e.prototype.$GetFenceNode=function(){return this.$fenceNode},e.prototype.$SetFenceNode=function(t){this.$fenceNode=t},e.prototype.$InitNamespace=function(){throw new Error("Method not implemented.")},e.prototype.$InitDataItems=function(){throw new Error("Method not implemented.")},e.prototype.$InitComputeItems=function(){throw new Error("Method not implemented.")},e.prototype.$InitName=function(){throw new Error("Method not implemented.")},e.prototype.$InitIns=function(){throw new Error("Method not implemented.")},e.prototype.$InitOuts=function(){throw new Error("Method not implemented.")},e.prototype.$InitTreeroot=function(){throw new Error("Method not implemented.")},e.prototype.$GetIns=function(){return this.$ins},e}(n(7).Mvvm);e.ComponentMvvm=a},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),a=n(14);e.Directive=function(t){!function(t){t.events=t.events?t.events:[],t.namespace=t.namespace?t.namespace:"default"}(t);var e=i.FetchProperty();return function(n){var o=function(n){function o(o,r){var i=n.call(this,o,r)||this;return i.$Name=t.name,i.$Namespace=t.namespace,i.$Ins=e.props,i.$Out=t.events,i.$InitFuncs=e.initFuncs,i.$DestroyFuncs=e.destroyFuncs,i}return r(o,n),o}(n);a.RegisterDirective(t.name,t.namespace,o)}}},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),a=n(3),u=n(4);e.App=function(t){!function(t){t.namespace=t.namespace?t.namespace:"default"}(t);var e=u.FetchProperty();return function(n){var o=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.$InitFuncs=e.initFuncs,t.$DestroyFuncs=e.destroyFuncs,t}return r(o,n),o.prototype.$initialize=function(){var t=this;n.prototype.$initialize.call(this),this.$InitFuncs.forEach(function(e){t[e].call(t)})},o.prototype.$OnDestroy=function(){var t=this;n.prototype.$OnDestroy.call(this),this.$DestroyFuncs.forEach(function(e){t[e].call(t)})},o.prototype.$InitTreeroot=function(){var e=document.querySelector(t.el);if(null==e)throw new Error("no specified element "+t.el);var n=a.TraverseDom(e);return a.NewVNode(n,this,null)},o.prototype.$InitNamespace=function(){return t.namespace},o.prototype.$InitDataItems=function(){var t=this,n=[];return e.datas.forEach(function(e){n.push({name:e,value:t[e]})}),n},o.prototype.$InitComputeItems=function(){return e.computes},o.prototype.$InitEl=function(){return t.el},o}(n);i.RegisterApp(o)}}},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.vdom=e,i.mvvm=n,i.Parent=o,i.templatename=r,i}return r(e,t),e.prototype.Render=function(){var t=this;return this.Children.forEach(function(e){var n=e.Render();t.DomSet=t.DomSet.concat(n)}),this.DomSet},e.prototype.Update=function(){var t=[];this.Children.forEach(function(e){t.push(e)}),t.forEach(function(t){t.Update()})},e}(n(2).VNode);e.PlugNode=i},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(2),u=n(9),c=n(5),s=n(1),p=n(6),l=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.Vdom=e,r.mvvm=n,r.Parent=o,r}return r(e,t),e.prototype.Render=function(){var t=p.NextRouter(this);if(null!=t){var e=this.instance(t);this.Children=[e],this.DomSet=e.Render(),p.MoveBack()}return this.DomSet},e.prototype.OnRouterChange=function(){var t=p.NextRouter(this);if(null!=t){var e=this.instance(t);this.Children=[e],this.DomSet.forEach(function(t){return t.type=i.DomType.DELETE}),this.DomSet=this.DomSet.concat(e.Render()),this.Parent.Reflow(),p.MoveBack()}else this.Children=[],this.DomSet.forEach(function(t){t.type=i.DomType.DELETE})},e.prototype.instance=function(t){var e=s.GetNS(t);null==e.namespace&&(e.namespace="default");var n=c.InitComponent(e.value,e.namespace);if(null==n)throw new Error("router can not find component name:"+e.value+",namespace:"+e.namespace);var o=new n,r=new u.CustomNode(null,this.mvvm,null,o);return o.$SetFenceNode(r),o.$initialize(),o.$AttachChildren(),r},e.prototype.Update=function(){},e.prototype.Reflow=function(){},e}(a.VNode);e.RouterNode=l},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Render=function(){var t=this;return this.Children.forEach(function(e){t.DomSet=t.DomSet.concat(e.Render())}),this.DomSet},e.prototype.Update=function(){},e}(n(2).VNode);e.TemplateNode=i},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(2),u=n(3),c=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.Vdom=e,i.mvvm=n,i.Parent=o,i.ifExp=r,i}return r(e,t),e.prototype.AttachChildren=function(){if(this.mvvm.$GetExpOrFunValue(this.ifExp)){var t=u.NewVNode(this.Vdom,this.mvvm,null,u.Priority.NORMAL);t.AttachChildren(),this.Children=[t]}},e.prototype.Render=function(){var t=this;return this.Children.forEach(function(e){t.DomSet=t.DomSet.concat(e.Render())}),this.mvvm.$CreateWatcher(this,this.ifExp,function(e){return t.reImpletement(e)}),this.DomSet},e.prototype.Update=function(){var t=this.mvvm.$GetExpOrFunValue(this.ifExp);this.reImpletement(t)},e.prototype.reImpletement=function(t){var e=this;if(t){var n=u.NewVNode(this.Vdom,this.mvvm,null,u.Priority.NORMAL);n.AttachChildren(),this.Children=[n],this.Children.forEach(function(t){e.DomSet=e.DomSet.concat(t.Render())}),this.Parent.Reflow()}else this.Children=[],this.DomSet.forEach(function(t){t.type=i.DomType.DELETE})},e.prototype.OnRemoved=function(){this.Children.length>0&&this.Children[0].OnRemoved()},e.prototype.SetStatus=function(t){this.status=t,this.Children.length>0&&this.Children[0].SetStatus(t)},e}(a.VNode);e.IfNode=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=[],i=!1;function a(){var t=[];r.forEach(function(e){return t.push(e)}),r=[],t.forEach(function(t){return t.Update()}),r.length>0?a():o.RefreshApp()}e.AddWatcher=function(t){-1==r.indexOf(t)&&r.push(t),i||(i=!0,setTimeout(function(){a(),i=!1},0))},e.RevokeWatcher=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),r=n(0),i=function(){function t(t){this.key=t,this.watches=[]}return t.prototype.GetKey=function(){return this.key},t.prototype.AddTarget=function(t){-1==this.watches.indexOf(t)&&this.watches.push(t)},t.prototype.Notify=function(){this.watches=this.watches.filter(function(t){return t.GetVNode().GetStatus()==r.VNodeStatus.ACTIVE?(o.AddWatcher(t),!0):t.GetVNode().GetStatus()==r.VNodeStatus.INACTIVE||t.GetVNode().GetStatus()!=r.VNodeStatus.DEPRECATED&&void 0})},t}();e.WatcherCollecter=i},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e){this.itemExp=t,this.arrayExp=e}}();e.ForExp=n},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(13),u=n(27),c=n(7),s=n(3),p=n(0),l=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;i.Vdom=e,i.mvvm=n,i.Parent=o,i.originForExp=r;var a=i.originForExp.trim().split(/\s+/);return i.ForExp=new u.ForExp(a[0],a[2]),i}return r(e,t),e.prototype.newCopyNode=function(t){var e=this.ForExp.itemExp,n=this.ForExp.arrayExp+"["+t+"]",o=this,i=new(function(i){function u(){var t=null!==i&&i.apply(this,arguments)||this;return t.$hirented=o.mvvm,t}return r(u,i),u.prototype.$InitDataItems=function(){return[]},u.prototype.$InitComputeItems=function(){return[]},u.prototype.$Render=function(){return null},u.prototype.$InitTreeroot=function(){return null},u.prototype.$InitNamespace=function(){return o.mvvm.$InitNamespace()},u.prototype.$GetExpOrFunValue=function(t){var e=this.$ExtendMvvm();return a.EvalExp(e,t)},u.prototype.$ExtendMvvm=function(){var r=o.mvvm.$ExtendMvvm();return Object.defineProperty(r,e,{get:function(){return r.$GetExpOrFunValue(n)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"$index",{value:t,configurable:!0,enumerable:!0}),r},u.prototype.$RevokeMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.$ExtendMvvm();o.$RevokeMethod.apply(o,[t].concat(e))},u}(c.Mvvm)),u=s.NewVNode(this.Vdom,i,this,s.Priority.IF);return u.AttachChildren(),u},e.prototype.implementForExp=function(t){var e=this;if(t>this.Children.length){for(var n=[],o=this.Children.length;o<t;o++){var r=this.newCopyNode(o);n.push(r)}return n.forEach(function(t){e.Children.push(t),e.DomSet=e.DomSet.concat(t.Render())}),void this.Parent.Reflow()}if(t<this.Children.length){var a=this.Children.splice(t);a.forEach(function(t){e.DomSet.forEach(function(e){t.DomSet.some(function(t){return t.dom==e.dom})&&(e.type=p.DomType.DELETE)})}),a.forEach(function(t){return t.SetStatus(i.VNodeStatus.DEPRECATED)}),a.forEach(function(t){t.OnRemoved()})}},e.prototype.Update=function(){var t=this.mvvm.$GetExpOrFunValue(this.ForExp.arrayExp);"[object Array]"===toString.call(t)&&this.implementForExp(t.length)},e.prototype.AttachChildren=function(){for(var t=this.mvvm.$GetExpOrFunValue(this.ForExp.arrayExp+".length"),e=0;e<t;e++)this.Children.push(this.newCopyNode(e))},e.prototype.Render=function(){var t=this;return this.mvvm.$CreateWatcher(this,this.ForExp.arrayExp+".length",this.implementForExp.bind(this)),this.Children.forEach(function(e){t.DomSet=t.DomSet.concat(e.Render())}),this.DomSet},e.prototype.OnRemoved=function(){this.Children.forEach(function(t){return t.OnRemoved()})},e.prototype.SetStatus=function(t){this.status=t,this.Children.forEach(function(e){return e.SetStatus(t)})},e}(n(2).VNode);e.ForNode=l},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.vdom=e,i.mvvm=n,i.Parent=o,i.name=r,null!=i.name&&""!=i.name||(i.name="default"),i}return r(e,t),e.prototype.Render=function(){var t=this.mvvm.$GetFenceNode().GetTemplate(this.name);return null!=t&&(t.Parent=this,this.Children=[t],this.DomSet=t.Render()),this.DomSet},e.prototype.Update=function(){var t=this.mvvm.$GetFenceNode().GetTemplate(this.name);null!=t&&t.Update()},e.prototype.SetStatus=function(t){this.status=t,this.mvvm.$GetFenceNode().GetTemplate(this.name).SetStatus(t)},e.prototype.OnRemoved=function(){this.mvvm.$GetFenceNode().GetTemplate(this.name).OnRemoved()},e}(n(2).VNode);e.SlotNode=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){function t(t){var e=this;this.vdom=t,this.ins_pure={},this.ins_exp={},this.outs={},this.vdom.Attrs.forEach(function(t){e.addProperty(t.Name,t.Value)})}return t.prototype.addProperty=function(t,e){o.REG_IN.test(t)?this.ins_exp[RegExp.$1]=e:o.REG_OUT.test(t)?this.outs[RegExp.$1]=e:this.ins_pure[t]=e},t.prototype.GetIn=function(t){return null!=this.ins_pure[t]?{value:this.ins_pure[t],const:!0}:null!=this.ins_exp[t]?{value:this.ins_exp[t],const:!1}:null},t.prototype.GetOut=function(t){return this.outs[t]},t}();e.DirectiveNode=r},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var util_1=__webpack_require__(1);function Classes(exp,vnode,isconst){if(isconst){var hacked="var a="+exp+";a",classes_1;try{classes_1=eval(hacked)}catch(t){return void util_1.LogError("json format error:"+exp)}var _loop_1=function(t){vnode.mvvm.$GetExpOrFunValue(t)&&vnode.DomSet[0].dom.classList.add(classes_1[t]),vnode.mvvm.$CreateWatcher(vnode,t,function(e){e?vnode.DomSet[0].dom.classList.add(classes_1[t]):vnode.DomSet[0].dom.classList.remove(classes_1[t])})};for(var key in classes_1)_loop_1(key)}}exports.Classes=Classes},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var util_1=__webpack_require__(1);function Style(exp,vnode,isconst){if(isconst){var hacked="var a="+exp+";a",styleexp=void 0;try{styleexp=eval(hacked)}catch(t){return void util_1.LogError("json format error:"+exp)}var _loop_1=function(t){var e=vnode.mvvm.$GetExpOrFunValue(t),n=styleexp[t];if(e)for(var o in n)vnode.DomSet[0].dom.style[o]=n[o];vnode.mvvm.$CreateWatcher(vnode,t,function(t){if(t)for(var e in n)vnode.DomSet[0].dom.style[e]=n[e];else for(var e in n)vnode.DomSet[0].dom.style[e]=""})};for(var key in styleexp)_loop_1(key)}}exports.Style=Style},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.Html=function(t,e,n){if(n){var r=o.StrToEvalstr(t);if(r.isconst)e.DomSet[0].dom.innerHTML=r.exp;else{var i=e.mvvm.$GetExpOrFunValue(r.exp);e.DomSet[0].dom.innerHTML=i,e.mvvm.$CreateWatcher(e,r.exp,function(t){e.DomSet[0].dom.innerHTML=t})}}else i=e.mvvm.$GetExpOrFunValue(t),e.DomSet[0].dom.innerHTML=i,e.mvvm.$CreateWatcher(e,t,function(t){e.DomSet[0].dom.innerHTML=t})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.OnClick=function(t,e,n){if(o.REG_EVENT.test(t)){var r=RegExp.$1,i=RegExp.$2;if(i.length>0){var a=i.split(",");e.DomSet[0].dom.addEventListener("click",function(){var t,n=[];a.forEach(function(t){if(o.REG_STR.test(t))n.push(RegExp.$2);else{if("true"===t)return void n.push(!0);"false"===t&&n.push(!1);var r=new Number(t).valueOf();isNaN(r)?n.push(e.mvvm.$GetExpOrFunValue(t)):n.push(r.valueOf())}}),(t=e.mvvm).$RevokeMethod.apply(t,[r].concat(n))})}else e.DomSet[0].dom.addEventListener("click",function(){e.mvvm.$RevokeMethod(r)})}}},function(t,e){function n(t,e){var n=t.DomSet[0].dom;if("select"!=t.GetNodeName()){var o=n.getAttribute("type");switch(null!=o&&""!=o||(o="text"),o){case"text":n.value=e;break;case"radio":n.value==e?n.checked=!0:n.checked=!1;break;case"checkbox":"[object Array]"==toString.call(e)&&(-1==e.indexOf(n.value)?n.checked=!1:n.checked=!0)}}else n.value=e}Object.defineProperty(e,"__esModule",{value:!0}),e.DirModel=function(t,e,o){var r=e.Vdom.GetAttr("type"),i=e.Vdom.NodeName.toLowerCase(),a=e.mvvm.$GetExpOrFunValue(t);n(e,a),"input"==i&&"checkbox"==r?e.mvvm.$CreateWatcher(e,t,function(t){n(e,t)},!0):e.mvvm.$CreateWatcher(e,t,function(t){n(e,t)}),e.DomSet[0].dom.addEventListener("input",function(n){if("select"!=e.GetNodeName()){var o=e.DomSet[0].dom.getAttribute("type");switch(null!=o&&""!=o||(o="text"),o){case"text":case"radio":e.mvvm.$SetValue(t,n.target.value);break;case"checkbox":var r=e.mvvm.$GetExpOrFunValue(t);if("[object Array]"==toString.call(r)){var i=r,a=i.indexOf(n.target.value);-1==a?i.push(n.target.value):i.splice(a,1)}}}else e.mvvm.$SetValue(t,n.target.value)})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1);e.Href=function(t,e,n){var i="";if("a"==e.DomSet[0].dom.nodeName.toLowerCase())if(n){var a=r.StrToEvalstr(t);if(a.isconst)i=a.exp,e.DomSet[0].dom.setAttribute(o.PRE+"href",a.exp);else{var u=e.mvvm.$GetExpOrFunValue(a.exp);i=u,e.DomSet[0].dom.setAttribute(o.PRE+"href",u),e.mvvm.$CreateWatcher(e,a.exp,function(t){i=t,e.DomSet[0].dom.setAttribute(o.PRE+"href",t)})}}else u=e.mvvm.$GetExpOrFunValue(t),i=u,e.mvvm.$CreateWatcher(e,t,function(t){i=t,e.DomSet[0].dom.setAttribute(o.PRE+"href",t)});e.DomSet[0].dom.addEventListener("click",function(){e.NavigateTo(i)})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),r=n(0),i=n(35),a=n(34),u=n(33),c=n(32),s=n(31),p={};function l(t,e){if(null!=p[t])throw new Error("inner directive "+t+" already exists");p[t]=e}e.GetInnerDir=function(t){return p[t]},l(r.PRE+"href",o.Href),l(r.PRE+"model",i.DirModel),l(r.PRE+"click",a.OnClick),l(r.PRE+"html",u.Html),l(r.PRE+"class",s.Classes),l(r.PRE+"style",c.Style)},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),a=n(14),u=n(1),c=n(0),s=n(30),p=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;r.Vdom=e,r.mvvm=n,r.Parent=o,r.directives=[],r.innerDirective=[],r.nodeValue=r.Vdom.NodeValue,r.nodeName=r.Vdom.NodeName,r.nodeType=r.Vdom.NodeType;for(var p=r.Vdom.Attrs,l=function(t){var e=f.Vdom.Attrs[t],n=u.GetNS(e.Name);if(null==n.namespace&&(n.namespace=f.mvvm.$InitNamespace()),a.IsDirectiveRegistered(n.value,n.namespace)){var o=new s.DirectiveNode(f.Vdom),i=new(a.GetDirectiveCon(n.value,n.namespace))(o,f);return p=p.filter(function(t){var e=t.Name;(c.REG_IN.test(t.Name)||c.REG_OUT.test(t.Name))&&(e=RegExp.$1);var n=i.$Ins.some(function(t){return t.name==e}),o=i.$Outs.some(function(t){return t==e});return!(n||o)}),f.directives.push(i),{value:r}}},f=this,h=0;h<r.Vdom.Attrs.length;h++){var d=l(h);if("object"==typeof d)return d.value}return(p=p.filter(function(t){if(c.REG_IN.test(t.Name)){var e=i.GetInnerDir(RegExp.$1);if(null!=e)return r.innerDirective.push({dir:e,isconst:!1,exp:t.Value}),!1}var n=i.GetInnerDir(t.Name);return null==n||(r.innerDirective.push({dir:n,isconst:!0,exp:t.Value}),!1)})).forEach(function(t){c.REG_ATTR.test(t.Name)&&r.attrs.push({name:t.Name,value:t.Value})}),r}return r(e,t),e.prototype.OnRemoved=function(){t.prototype.OnRemoved.call(this),this.directives.forEach(function(t){return t.$OnDestroy()})},e.prototype.directiveBind=function(){var t=this;this.directives.forEach(function(t){return t.$Render()}),this.innerDirective.forEach(function(e){e.dir(e.exp,t,e.isconst)})},e.prototype.Render=function(){var t=this;if(1==this.nodeType){var e=document.createElement(this.nodeName);return this.attrs.forEach(function(t){e.setAttribute(t.name,t.value)}),this.DomSet=[{type:c.DomType.NEW,dom:e}],this.Children.forEach(function(e){var n=e.Render();n.forEach(function(e){t.DomSet[0].dom.appendChild(e.dom)}),n.forEach(function(t){t.type=c.DomType.CONSTANT})}),this.directiveBind(),this.DomSet}if(3==this.nodeType){var n=document.createTextNode(this.nodeValue);this.DomSet=[{type:c.DomType.NEW,dom:n}];var o=u.StrToEvalstr(this.nodeValue);return o.isconst?n.textContent=o.exp:(n.textContent=this.mvvm.$GetExpOrFunValue(o.exp),this.mvvm.$CreateWatcher(this,o.exp,function(t,e){n.textContent=t})),this.DomSet}if(8==this.nodeType){var r=document.createComment(this.nodeValue);return this.DomSet=[{type:c.DomType.NEW,dom:r}],this.DomSet}},e.prototype.Rerender=function(){if(this.DomSet.forEach(function(t){return t.type=c.DomType.CONSTANT}),1==this.nodeType){var t=this.DomSet[0].dom,e=null;this.Children.forEach(function(n){n.DomSet.forEach(function(n){if(n.type!=c.DomType.CONSTANT)return n.type==c.DomType.NEW?(u.InsertDomChild(t,n.dom,e),void(e=n.dom)):void(n.type!=c.DomType.DELETE||t.removeChild(n.dom));e=n.dom})})}this.Children.forEach(function(t){return t.Rerender()})},e.prototype.Update=function(){if(1==this.nodeType){var t=[];return this.Children.forEach(function(e){t.push(e)}),void t.forEach(function(t){t.Update()})}if(3==this.nodeType){var e=u.StrToEvalstr(this.nodeValue);e.isconst?this.DomSet[0].dom.textContent=e.exp:this.DomSet[0].dom.textContent=this.mvvm.$GetExpOrFunValue(e.exp)}},e.prototype.Reflow=function(){},e}(n(2).VNode);e.VinallaNode=p},function(t,e,n){var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),a=n(4),u=n(3);e.Component=function(t){!function(t){t.namespace=t.namespace?t.namespace:"default",t.events=t.events?t.events:[]}(t);var e=a.FetchProperty();return function(n){var o=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.$InitFuncs=e.initFuncs,t.$DestroyFuncs=e.destroyFuncs,t}return r(o,n),o.prototype.$initialize=function(){var t=this;n.prototype.$initialize.call(this),this.$InitFuncs.forEach(function(e){t[e].call(t)})},o.prototype.$OnDestroy=function(){var t=this;n.prototype.$OnDestroy.call(this),this.$DestroyFuncs.forEach(function(e){t[e].call(t)})},o.prototype.$InitTreeroot=function(){var t=i.GetDomTree(this.$InitName(),this.$InitNamespace());if(null==t)throw new Error("not found template or templateUrl for component "+this.$InitName()+" in "+this.$InitNamespace());return u.NewVNode(t,this,null)},o.prototype.$InitNamespace=function(){return t.namespace},o.prototype.$InitDataItems=function(){var t=this,n=[];return e.datas.forEach(function(e){n.push({name:e,value:t[e]})}),n},o.prototype.$InitComputeItems=function(){return e.computes},o.prototype.$InitName=function(){return t.name},o.prototype.$InitIns=function(){return e.props},o.prototype.$InitOuts=function(){return t.events},o}(n);i.RegisterComponent(t.name,t.namespace,o,t)}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=n(39);e.Component=r.Component;var i=n(20);e.App=i.App;var a=n(4);e.Data=a.Data,e.Computed=a.Computed,e.Prop=a.Prop,e.OnInit=a.OnInit,e.OnDestroy=a.OnDestroy;var u=n(19);e.Directive=u.Directive;var c=n(18);e.ComponentMvvm=c.ComponentMvvm;var s=n(17);e.AppMvvm=s.AppMvvm;var p=n(16);e.DirectiveMVVM=p.DirectiveMVVM;var l=n(6);e.RegisterRouter=l.RegisterRouter,document.addEventListener("DOMContentLoaded",function(){o.Start()})}]);
//# sourceMappingURL=rio.min.js.map