{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/const.ts","webpack:///./src/decorator/app.ts","webpack:///./src/decorator/component.ts","webpack:///./src/decorator/directive.ts","webpack:///./src/decorator/property.ts","webpack:///./src/diff/diff.ts","webpack:///./src/directive/class.ts","webpack:///./src/directive/event.ts","webpack:///./src/directive/href.ts","webpack:///./src/directive/html.ts","webpack:///./src/directive/inner-dir.ts","webpack:///./src/directive/model.ts","webpack:///./src/directive/style.ts","webpack:///./src/eval.js","webpack:///./src/main.ts","webpack:///./src/manager/app-manager.ts","webpack:///./src/manager/components-manager.ts","webpack:///./src/manager/directive-manager.ts","webpack:///./src/manager/start.ts","webpack:///./src/models.ts","webpack:///./src/mvvm/app-mvvm.ts","webpack:///./src/mvvm/component-mvvm.ts","webpack:///./src/mvvm/directive-mvvm.ts","webpack:///./src/mvvm/mvvm.ts","webpack:///./src/observer/msg-queue.ts","webpack:///./src/observer/notice-center.ts","webpack:///./src/observer/observer.ts","webpack:///./src/observer/watcher-collect.ts","webpack:///./src/observer/watcher.ts","webpack:///./src/router/router-manager.ts","webpack:///./src/router/router-state.ts","webpack:///./src/util.ts","webpack:///./src/vdom/vdom.ts","webpack:///./src/vnode/custom-node.ts","webpack:///./src/vnode/directive-node.ts","webpack:///./src/vnode/for-node.ts","webpack:///./src/vnode/if-node.ts","webpack:///./src/vnode/plug-node.ts","webpack:///./src/vnode/router-node.ts","webpack:///./src/vnode/slot-node.ts","webpack:///./src/vnode/template-node.ts","webpack:///./src/vnode/vinalla-node.ts","webpack:///./src/vnode/vnode.ts"],"names":[],"mappings":"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","file":"rio.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","export const DIR_MODEL = \"model\"\nexport const DIR_EVENT_CLICK = \"click\"\nexport const ANCHOR=\"ref\"\nexport const PRE=\"r-\"\n\n/**花括号数据绑定表达式 */\nexport const REG_SINGLE = /^\\{\\{([^\\{\\}]*)\\}\\}$/\nexport const REG_MULTI = /\\{\\{(.*?)\\}\\}/\n/**事件监听响应函数 */\nexport const REG_EVENT=/^(\\w+)\\((.*)\\)$/\n/**字符串 */\nexport const REG_STR=/^(['\"])(.*?)\\1$/\nexport const REG_MID_STR=/(['\"])(.*?)\\1/\n\n/**输入属性 */\nexport const REG_IN=/^\\[(\\w+)\\]$/\n/**输出事件 */\nexport const REG_OUT=/^\\((\\w+)\\)$/\n/**正常属性 */\nexport const REG_ATTR=/^[A-z_][\\w\\-]*$/\n\n\n/**测试输出项 */\nexport const REG_TEST_OUTPUT=/^((click))$/\n\nexport enum VNodeStatus{\n    /**依然处于vnode树中 */\n    ACTIVE,\n    /**不在vnode树中但是有可能重新加回来 */\n    INACTIVE,\n    /**抛弃 */\n    DEPRECATED\n}\n\nexport enum DomType{\n    /*没有变化的*/\n    CONSTANT,\n    /**新增的 */\n    NEW,\n    /**删除的 */\n    DELETE\n}","import { RegisterApp } from \"../manager/app-manager\";\nimport { AppOption, IAppMvvm, DomStatus } from \"../models\";\nimport { NewVNode, TraverseDom } from \"../vdom/vdom\";\nimport { VNode } from \"../vnode/vnode\";\nimport { FetchProperty } from \"./property\";\n\n\n\nexport function App(option:AppOption){\n    checkAppOption(option)\n    let res=FetchProperty()\n    return function(target:IAppMvvm){\n        let constructor= class $AppMvvm extends target{\n            \n            $InitFuncs:string[]=res.initFuncs\n            $MountFuncs:string[]=res.mountFuncs\n            $DestroyFuncs:string[]=res.destroyFuncs\n            \n            $initialize(){\n                super.$initialize()\n                this.$InitFuncs.forEach(init=>{\n                    (this as any)[init].call(this)\n                })\n            }\n            $Render():DomStatus{\n                let domstatus=super.$Render();\n                this.$MountFuncs.forEach(func=>{\n                    (this as any)[func].call(this)\n                });\n                return domstatus;\n            }\n            $OnDestroy(){\n                super.$OnDestroy()\n                this.$DestroyFuncs.forEach(destroy=>{\n                    (this as any)[destroy].call(this)\n                })\n            }\n            $InitTreeroot(): VNode {\n                let dom=document.querySelector(option.el)\n                if(dom==null){\n                    throw new Error(\"no specified element \"+option.el)\n                }\n                let vdom=TraverseDom(dom)\n                let vnode=NewVNode(vdom,this,null)\n                return vnode\n            }\n            $InitNamespace(): string {\n                return option.namespace\n            }\n            $InitDataItems(): {name:string,value:any}[] {\n                let datas:{name:string,value:any}[]=[]\n                res.datas.forEach(item=>{\n                    datas.push({name:item,value:(this as any)[item]})\n                })\n                return datas\n            }\n            $InitComputeItems(): { name: string; get: () => any }[] {\n                return res.computes\n            }\n            $InitEl(){\n                return option.el\n            }\n            \n        }\n        RegisterApp(constructor)\n    }\n}\nfunction checkAppOption(option:AppOption){\n    option.namespace=option.namespace?option.namespace:\"default\"\n}","import { GetDomTree, RegisterComponent, InitComponent, ComponentAutoId } from '../manager/components-manager';\nimport { ComponentOption, Prop } from '../models';\nimport { NewVNode } from '../vdom/vdom';\nimport { VNode } from '../vnode/vnode';\nimport { DomStatus, Event, IComponentMvvm } from './../models';\nimport { FetchProperty } from './property';\n\n\n\nexport function Component(option:ComponentOption){\n    checkComponentOption(option)\n    let res=FetchProperty()\n    return function(target:IComponentMvvm){\n        let constructor= class $ComponentMvvm extends target{\n            $InitFuncs:string[]=res.initFuncs\n            $MountFuncs:string[]=res.mountFuncs\n            $DestroyFuncs:string[]=res.destroyFuncs\n            $initialize(){\n                super.$initialize()\n                this.$InitFuncs.forEach(init=>{\n                    (this as any)[init].call(this)\n                })\n            }\n            $Render():DomStatus{\n                let domstatus=super.$Render();\n                this.$MountFuncs.forEach(func=>{\n                    (this as any)[func].call(this)\n                });\n                return domstatus;\n            }\n            $OnDestroy(){\n                super.$OnDestroy()\n                this.$DestroyFuncs.forEach(destroy=>{\n                    (this as any)[destroy].call(this)\n                })\n            }\n            $InitTreeroot():VNode{\n                //以防页面组件未初始化\n                InitComponent(this.$InitName(),this.$InitNamespace());\n\n                let domtree=GetDomTree(this.$InitName(),this.$InitNamespace())\n                if(domtree==null){\n                    throw new Error(\"not found template or templateUrl for component \"+this.$InitName()+\" in \"+this.$InitNamespace())\n                }\n                \n                let vnode=NewVNode(domtree,this,null)\n                return vnode\n            }\n            $InitNamespace(): string {\n                return option.namespace\n            }\n            $InitDataItems(): {name:string,value:any}[] {\n                let datas:{name:string,value:any}[]=[]\n                res.datas.forEach(item=>{\n                    datas.push({name:item,value:(this as any)[item]})\n                })\n                return datas\n            }\n            $InitComputeItems(): { name: string; get: () => any }[] {\n                return res.computes\n            }\n            $InitName():string{\n                return option.name\n            }\n            $InitIns():Prop[]{\n                return res.props\n            }\n            $InitOuts():Event[]{\n                return option.events\n            }\n        }\n        if(option.name==null)\n            option.name=target.name.toLowerCase()+ComponentAutoId();\n        RegisterComponent(option.name,option.namespace,constructor,option);\n        return (constructor as any);\n    }\n}\n\n\nfunction checkComponentOption(option:ComponentOption){\n    option.namespace=option.namespace?option.namespace:\"default\"\n    option.events=option.events?option.events:[]\n}\n\n","import { RegisterDirective } from \"../manager/directive-manager\";\nimport { DirectiveOption, IDirectiveConstructor } from \"../models\";\nimport { FetchProperty } from \"./property\";\n\nexport function Directive(option:DirectiveOption){\n    checkDirectiveOption(option)\n    let res=FetchProperty()\n    return function(target:IDirectiveConstructor){\n        let constructor= class $DirectiveMvvm extends target{\n            $Name=option.name\n            $Namespace=option.namespace\n            $Ins=res.props\n            $Out=option.events\n            $InitFuncs=res.initFuncs\n            $MountFuncs=res.mountFuncs\n            $DestroyFuncs=res.destroyFuncs\n        }\n        RegisterDirective(option.name,option.namespace,constructor)\n    }\n}\nfunction checkDirectiveOption(option:DirectiveOption){\n    option.events=option.events?option.events:[]\n    option.namespace=option.namespace?option.namespace:\"default\"\n}","import { ParamType, Prop } from './../models';\nlet datas:string[]=[]\nlet computes:{name:string,get:()=>any}[]=[]\nlet props:Prop[]=[]\nlet initFuncs:string[]=[];\nlet mountFuncs:string[]=[];\nlet destroyFuncs:string[]=[]\n\n\n\nexport function Reactive(target:any,key:string){\n    datas.push(key)\n}\nexport function Computed(target:any,key:string,descriptor:PropertyDescriptor){\n    computes.push({name:key,get:(descriptor as any).get})\n}\nexport function Prop(name:string,required:boolean,type?:ParamType){\n    return function(target:any,key:string){\n        props.push({\n            name:name,\n            required:required,\n            type:type,\n            origin:key\n        })\n    }\n}\n\nexport function OnInit(target:any,key:string,descriptor:PropertyDescriptor){\n    initFuncs.push(key)\n}\nexport function OnMount(target:any,key:string,descriptor:PropertyDescriptor){\n    mountFuncs.push(key)\n}\nexport function OnDestroy(target:any,key:string,descriptor:PropertyDescriptor){\n    destroyFuncs.push(key)\n}\n\n\n\nexport function FetchProperty(){\n    let res={\n        computes:computes,\n        props:props,\n        initFuncs:initFuncs,\n        mountFuncs:mountFuncs,\n        destroyFuncs:destroyFuncs,\n        datas:datas\n    }\n    computes=[]\n    props=[]\n    initFuncs=[];\n    mountFuncs=[];\n    destroyFuncs=[]\n    datas=[]\n    return res\n}","export function Diff<T>(oldset:T[],newset:T[]){\n    let square:SquareUnit[][]=initSquare(oldset,newset);\n    findShortest(square,oldset,newset);\n    let opers=getOpers(square,oldset,newset);\n    return opers;\n}\n\nfunction findShortest<T>(square:SquareUnit[][],oldset:T[],newset:T[]):number{\n    let target=square[oldset.length][newset.length];\n    if(target.value!=-1)\n        return target.value;\n    \n    let lastnum=0;\n    if(oldset[oldset.length-1]==newset[newset.length-1])\n        lastnum=0;\n    else\n        lastnum=1;\n    let p1=findShortest(square,oldset.slice(0,oldset.length-1),newset)+1;\n    let p2=findShortest(square,oldset,newset.slice(0,newset.length-1))+1;\n    let p3=findShortest(square,oldset.slice(0,oldset.length-1),newset.slice(0,newset.length-1))+lastnum;\n\n    let min= Math.min(p1,p2,p3);\n    target.value=min;\n\n    if(min==p1){\n        target.fromRow=oldset.length-1;\n        target.fromColumn=newset.length;\n    }else{\n        if(min==p2){\n            target.fromRow=oldset.length;\n            target.fromColumn=newset.length-1;\n        }\n        else{\n            target.fromRow=oldset.length-1;\n            target.fromColumn=newset.length-1;\n        }\n    }\n\n\n    return target.value;\n}\nfunction initSquare<T>(oldset:T[],newset:T[]){\n    let square:SquareUnit[][]=[];\n    for(let i=0;i<=oldset.length;i++){\n        square.push([]);\n        for(let j=0;j<=newset.length;j++){\n            if(i==0){\n                square[i].push({value:j,fromRow:0,fromColumn:j-1});\n                continue;\n            }\n            if(j==0){\n                square[i].push({value:i,fromRow:i-1,fromColumn:0});\n                continue;\n            }\n            square[i].push({value:-1,fromRow:-1,fromColumn:-1});\n        }\n    }\n    return square;\n}\n\ninterface SquareUnit{\n    value:number,\n    fromRow:number,\n    fromColumn:number\n}\ninterface Oper<T>{\n    type:\"add\"|\"remove\"|\"replace\",\n    newSetIndex?:number,\n    oldSetIndex:number\n}\nfunction getOpers<T>(square:SquareUnit[][],oldset:T[],newset:T[]){\n    let column=newset.length;\n    let row=oldset.length;\n    \n    let opers:Oper<T>[]=[];\n    while(true){\n        if(row==0 && column==0){\n            break;\n        }\n        let unit=square[row][column];\n        if(unit.fromColumn==column-1 && unit.fromRow==row-1){\n            if(oldset[row-1]!=newset[column-1]){\n                opers.push({type:\"replace\",newSetIndex:column-1,oldSetIndex:row-1});\n            }\n            row--;\n            column--;\n            continue;\n        }\n        if(unit.fromColumn==column && unit.fromRow==row-1){\n            opers.push({type:\"remove\",oldSetIndex:row-1});\n            row--;\n            continue;\n        }\n        if(unit.fromColumn==column-1 && unit.fromRow==row){\n            opers.push({type:\"add\",newSetIndex:column-1,oldSetIndex:row-1});\n            column--;\n            continue;\n        }\n        \n    }\n    return opers;\n}\n\n","import { ParseStyle } from '../util';\nimport { VNode } from '../vnode/vnode';\nexport function Classes(exp:string,vnode:VNode){\n\n    let reg=/^\\{([^:,]+:[^:,]+)(,[^:,]+:[^:,]+)*\\}$/;\n    if(!reg.test(exp)){\n        throw new Error(\"exp format error:\"+exp);\n    }\n    let classJson=ParseStyle(exp);\n    for(let key in classJson){            \n        let watcher=vnode.mvvm.$CreateWatcher(vnode,classJson[key],(newvalue)=>{\n            if(newvalue){\n                (vnode.DomSet[0].dom as HTMLElement).classList.add(key);\n            }else{\n                (vnode.DomSet[0].dom as HTMLElement).classList.remove(key);\n            }\n        });\n        let value=watcher.GetCurValue();\n        if(value){\n            (vnode.DomSet[0].dom as HTMLElement).classList.add(key);\n        }\n    }\n}","import { REG_EVENT, REG_STR } from \"../const\";\nimport { VNode } from '../vnode/vnode';\nexport function OnEvent(exp:string,vnode:VNode,options:string[]){\n    if(options==null || options.length==0)\n        throw new Error(\"r-on need specify event name\");\n    if (REG_EVENT.test(exp)) {\n        let methodStr = RegExp.$1\n        let paramsStr = RegExp.$2\n        if (paramsStr.length > 0) {\n            let ps = paramsStr.split(\",\")\n            vnode.DomSet[0].dom.addEventListener(options[0], (event) => {\n                let params: any[] = []\n                ps.forEach(p => {\n                    if (!REG_STR.test(p)) {\n                        if (p === \"true\") {\n                            params.push(true)\n                            return\n                        }\n                        if (p === \"false\") {\n                            params.push(false);\n                            return;\n                        }\n                        if(p==\"$event\"){\n                            params.push(event);\n                            return;\n                        }\n                        let n = new Number(p).valueOf()\n                        if (!isNaN(n)) {\n                            params.push(n.valueOf())\n                        } else {\n                            //肯定是本地变量\n                            params.push(vnode.mvvm.$GetExpOrFunValue(p))\n                        }\n                    } else {\n                        params.push(RegExp.$2)\n                    }\n                })\n                vnode.mvvm.$RevokeMethod(methodStr, ...params)\n            })\n        }else{\n            vnode.DomSet[0].dom.addEventListener(options[0], () => {\n                vnode.mvvm.$RevokeMethod(methodStr)  \n            })\n        }\n    }\n}","import { PRE } from \"../const\";\nimport { StrToEvalstr } from \"../util\";\nimport { VNode } from \"../vnode/vnode\";\n\nexport function Href(exp:string,vnode:VNode){\n    let href:string=\"\";\n    let streval=StrToEvalstr(exp);\n    let dom=vnode.DomSet[0].dom as HTMLElement;\n    if(streval.isconst){\n        href=streval.exp;\n        setAttr(dom,href);\n    }\n    else{                \n        let watcher=vnode.mvvm.$CreateWatcher(vnode,streval.exp,newvalue=>{\n            href=newvalue;\n            setAttr(dom,href);\n        });\n        href=watcher.GetCurValue();\n        setAttr(dom,href);\n    }\n        \n    dom.addEventListener(\"click\",(event:Event)=>{\n        if(dom.nodeName=='A'){\n            event.preventDefault();\n        }\n        vnode.mvvm.$NavigateTo(href);\n    });\n}\nfunction setAttr(dom:HTMLElement,value:string){\n    if(dom.nodeName==\"A\")\n        dom.setAttribute(\"href\",value);\n    else\n        dom.setAttribute(PRE+\"href\",value);\n}\n","import { StrToEvalstr } from \"../util\";\nimport { VNode } from '../vnode/vnode';\n\nexport function Html(exp:string,vnode:VNode){\n    let strEval=StrToEvalstr(exp);\n    if(strEval.isconst)\n        (vnode.DomSet[0].dom as HTMLElement).innerHTML=strEval.exp;\n    else{\n        let watcher=vnode.mvvm.$CreateWatcher(vnode,strEval.exp,newvalue=>{\n            (vnode.DomSet[0].dom as HTMLElement).innerHTML=newvalue\n        });\n        (vnode.DomSet[0].dom as HTMLElement).innerHTML=watcher.GetCurValue();\n    }\n}","import { PRE } from '../const';\nimport { VNode } from '../vnode/vnode';\nimport { Classes } from \"./class\";\nimport { OnEvent } from './event';\nimport { Href } from './href';\nimport { Html } from \"./html\";\nimport { DirModel } from './model';\nimport { Style } from \"./style\";\n\nlet innerDirs:{[name:string]:InnerDirective}={}\nfunction RegisterInnerDir(name:string,comiple:InnerDirective){\n    if(innerDirs[name]!=null)\n        throw new Error(\"inner directive \"+name+\" already exists\")\n    innerDirs[name]=comiple\n}\n\nexport function GetInnerDir(name:string){\n    return innerDirs[name]\n}\n\nexport interface InnerDirective{\n    (exp:string,vnode:VNode,options?:string[]):void\n}\n\n\nRegisterInnerDir(PRE+\"href\",Href)\nRegisterInnerDir(PRE+\"model\",DirModel)\nRegisterInnerDir(PRE+\"on\",OnEvent)\nRegisterInnerDir(PRE+\"html\",Html)\nRegisterInnerDir(PRE+\"class\",Classes)\nRegisterInnerDir(PRE+\"style\",Style)","import { VNode } from \"../vnode/vnode\";\nimport { Watcher } from './../observer/watcher';\nexport function DirModel(exp: string, vnode: VNode) {\n    let inputtype=vnode.Vdom.GetAttr(\"type\")\n    let input=vnode.Vdom.NodeName.toLowerCase()\n\n    let watcher:Watcher\n    if(input==\"input\" && inputtype==\"checkbox\"){\n        watcher=vnode.mvvm.$CreateWatcher(vnode,exp, (newvalue) => {\n            setValue(vnode, newvalue)\n        },true);\n    }else{\n        watcher=vnode.mvvm.$CreateWatcher(vnode,exp, (newvalue) => {\n            setValue(vnode, newvalue)\n        });\n    }\n    setValue(vnode, watcher.GetCurValue());\n\n    vnode.DomSet[0].dom.addEventListener(\"input\", (event: any) => {\n        //select控件\n        if (vnode.GetNodeName() == \"select\") {\n            vnode.mvvm.$SetValue(exp, event.target.value)\n            return\n        }\n        //text radio checkbox控件\n        let inputType = (vnode.DomSet[0].dom as HTMLElement).getAttribute(\"type\")\n        if (inputType == null || inputType == \"\")\n            inputType = \"text\"\n        switch (inputType) {\n            case \"text\":\n            case \"radio\":\n                vnode.mvvm.$SetValue(exp, event.target.value)\n                break\n            case \"checkbox\":\n                let cur = watcher.GetCurValue();\n                if (toString.call(cur) == \"[object Array]\") {\n                    let oldarray = cur as Array<any>;\n                    let index = oldarray.indexOf(event.target.value)\n                    if (index == -1) {\n                        oldarray.push(event.target.value)\n                    } else {\n                        oldarray.splice(index, 1)\n                    }\n                }\n                break\n        }\n    })\n}\n\nfunction setValue(vnode: VNode, newvalue: any) {\n    let dom=vnode.DomSet[0].dom;\n    //select控件\n    if (vnode.GetNodeName()== \"select\") {\n        (dom as HTMLSelectElement).value = newvalue;\n        return\n    }\n    //text radio checkbox控件\n    let inputType = (dom as HTMLElement).getAttribute(\"type\")\n    if (inputType == null || inputType == \"\")\n        inputType = \"text\"\n    switch (inputType) {\n        case \"text\":\n            (dom as HTMLInputElement).value = newvalue\n            break\n        case \"radio\":\n            if ((dom as HTMLInputElement).value == newvalue) {\n                (dom as HTMLInputElement).checked = true\n            } else\n                (dom as HTMLInputElement).checked = false;\n            break\n        case \"checkbox\":\n            if (toString.call(newvalue) == \"[object Array]\") {\n                if (newvalue.indexOf((dom as HTMLInputElement).value) == -1) {\n                    (dom as HTMLInputElement).checked = false\n                } else\n                    (dom as HTMLInputElement).checked = true;\n            }\n\n            break\n    }\n}","import { ParseStyle } from '../util';\nimport { VNode } from '../vnode/vnode';\nexport function Style(exp:string,vnode:VNode){\n    let reg=/^\\{([^:,]+:[^:\\?,]+\\?[^:,]+:[^:,]+)(,[^:,]+:[^:\\?,]+\\?[^:,]+:[^:,]+)*\\}$/;\n    if(!reg.test(exp)){\n        throw new Error(\"exp format error:\"+exp);\n    }\n    let styleJson=ParseStyle(exp);\n    for(let key in styleJson){\n        let watcher=vnode.mvvm.$CreateWatcher(vnode,styleJson[key],(newvalue)=>{\n            if(toString.call(newvalue)==\"[object String]\" && newvalue!=\"\"){\n                ((vnode.DomSet[0].dom as HTMLElement).style as any)[key]=newvalue;\n            }else{\n                ((vnode.DomSet[0].dom as HTMLElement).style as any)[key]=\"\";\n            }\n        });\n        let value=watcher.GetCurValue();\n        if(toString.call(value)==\"[object String]\" && value!=\"\"){\n            ((vnode.DomSet[0].dom as HTMLElement).style as any)[key]=value;\n        }\n    }\n}\n","var EvalExp=function(context,exp,attachObj){\n    var res;\n    var newcontext=context\n    if(attachObj!=null){\n        newcontext=Object.assign(context,$attachObj)\n    }\n    try {\n        with(newcontext){\n            res=eval(exp)\n        }\n        return res\n    } catch (error) {\n        console.error(\"eval \"+exp+\" failed\")\n        console.error(error)\n    }\n    return \"\" \n}\n\nexports.EvalExp=EvalExp\n","import { Start } from \"./manager/start\";\n\n\nexport {Component} from \"./decorator/component\";\nexport {App} from \"./decorator/app\";\nexport {Reactive,Computed,Prop,OnInit,OnDestroy,OnMount} from \"./decorator/property\";\nexport {Directive} from \"./decorator/directive\"\n\nexport {ComponentMvvm} from \"./mvvm/component-mvvm\"\nexport {AppMvvm} from \"./mvvm/app-mvvm\"\nexport {DirectiveMVVM} from \"./mvvm/directive-mvvm\"\n\nexport {RegisterRouter} from \"./router/router-manager\"\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    Start()\n})\n\n\n","import { IAppMvvm } from './../models';\n\nlet apps:IAppMvvm[]=[]\n\nexport function RegisterApp(app:IAppMvvm){\n    apps.push(app)\n}\nexport function GetApp(){\n    return apps\n}","import { IComponentMvvm } from './../models';\nimport { ComponentOption, ComponentMvvmFactoryOption } from '../models';\nimport { HttpGet, LogError } from \"../util\";\nimport { TraverseDom } from \"../vdom/vdom\";\nimport { VDom } from './../vdom/vdom';\n\n\nlet repository:{[id:string]:ComponentMvvmFactoryOption}={}\n\nlet id=0;\nexport function ComponentAutoId(){\n    let count=id++;\n    let str=\"\";\n    while(count>0){\n        str+=\"_\";\n        count--;\n    }\n    return str;\n}\n\nexport function Id(namespace:string,name:string){\n    return namespace+\"::\"+name;\n}\n\nexport function RegisterComponent(name:string,namespace:string,constructor:IComponentMvvm,option:ComponentOption) {\n    let factoryOption:ComponentMvvmFactoryOption={\n        $constructor:constructor,\n        $id:Id(namespace,name),\n        $preProcess:false,\n        $domtree:null,\n        $origin:option\n    }\n    if(repository[factoryOption.$id]!=null)\n        throw new Error(\"component \"+factoryOption.$id+\" already exists\")\n    repository[factoryOption.$id]=factoryOption\n}\nexport function RegisterComponentDirect(option:ComponentMvvmFactoryOption){\n    if(repository[option.$id]!=null)\n        throw new Error(\"component \" + option.$id + \" has already exist\")\n    repository[option.$id]=option\n}\n\nexport function InitComponent(name: string, namespace: string): IComponentMvvm {\n    name = name.toLowerCase()\n    namespace = namespace.toLowerCase()\n    let factory = repository[Id(namespace,name)]\n    if (factory && !factory.$preProcess){\n        preProcess(factory)\n        factory.$preProcess=true\n    }\n    if(factory){\n        return factory.$constructor\n    }else{\n        throw new Error(\"component \"+Id(namespace,name)+\" not exists\")\n    }\n    \n}\nexport function GetDomTree(name: string, namespace: string){\n    name = name.toLowerCase()\n    namespace = namespace.toLowerCase()\n    let factory = repository[Id(namespace,name)]\n    if(factory==null)\n        return null\n    return factory.$domtree\n}\nexport function IsComponentRegistered(name: string, namespace: string) {\n    name = name.toLowerCase()\n    namespace = namespace.toLowerCase()\n    if (repository[Id(namespace,name)])\n        return true\n    else\n        return false\n}\nfunction preProcess(option: ComponentMvvmFactoryOption) {\n    //模版\n    if (option.$origin.templateUrl != null) {\n        option.$origin.template = HttpGet(option.$origin.templateUrl)\n        if (option.$origin.template == null) {\n            LogError(\"path \" + option.$origin.templateUrl + \" not found\")\n            return\n        }\n    }\n\n    let res=(new DOMParser()).parseFromString(option.$origin.template, \"text/html\").body\n    if(res.children.length>1)\n        throw new Error(option.$origin.name+\"::\"+option.$origin.namespace+\" template should have only one root\")\n    if(res.children.length==1)\n        option.$domtree = TraverseDom(res.children[0])\n    else{\n        if(res.childNodes.length==1)\n            option.$domtree = TraverseDom(res.childNodes[0])\n        else\n            throw new Error(\"template should not be empty\")\n    }\n    //样式\n    if (option.$origin.styleUrl != null) {\n        option.$origin.style = HttpGet(option.$origin.styleUrl)\n    }\n    if (option.$origin.style != null) {\n        // let css = option.style.replace(/(?!\\s)([^\\{\\}]+?)(?=\\s*\\{[^\\{\\}]*\\})/g, function (str) {\n        //     return str + \"[\" + option.$id + \"]\"\n        // })\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        style.innerHTML = option.$origin.style;\n        document.getElementsByTagName('head')[0].appendChild(style);\n        addAttr(option.$domtree, option.$id)\n    }\n}\nfunction addAttr(dom: VDom, attr: string) {\n    dom.AddAttr(attr)\n    if (dom.NodeType == 1) {\n        dom.Children.forEach(child => {\n            addAttr(child, attr)\n        })\n    }\n}\n","import { IDirectiveConstructor } from \"../models\";\nimport { Id } from \"./components-manager\";\n\nlet repository:{[id:string]:IDirectiveConstructor}={}\n\nexport function RegisterDirective(name:string,namespace:string,constructor:IDirectiveConstructor){\n    if(repository[Id(namespace,name)]!=null)\n        throw new Error(\"directive \"+Id(namespace,name)+\" already exists\")\n    repository[Id(namespace,name)]=constructor\n}\nexport function GetDirectiveCon(name:string,namespace:string):IDirectiveConstructor{\n    name=name.toLowerCase()\n    namespace=namespace.toLowerCase()\n    let constructor=repository[Id(namespace,name)]\n    return constructor\n}\nexport function IsDirectiveRegistered(name:string,namespace:string){\n    name=name.toLowerCase()\n    namespace=namespace.toLowerCase()\n    if(repository[Id(namespace,name)]!=null)\n        return true\n    else\n        return false\n}\n","import { AppMvvm } from './../mvvm/app-mvvm';\nimport { GetApp } from \"./app-manager\";\nimport {StartMatchUrl} from \"../router/router-manager\"\nlet apps:AppMvvm[]=[]\nexport function Start() {\n    let appscons=GetApp()\n    appscons.forEach(App=>{\n        StartMatchUrl()\n        let mvvm=new App()\n        mvvm.$initialize()\n        mvvm.$AttachChildren()\n        mvvm.$SetRoot(true)\n        apps.push(mvvm)\n        let content = mvvm.$Render()\n        let target=document.querySelector(mvvm.$InitEl())\n        \n        let rootdom=content.dom as HTMLElement;\n        if(rootdom.style.display==\"none\"){\n            rootdom.style.display=\"\";\n        }\n\n        target.parentElement.replaceChild(content.dom, target)\n    })\n    \n}\nexport function RefreshApp(){\n    apps.forEach(app=>app.$Refresh())\n}","import { DomType } from './const';\nimport { AppMvvm } from './mvvm/app-mvvm';\nimport { ComponentMvvm } from './mvvm/component-mvvm';\nimport { DirectiveMVVM } from './mvvm/directive-mvvm';\nimport { VDom } from './vdom/vdom';\n\ninterface BaseOption{\n    namespace?:string,\n}\nexport interface ComponentOption extends BaseOption{\n    events?:Event[],\n    name?:string,\n    template?:string,\n    templateUrl?:string,\n    style?:string,\n    styleUrl?:string\n    \n}\nexport interface AppOption extends BaseOption{\n    el:string\n}\nexport interface DirectiveOption extends BaseOption{\n    name:string\n    events?:string[]\n}\n\nexport type ParamType=\"array\"|\"object\"|\"number\"|\"string\"|\"boolean\"\nexport interface Prop{\n    name:string\n    origin:string\n    required:boolean\n    type?:ParamType\n}\nexport interface Event{\n    name:string,\n    paramsType:ParamType[]\n}\nexport interface OnDataChange {\n    (newvalue:any,oldvalue:any):void\n}\n/**for语句 */\nexport class ForExp{\n    constructor(public itemExp:string,public arrayExp:string){}\n}\n\n\n\nexport interface IComponentMvvm{\n    new ():ComponentMvvm\n}\n\nexport interface IAppMvvm{\n    new ():AppMvvm\n}\nexport interface IDirectiveConstructor{\n    new ():DirectiveMVVM\n}\nexport interface ComponentMvvmFactoryOption {\n    $constructor:IComponentMvvm\n    $preProcess:boolean\n    $id:string,\n    $domtree:VDom,\n    $origin:ComponentOption\n}\nexport interface RouterInfo{\n    path:string,\n    params:{\n        name:string,\n        value:string\n    }[],\n    getParam(name:string):string\n}\n\nexport type RouterChangeCallback=(newrouter:RouterInfo,oldrouter:RouterInfo)=>void\n\nexport interface DomStatus{\n    dom:Node,\n    type:DomType\n}","import { DomStatus } from '../models';\nimport { VNode } from '../vnode/vnode';\nimport { Mvvm } from './mvvm';\nexport class AppMvvm extends Mvvm{\n    protected $el:string=\"\"\n    \n    \n    $Render(): DomStatus {\n        let doms=this.$treeRoot.Render()\n        return doms[0]\n    }\n    \n    $InitNamespace(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitDataItems(): {name:string,value:any}[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitComputeItems(): { name: string; get: () => any }[] {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    $InitTreeroot(): VNode {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitEl():string{\n        throw new Error(\"Method not implemented.\");\n    }\n}","import { DomStatus, Event, Prop } from \"../models\";\nimport { TypeOf } from \"../util\";\nimport { CustomNode } from \"../vnode/custom-node\";\nimport { VNode } from \"../vnode/vnode\";\nimport { VNodeStatus } from './../const';\nimport { Mvvm } from './mvvm';\nexport class ComponentMvvm extends Mvvm{\n    \n\n    private $fenceNode:CustomNode\n    private $name:string=\"\"\n    private $fullname:string=\"\"\n    \n    private $ins:Prop[]=[]\n    private $outs:Event[]=[]\n\n    \n    $initialize(){\n        super.$initialize()\n\n        this.$ins=this.$InitIns()\n        this.$outs=this.$InitOuts()\n        this.$name=this.$InitName();\n        this.$fullname=this.$namespace+\":\"+this.$name;\n\n        this.$ins.forEach(prop=>{\n            let inName=this.$fenceNode.GetIn(prop.name)\n            if(inName==null && prop.required){\n                throw new Error(\"component \\'\"+this.$fullname+\"\\' need prop \\'\"+prop.name+\"'\")\n            }\n            if(inName!=null){\n                if(inName.const){\n                    (this as any)[prop.origin]=inName.value\n                }else{\n                    Object.defineProperty(this,prop.origin,{\n                        get:()=>{\n                            let newvalue=this.$fenceNode.mvvm.$GetExpOrFunValue(inName.value);\n                            this.$checkProp(prop,newvalue);\n                            return newvalue;\n                        }\n                    })\n                }\n            }\n        })\n\n        \n    }\n    \n    private $checkProp(prop:Prop,value:any){\n        let error=(name:string,prop:string,type:string)=>{\n            throw new Error(\"component \\'\"+name+\"\\' prop \\'\"+prop+\"\\' not receive \"+type)\n        }\n        if(prop.type==\"array\" && toString.call(value)!=\"[object Array]\"){\n            error(this.$fullname,prop.name,prop.type)\n        }\n        if(prop.type==\"object\" && toString.call(value)!=\"[object Object]\"){\n            error(this.$fullname,prop.name,prop.type)\n        }\n        if(prop.type==\"number\" && toString.call(value)!=\"[object Number]\"){\n            error(this.$fullname,prop.name,prop.type)\n        }\n        if(prop.type==\"boolean\" && toString.call(value)!=\"[object Boolean]\"){\n            error(this.$fullname,prop.name,prop.type)\n        }\n        if(prop.type==\"string\" && toString.call(value)!=\"[object String]\"){\n            error(this.$fullname,prop.name,prop.type)\n        }\n    }\n\n    $Render():DomStatus{\n        let doms=this.$treeRoot.Render()\n        return doms[0]\n    }\n    \n    $Update(){\n        this.$treeRoot.Update()\n    }\n    $SetStatus(status:VNodeStatus){\n        this.$treeRoot.SetStatus(status)\n    }\n    \n    \n    $Emit(event:string,...data:any[]){\n        if(this.$fenceNode!=null && this.$fenceNode.mvvm!=null){\n            let e=this.$outs.find(out=>{\n                return out.name==event;\n            });\n            if(e==null){\n                throw new Error(\"no specified event \"+event+\" at component \"+this.$fullname)\n            }\n            if(data.length!=e.paramsType.length){\n                throw new Error(\"no specified params \"+event+\" at component \"+this.$fullname)\n            }\n            for(let i=0;i<e.paramsType.length;i++){\n                if(TypeOf(data[i])!=e.paramsType[i]){\n                    throw new Error(\"params expected \"+e.paramsType[i]+\",but received \"+toString.call(data[i])+\" at component \"+this.$fullname)\n                }\n            }\n            let method=this.$fenceNode.GetOut(event)\n            this.$fenceNode.mvvm.$RevokeMethod(method,...data)\n        }\n    };\n    \n    $OnRouterChange(){\n        this.$treeRoot.OnRouterChange()\n    }\n    $GetFenceNode(){\n        return this.$fenceNode\n    }\n    $SetFenceNode(node:CustomNode){\n        this.$fenceNode=node\n    }\n\n    \n    $InitNamespace(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitDataItems(): {name:string,value:any}[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitComputeItems(): { name: string; get: () => any }[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitName():string{\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitIns():Prop[]{\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitOuts():Event[]{\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitTreeroot(): VNode {\n        throw new Error(\"Method not implemented.\");\n    }\n    $GetIns(){\n        return this.$ins\n    }\n}","import { EvalExp } from \"../eval\";\nimport { OnDataChange, Prop } from \"../models\";\nimport { NoticeCallback, RegisterNotice, RevokeNotice } from \"../observer/notice-center\";\nimport { Watcher } from \"../observer/watcher\";\nimport { DirectiveNode } from './../vnode/directive-node';\nimport { VinallaNode } from './../vnode/vinalla-node';\nexport class DirectiveMVVM{\n    \n    $Name:string\n    $element:HTMLElement\n\n    $Ins:Prop[]=[]\n    $Outs:string[]=[]\n\n    $InitFuncs:string[]=[]\n    $MountFuncs:string[]=[]\n    $DestroyFuncs:string[]=[]\n    \n    private $directive:DirectiveNode;\n    private $vnode:VinallaNode;\n\n    $Initialize(directive:DirectiveNode,vnode:VinallaNode){\n        this.$directive=directive;\n        this.$vnode=vnode;\n        this.$InitFuncs.forEach(func=>{\n            (this as any)[func].call(this)\n        });\n    }\n    \n    $OnDestroy(){\n        this.$DestroyFuncs.forEach(destroy=>{\n            (this as any)[destroy].call(this)\n        })\n    }\n    \n    $Render(){\n        this.$Ins.forEach(prop=>{\n            let inName=this.$directive.GetIn(prop.name)\n            if(inName==null && prop.required){\n                throw new Error(\"component \\'\"+this.$Name+\"\\' need prop \\'\"+prop.name+\"'\")\n            }\n            if(inName!=null){\n                if(inName.const){\n                    (this as any)[prop.origin]=inName.value\n                }else{\n                    Object.defineProperty(this,prop.origin,{\n                        get:()=>{\n                            let newvalue=this.$vnode.mvvm.$GetExpOrFunValue(inName.value);\n                            this.$checkProp(prop,newvalue);\n                            return newvalue;\n                        }\n                    })\n                }\n            }\n        })\n        this.$element=(this.$vnode.DomSet[0].dom as HTMLElement)\n        this.$MountFuncs.forEach(func=>{\n            (this as any)[func].call(this)\n        })\n    }\n    private $checkProp(prop:Prop,value:any){\n        let error=(name:string,prop:string,type:string)=>{\n            throw new Error(\"component \\'\"+name+\"\\' prop \\'\"+prop+\"\\' not receive \"+type)\n        }\n        if(prop.type==\"array\" && toString.call(value)!=\"[object Array]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"object\" && toString.call(value)!=\"[object Object]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"number\" && toString.call(value)!=\"[object Number]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"boolean\" && toString.call(value)!=\"[object Boolean]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"string\" && toString.call(value)!=\"[object String]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n    }\n    $Watch(exp:string|Function,listener:OnDataChange,watchingArrayItem:boolean=false){\n        new Watcher(this,this.$vnode,exp,listener,watchingArrayItem)\n    }\n    $GetExpOrFunValue(expOrFunc:string|Function):any{\n        let res:any;\n        if(typeof expOrFunc == \"string\"){\n            res=EvalExp(this,expOrFunc)\n        }\n        if(typeof expOrFunc ==\"function\"){\n            res=expOrFunc.call(this)\n        }\n        return res;\n    }\n    /**注册消息 */\n    $on(notice:string,cb:NoticeCallback){\n        RegisterNotice(notice,this.$vnode,cb);\n    }\n    /**触发消息 */\n    $broadcast(notice:string,...params:any[]){\n        RevokeNotice(notice,...params);\n    }\n    /**动态添加节点 */\n    $AddFragment(html:string,anchor:string){\n        this.$vnode.mvvm.$AddFragment(html,anchor);\n    }\n}","import { NoticeCallback, RegisterNotice, RevokeNotice } from './../observer/notice-center';\nimport { EvalExp } from \"../eval\";\nimport { ReactiveComputed, ReactiveData, ReactiveKey } from \"../observer/observer\";\nimport { Watcher } from \"../observer/watcher\";\nimport { GetActiveRouter, WatchRouterChange } from \"../router/router-state\";\nimport { NewVNode, TraverseDom } from \"../vdom/vdom\";\nimport { VNode } from \"../vnode/vnode\";\nimport { DomStatus, OnDataChange, RouterInfo } from './../models';\nimport { VinallaNode } from './../vnode/vinalla-node';\nimport { NotifyUrlChange } from '../router/router-manager';\nexport abstract class Mvvm {\n    public $namespace=\"default\"\n\n    protected $treeRoot:VNode\n    \n    protected $dataItems:{name:string,value:any}[]=[]\n    protected $computeItems:{name:string,get:()=>any}[]=[]\n    private $isroot=false\n\n    protected get $router(){\n        return GetActiveRouter()\n    }\n\n    constructor(){\n    }\n    $initialize(){\n        this.$dataItems=this.$InitDataItems()\n        this.$computeItems=this.$InitComputeItems()\n        this.$treeRoot=this.$InitTreeroot()\n        this.$namespace=this.$InitNamespace()\n\n        this.$dataItems.forEach(item=>{\n            ReactiveKey(this,item.name);\n            ReactiveData(item.value);\n        })\n\n        this.$computeItems.forEach(item=>{\n            ReactiveComputed(this,this.$treeRoot,item.name,item.get)\n        })\n\n    }\n    $AttachChildren(){\n        this.$treeRoot.AttachChildren()\n    }\n    \n    $GetExpOrFunValue(expOrFunc:string|Function):any{\n        let res:any;\n        if(typeof expOrFunc == \"string\"){\n            res=EvalExp(this,expOrFunc)\n        }\n        if(typeof expOrFunc ==\"function\"){\n            res=expOrFunc.call(this)\n        }\n        return res;\n    }\n    $ExtendMvvm():Mvvm{return this;}\n    \n    $SetValue(exp:string,value:any){\n        let keys=exp.split(\".\");\n        let target:any=this;\n        let hasTraget=true;\n        for(let i=0;i<keys.length-1;i++){\n            if(target!=null)\n                target=target[keys[i]]\n            else{\n                hasTraget=false\n                break\n            }\n        }\n        if(hasTraget && target!=null)\n            target[keys[keys.length-1]]=value\n    }\n    $CreateWatcher(vnode:VNode,exp:string|Function,listener:OnDataChange,watchingArrayItem?:boolean):Watcher{\n        return new Watcher(this,vnode,exp,listener,watchingArrayItem)\n    }\n    $Watch(exp:string|Function,listener:OnDataChange,watchingArrayItem:boolean=false){\n        this.$CreateWatcher(this.$treeRoot,exp,listener,watchingArrayItem)\n    }\n    \n    $OnDestroy(){\n        this.$treeRoot.OnDestroy()\n    }\n    $SetRoot(isroot:boolean){\n        this.$isroot=isroot\n    }\n    $IsRoot(){\n        return this.$isroot\n    }\n    $GetDataItems(){\n        return this.$dataItems\n    }\n    $GetComputedItems(){\n        return this.$computeItems\n    }\n    $Refresh(){\n        this.$treeRoot.Refresh()\n    }\n    $RevokeMethod(method:string,...params:any[]){\n        if(typeof (this as any)[method]==\"function\")\n            (this as any)[method].apply(this,params)\n        else\n            throw new Error(method +\" is not a function\")\n    }\n    /**动态的增加响应式数据 */\n    $AddReactiveData(name:string,value:any){\n        (this as any)[name]=value;\n        ReactiveKey(this,name);\n        ReactiveData(value);\n    }\n    private getAnchorNode(name:string):VinallaNode{\n        return this.$treeRoot.GetAnchor(name);\n    }\n    GetRef(ref:string){\n        let vnode= this.$treeRoot.GetAnchor(ref);\n        if(vnode!=null && vnode.DomSet.length>0)\n            return vnode.DomSet[0].dom;\n        else\n            return null;\n    }\n    /**动态添加节点 */\n    $AddFragment(html:string,anchor:string){\n        let res=(new DOMParser()).parseFromString(html, \"text/html\").body;\n        let anchorNode=this.getAnchorNode(anchor);\n        if(anchorNode){\n            for(let i=0;i<res.childNodes.length;i++){\n                let domtree=TraverseDom(res.childNodes[i]);\n                let vnode=NewVNode(domtree,this,anchorNode);\n                vnode.AttachChildren();\n                anchorNode.Children.push(vnode);\n                vnode.Render();\n            }\n            anchorNode.Refresh();\n        }else{\n            throw new Error('anchor node '+anchor+\" not exist\");\n        }\n        \n    }\n    /**注册消息 */\n    protected $on(notice:string,cb:NoticeCallback){\n        RegisterNotice(notice,this.$treeRoot,cb);\n    }\n    /**触发消息 */\n    protected $broadcast(notice:string,...params:any[]){\n        RevokeNotice(notice,...params);\n    }\n    /**监视路由变化 */\n    protected $onRouterChange(callbck:(newrouter:RouterInfo,oldrouter:RouterInfo)=>void){\n        WatchRouterChange(this.$treeRoot,callbck);\n    }\n    $NavigateTo(url:string){\n        window.history.replaceState(null,null,url)\n        NotifyUrlChange()\n    }\n\n    abstract $InitDataItems():{name:string,value:any}[];\n    abstract $InitComputeItems():{name:string,get:(()=>any)}[];\n    abstract $InitNamespace():string;\n\n    abstract $Render():DomStatus;\n    \n    abstract $InitTreeroot():VNode;\n\n    \n}","import { Watcher } from './watcher';\nimport {RefreshApp} from \"../manager/start\"\n\nlet queue:Watcher[]=[]\nlet settimeout=false\nexport function AddWatcher(watcher:Watcher){\n    if(queue.indexOf(watcher)==-1)\n        queue.push(watcher)\n    if(!settimeout){\n        settimeout=true\n        \n        setTimeout(() => {\n            RevokeWatcher()\n            settimeout=false            \n        }, 0);\n    }\n}\nexport function RevokeWatcher(){\n    let temp:Watcher[]=[]\n    queue.forEach(q=>temp.push(q))\n    queue=[]\n    temp.forEach(watcher=>watcher.Update())\n    if(queue.length>0){\n        RevokeWatcher()\n    }else{\n        RefreshApp()\n    }\n}","import { VNode } from \"../vnode/vnode\";\nimport { VNodeStatus } from \"../const\";\n\nexport type NoticeCallback=(...params:any[])=>void;\nlet notices:{[notice:string]:{vnode:VNode,cb:NoticeCallback}[]}={};\n\nexport function RegisterNotice(notice:string,vnode:VNode,cb:NoticeCallback){\n    if(notices[notice]==null)\n        notices[notice]=[];\n    notices[notice].push({vnode:vnode,cb:cb});\n\n}\nexport function RevokeNotice(notice:string,...params:any[]){\n    if(notices[notice]!=null){\n        notices[notice]=notices[notice].filter(item=>{\n            return item.vnode.GetStatus()!=VNodeStatus.DEPRECATED;\n        });\n        notices[notice].forEach(item=>{\n            if(item.vnode.GetStatus()==VNodeStatus.ACTIVE){\n                item.cb(...params);\n            }\n        });\n    }\n}","import { VNode } from '../vnode/vnode';\nimport { Watcher } from \"./watcher\";\nimport { Mvvm } from '../mvvm/mvvm';\nimport { WatcherCollecter } from './watcher-collect';\n\nlet $target:Watcher\n\nexport function SetTarget(target:Watcher){\n    $target=target\n}\nexport function CleanTarget(){\n    $target=null\n}\n    \nexport function ReactiveData(data:any){\n    if(toString.call(data)==\"[object Array]\"){\n        \n        for(let value of data){\n            ReactiveData(value);\n        }\n        return;\n    }\n    if(toString.call(data)==\"[object Object]\"){\n        Object.keys(data).forEach(key=>{\n            ReactiveKey(data,key)\n            ReactiveData(data[key])\n        });\n        return;\n    }\n    \n}\nexport function ReactiveKey(data:any,key:string){\n    let collecter=new WatcherCollecter(key)        \n    let value = data[key]\n    if(toString.call(value)==\"[object Array]\"){\n        reactiveArray(value,collecter)\n    }\n    Object.defineProperty(data, key, {\n        get: ()=> {\n            if($target!=null){\n                collecter.AddTarget($target)\n            }\n            return value\n        },\n        set: (newval)=>{\n            if (newval != value) {\n                value=newval\n                if(toString.call(value)==\"[object Array]\"){\n                    reactiveArray(value,collecter)\n                }\n                ReactiveData(newval)                    \n                collecter.Notify()\n            }\n        },\n        enumerable:true,\n        configurable:true\n    })\n}\n    \nfunction reactiveArray(array:any[],collecter:WatcherCollecter){\n    \n    Object.defineProperty(array,\"push\",{\n        enumerable:false,\n        configurable:true,\n        value:(...params:any[])=>{\n            let res=Array.prototype.push.call(array,...params);\n            collecter.Notify();\n            return res;\n        }\n    })\n    Object.defineProperty(array,\"pop\",{\n        enumerable:false,\n        configurable:true,\n        value:(...params:any[])=>{\n            let res=Array.prototype.pop.call(array,...params);\n            collecter.Notify();\n            return res;\n        }\n    })\n    Object.defineProperty(array,\"splice\",{\n        enumerable:false,\n        configurable:true,\n        value:(...params:any[])=>{\n            let res=Array.prototype.splice.call(array,...params);\n            collecter.Notify();\n            return res\n        }\n    })\n    Object.defineProperty(array,\"shift\",{\n        enumerable:false,\n        configurable:true,\n        value:(...params:any[])=>{\n            let res=Array.prototype.shift.call(array,...params)\n            collecter.Notify()                \n            return res\n        }\n    });\n    Object.defineProperty(array,\"sort\",{\n        enumerable:false,\n        configurable:true,\n        value:(...params:any[])=>{\n            let res=Array.prototype.sort.call(array,...params)\n            collecter.Notify()                \n            return res\n        }\n    });\n}\n    \nexport function ReactiveComputed(mvvm:Mvvm,vnode:VNode,key:string,func:()=>any){\n    let collecter=new WatcherCollecter(key)\n    let firstget=true\n    let value:any\n    \n    Object.defineProperty(mvvm, key, {\n        get: ()=> {\n            if($target!=null){\n                collecter.AddTarget($target)\n            }\n            if(firstget){\n                let old=$target\n                $target=null\n                let watcher=new Watcher(mvvm,vnode,func,(newval)=>{\n                    value=newval\n                    collecter.Notify()\n                })\n                value=watcher.GetCurValue();\n                $target=old\n                firstget=false\n            }\n            return value\n        },\n        enumerable:true,\n        configurable:true\n    })\n}\n\n","import { Watcher } from \"./watcher\";\nimport { AddWatcher } from \"./msg-queue\";\nimport { VNodeStatus } from \"../const\";\n\nexport class WatcherCollecter{\n    private watches:Watcher[]=[]\n    constructor(private key:string){\n    }\n    GetKey(){\n        return this.key\n    }\n    AddTarget(watcher:Watcher){\n        if(this.watches.indexOf(watcher)==-1)\n            this.watches.push(watcher)\n    }\n    \n    Notify(){\n        this.watches=this.watches.filter(watcher=>{\n            if(watcher.GetVNode().GetStatus()==VNodeStatus.ACTIVE ){\n                AddWatcher(watcher)\n                return true\n            }\n            if(watcher.GetVNode().GetStatus()==VNodeStatus.INACTIVE )\n                return true\n            if(watcher.GetVNode().GetStatus()==VNodeStatus.DEPRECATED )\n                return false\n        })\n    }\n}","import { DirectiveMVVM } from './../mvvm/directive-mvvm';\nimport { VNodeStatus } from '../const';\nimport { Mvvm } from '../mvvm/mvvm';\nimport { OnDataChange } from './../models';\nimport { VNode } from './../vnode/vnode';\nimport { CleanTarget, SetTarget } from './observer';\n\n\nexport class Watcher{\n    private value:any\n    private oldArray:any[]=[]\n\n    constructor(private mvvm:Mvvm|DirectiveMVVM,private vnode:VNode,public ExpOrFunc:string|Function,private cb:OnDataChange,private watchingArrayItem?:boolean){\n        this.value=this.getValue()\n        if(this.watchingArrayItem && toString.call(this.value)==\"[object Array]\"){\n            for(let i=0;i<this.value.length;i++){\n                this.oldArray[i]=this.value[i]\n            }\n        }\n    }\n    private getValue(){\n        SetTarget(this)\n        let res=this.mvvm.$GetExpOrFunValue(this.ExpOrFunc)        \n        CleanTarget()\n        return res\n    }\n    /**用于返回当前缓存的值，主要针对computed */\n    GetCurValue(){\n        return this.value;\n    }\n    GetVNode(){\n        return this.vnode\n    }\n    Update(){\n        if(this.vnode.GetStatus()==VNodeStatus.ACTIVE){\n            let newval=this.getValue()\n            if(this.value!=newval){\n                this.cb(newval,this.value);\n                this.value=newval;\n                if(this.watchingArrayItem && toString.call(this.value)==\"[object Array]\" ){\n                    this.oldArray=[];\n                    for(let i=0;i<newval.length;i++){\n                        this.oldArray[i]=newval[i];\n                    }\n                }\n            }else{\n                //判断数组元素是否有变化\n                if(this.watchingArrayItem && toString.call(this.value)==\"[object Array]\" ){\n                    let diff=false;\n                    if(newval.length!=this.oldArray.length){\n                        diff=true;\n                        this.cb(newval,this.oldArray);\n                    }else{\n                        for(let i=0;i<newval.length;i++){\n                            if(newval[i]!=this.oldArray[i]){\n                                this.cb(newval,this.oldArray);\n                                diff=true\n                                break\n                            }\n                        }\n                    }\n                    \n                    if(diff){\n                        this.oldArray=[]\n                        for(let i=0;i<newval.length;i++){\n                            this.oldArray[i]=newval[i]\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n","import { IComponentMvvm } from './../models';\nimport { VNode } from '../vnode/vnode';\nimport { SetActiveRouter } from './router-state';\nimport { RefreshApp } from '../manager/start';\nimport { LogError, Trim } from '../util';\n\n\nlet matchedRouter:InnerRouter[]=[]\n\nlet appRouters:InnerRouter[]=[]\nlet cursor:number=0;\nlet firstVNode:VNode=null\n\n/*注册路由*/\nexport function RegisterRouter(routers:Router[]){\n    //将Router转换成InnerRouter\n    checkRouter(routers)\n    \n    routers.forEach(router=>{\n        appRouters.push(copyRouter(null,router))\n    })\n}\n/**输入合法性检查*/\nfunction checkRouter(routers:Router[]){\n    routers.forEach(router=>{\n        router.children=router.children?router.children:[]\n        \n        if(router.url!=null)\n            router.url=Trim(router.url.trim(),\"/\",\"right\");\n        if(router.redirect==null && (router.url==null || router.url==\"\")){\n            throw new Error(\"must specify url in router\")\n        }\n        router.params=router.params?router.params:[];\n        if(router.redirect==null){\n            if(router.url.indexOf(\"/\")!=0)\n                router.url= \"/\"+router.url;\n        }\n        checkRouter(router.children)\n    });\n}\n/**将Router转换成InnerRouter */\nfunction copyRouter(parent:InnerRouter,router:Router):InnerRouter{\n    let r:InnerRouter= {\n        url:router.url,\n        component:router.component,\n        components:router.components,\n        children:[],\n        parent:parent,\n        fullUrl:\"\",\n        params:router.params,\n        redirect:router.redirect\n    }\n    if(parent!=null){\n        if(router.redirect!=null)\n            r.redirect=parent.fullUrl+router.redirect;  \n        else  \n            r.fullUrl=parent.fullUrl+router.url;\n    }else{\n        r.fullUrl=router.url;\n    }\n    for(let i=0;i<router.children.length;i++){\n        r.children.push(copyRouter(r,router.children[i]))\n    }\n    return r\n}\n/**\n * matchtype 0 完全匹配  1 matchedRouter是当前location的前缀  2 不匹配\n */\nfunction matchRouter(matchedRouter:InnerRouter):{matchtype:number,params:{name:string,value:string}[]}{\n    let vinallaUrl=location.pathname\n    vinallaUrl=Trim(vinallaUrl,\"/\",\"right\");\n    let vinallaSlice=vinallaUrl.split(\"/\");\n    let matchedSlice=matchedRouter.fullUrl.split(\"/\");\n    let params:{name:string,value:string}[]=[];\n    for(var j=0;j<matchedSlice.length;j++){\n        if(vinallaSlice.length-1<j){\n            return {matchtype:2,params:[]};\n        }\n        if(/^\\:(\\w+)$/.test(matchedSlice[j]) ){\n            let name=RegExp.$1\n            params.push({name:name,value:vinallaSlice[j]})\n            continue;\n        }\n        if(matchedSlice[j]==vinallaSlice[j]){\n            continue;\n        }\n        return {matchtype:2,params:[]};\n    }\n    \n    let requireParams=matchedRouter.params;\n    let searchParams=getSearchParams();\n    params=params.concat(searchParams);\n    requireParams.forEach(rp=>{\n        let exist=params.find(p=>p.name==rp.name);\n        if(exist==null && rp.required){\n            throw new Error(\"router match failed,no matched params:\"+rp.name);\n        }\n    })\n    if(j==vinallaSlice.length){\n        return {matchtype:0,params:params};\n    }else{\n        return {matchtype:1,params:params};\n    }\n}\nfunction getSearchParams():{name:string,value:string}[]{\n    let searchSlice=location.search.split(\"?\")\n    let res:{name:string,value:string}[]=[]\n    if(searchSlice.length==2){\n        let params=searchSlice[1].split(\"&\")\n        params.forEach(p=>{\n            let name_value=p.split(\"=\")\n            if(name_value.length==2){\n                res.push({name:name_value[0],value:name_value[1]})\n            }\n        })\n    }\n    return res\n}\n\n\nlet matchcounter=0;\nexport function StartMatchUrl(routers?:InnerRouter[]):boolean{\n    if(matchcounter>10){\n        throw new Error(\"circular router match\");\n    }\n    if(routers==null){\n        routers=appRouters;\n    }\n    if(routers==appRouters){\n        matchcounter++;\n        matchedRouter=[];\n    }\n        \n    for(let i=0;i<routers.length;i++){\n        let router=routers[i];\n        if(router.redirect!=null){\n            SetActiveRouter(location.pathname,[]);\n            window.history.replaceState(null,\"\",router.redirect);\n            StartMatchUrl(appRouters);\n            return true;\n        }\n        let res=matchRouter(router);\n        if(res.matchtype==2){\n            continue;\n        }\n        if(res.matchtype==1){\n            if(router.component!=null || router.components!=null)\n                matchedRouter.push(router);\n            let find=StartMatchUrl(router.children);\n            if(find){\n                return true;\n            }\n            continue;\n        }\n        if(res.matchtype==0){\n            SetActiveRouter(location.pathname,res.params);\n            if(router.component!=null || router.components!=null)\n                matchedRouter.push(router);\n            return true;\n        }\n    }\n    return false;\n}\nexport function NextRouter(vnode:VNode,name?:string):IComponentMvvm{\n    if(appRouters==null){\n        throw new Error(\"no router specified\")\n    }\n    if(cursor==0){\n        firstVNode=vnode\n    }\n    if(cursor<matchedRouter.length){\n        let component=name?matchedRouter[cursor].components[name]:matchedRouter[cursor].component;\n        if(component==null){\n            throw new Error(\"component in router be null?\");\n        }\n        cursor++\n        return component\n    }else{\n        LogError(\"router match wrong\")\n        return null;\n    }\n    \n}\nexport function MoveBack(){\n    cursor--\n}\n\nexport interface Router{\n    url?:string\n    component?: IComponentMvvm\n    components?:{[name:string]:IComponentMvvm}\n    children?:Router[]\n    params?:{name:string,required:boolean}[],\n    redirect?:string\n}\ninterface InnerRouter extends Router{\n    parent:InnerRouter\n    children:InnerRouter[]\n    fullUrl:string\n}\n\nexport function NotifyUrlChange(){\n    matchcounter=0;\n    let matched=StartMatchUrl();\n    if(!matched){\n        throw new Error(\"no matched router\");\n    }\n    firstVNode.OnRouterChange()\n    RefreshApp()\n}\n\n\n","import { RouterInfo, RouterChangeCallback } from './../models';\nimport { VNode } from '../vnode/vnode';\nimport { VNodeStatus } from '../const';\n\nclass _RouterInfo implements RouterInfo{\n    constructor(public path:string,public params:{name:string,value:string}[]){\n\n    }\n    getParam(name:string):string{\n        let p=this.params.find(p=>p.name==name)\n        return p && p.value ||null\n    }\n}\n\nlet active:RouterInfo=new _RouterInfo(\"\",[]);\nlet previous:RouterInfo=null;\n\nlet listeners:{cb:RouterChangeCallback,vnode:VNode}[]=[]\n\nexport function SetActiveRouter(path:string,params:{name:string,value:any}[]){\n    previous=active;\n    active=new _RouterInfo(path,params)\n\n    listeners= listeners.filter(listen=>listen.vnode.GetStatus()!=VNodeStatus.DEPRECATED)\n    listeners.forEach(listen=>{\n        if(listen.vnode.GetStatus()==VNodeStatus.ACTIVE)\n            listen.cb(active,previous)\n    })\n}\nexport function GetActiveRouter(){\n    return {active:active,previous:previous}\n}\nexport function WatchRouterChange(vnode:VNode,listener:RouterChangeCallback){\n    listeners.push({cb:listener,vnode:vnode})\n}\n\n\n","import { REG_SINGLE, REG_MULTI ,REG_STR} from \"./const\";\nimport { ParamType } from \"./models\";\n\nexport function LogError(msg:any){\n    console.error(msg)\n}\nexport function LogInfo(msg:any){\n    console.log(msg)\n}\nexport function GetNS(str:string):{namespace:string,value:string}{\n    let res=str.split(\":\")\n    if(res.length==1)\n        return {namespace:null,value:res[0]}\n    return {namespace:res[0],value:res.slice(1).join(\":\")}\n}\nexport function HttpGet(url:string):string{\n    let xhr=new XMLHttpRequest()\n    xhr.open(\"GET\",url,false)\n    xhr.send()\n    if(xhr.readyState==4 && xhr.status==200)\n        return xhr.responseText\n    else\n        return null\n}\nexport function IsStringEmpty(str:string){\n    if(str==null)\n        return true\n    str=str.trim()\n    if(str==\"\")\n        return true\n    return false\n}\nexport function Trim(str:string,char:string,direction:\"both\"|\"left\"|\"right\"=\"both\"){\n    if(char.length>1)\n        throw new Error(\"only receve one character\");\n    let start=-1;\n    if(direction==\"both\" || direction==\"left\"){\n        while(str[start+1]==char){\n            start++\n        }\n    }\n    \n    let end=str.length;\n    if(direction==\"both\"||direction==\"right\"){\n        while(str[end-1]==char){\n            end--\n        }\n    }\n    \n    return str.substring(start+1,end)\n}\n\nexport function StrToEvalstr(str:string):{isconst:boolean,exp:string}{\n    if (REG_SINGLE.test(str)) {\n        return {isconst:false,exp:RegExp.$1}\n    }else{\n        if(REG_MULTI.test(str)){\n            let reg=/\\{\\{([^\\{\\}]*)\\}\\}/g\n            let res=reg.exec(str)\n            let exp=\"\"\n            let lastindex=0\n            while(res){\n                if(res.index!=lastindex){\n                    exp+=\"\\'\"+str.substring(lastindex,res.index)+\"\\'+\"\n                }\n                lastindex=res.index+res[0].length\n                exp+=\"(\"+RegExp.$1+\")+\"\n                res=reg.exec(str)\n            }\n            if(lastindex!=str.length){\n                exp+=\"'\"+str.substr(lastindex)+\"'\"\n            }\n            if(exp.endsWith(\"+\")){\n                exp=exp.substring(0,exp.length-1)\n            }\n\n            return {isconst:false,exp:exp}\n        }else{\n            return {isconst:true,exp:str}\n        }\n    }\n}\n\nexport function InsertDomChild(parent:Node,child:Node,after:Node){\n    if(after==null){\n        if(parent.firstChild!=null)\n            parent.insertBefore(child,parent.firstChild)\n        else\n            parent.appendChild(child)\n    }else{\n        if(after.nextSibling!=null)\n            parent.insertBefore(child,after.nextSibling)\n        else\n            parent.appendChild(child)\n    }\n}\n\nexport function TypeOf(param:any):ParamType{\n    if(toString.call(param)==\"[object Boolean]\"){\n        return \"boolean\"\n    }\n    if(toString.call(param)==\"[object Array]\"){\n        return \"array\"\n    }\n    if(toString.call(param)==\"[object Number]\"){\n        return \"number\"\n    }\n    if(toString.call(param)==\"[object Object]\"){\n        return \"object\"\n    }\n    if(toString.call(param)==\"[object Null]\"){\n        return \"object\"\n    }\n    if(toString.call(param)==\"[object String]\"){\n        return \"string\"\n    }\n    if(toString.call(param)==\"[object Undefined]\"){\n        throw new Error(\"function TypeOf: undefined is not allowed\")\n    }\n}\n/**解析传入r-class或者r-style的值为json对象 */\nexport function ParseStyle(style:string){\n    style=style.substr(1);\n    style=style.substr(0,style.length-1);\n    let styles=style.split(\",\");\n    let json:{[key:string]:string}={};\n    styles.forEach(s=>{\n        let index=s.indexOf(\":\");\n        let key=s.substr(0,index);\n        if(REG_STR.test(key)){\n            key=RegExp.$2;\n        }\n        json[key]=s.substr(index+1);\n    })\n    return json;\n}","import { VNode } from \"../vnode/vnode\";\nimport { IsComponentRegistered, InitComponent } from \"../manager/components-manager\";\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { GetNS } from \"../util\";\nimport { PRE } from \"../const\";\nimport { VinallaNode } from \"../vnode/vinalla-node\";\n\ndeclare let require:(module:string)=>any\nexport class VDom{\n    NodeValue: string\n    NodeName: string\n    NodeType: number\n    Attrs: { Name: string, Value: string }[] = []\n    Children: VDom[] = []\n    GetAttr(name:string){\n        for(let i=0;i<this.Attrs.length;i++){\n            if(this.Attrs[i].Name==name)\n                return this.Attrs[i].Value\n        }\n        return null\n    }\n    AddAttr(attr:string,value:string=\"\"){\n        this.Attrs.push({Name:attr,Value:value})\n    }\n}\nexport function TraverseDom(dom:Node):VDom{\n    if(dom.nodeType==3 && dom.nodeValue.trim()==\"\")\n        return\n    let root=new VDom()\n    root.NodeValue=dom.nodeValue\n    if(root.NodeValue!=null){\n        root.NodeValue=root.NodeValue.trim().replace(/\\s+/g,\" \")\n    }\n    root.NodeName=dom.nodeName.toLowerCase()\n    root.NodeType=dom.nodeType\n    if(dom.nodeType==1){\n        let htmldom=dom as HTMLElement\n        for(let i=0;i<htmldom.attributes.length;i++){\n            root.Attrs.push({Name:htmldom.attributes[i].name,Value:htmldom.attributes[i].value})\n        }\n        for(let i=0;i<htmldom.childNodes.length;i++){\n            let child=TraverseDom(htmldom.childNodes[i])\n            child && root.Children.push(child)\n        }\n    }\n    return root\n}\nexport enum Priority{\n    NORMAL,\n    IF,\n    FOR\n}\nexport function NewVNode(dom:VDom,mvvm:Mvvm,parent:VNode,priority:Priority=Priority.FOR):VNode{\n    if(dom.NodeName.toLowerCase()==\"slot\"){\n        let SlotNode=require(\"../vnode/slot-node\").SlotNode\n        let vnode=new SlotNode(dom,mvvm,parent,dom.GetAttr(\"name\"))\n        return vnode\n    }\n\n    if(priority>=Priority.FOR && dom.GetAttr(PRE+\"for\")!=null){\n        let ForNode=require(\"../vnode/for-node\").ForNode\n        let vnode= new ForNode(dom,mvvm,parent,dom.GetAttr(PRE+\"for\"))\n        return vnode\n    }\n    if(priority>=Priority.IF && dom.GetAttr(PRE+\"if\")!=null){\n        let IfNode=require(\"../vnode/if-node\").IfNode\n        let vnode= new IfNode(dom,mvvm,parent,dom.GetAttr(PRE+\"if\"))              \n        return vnode\n    }\n    if(dom.NodeName==\"r-template\"){\n        let TemplateNode=require(\"../vnode/template-node\").TemplateNode\n        let vnode= new TemplateNode(dom,mvvm,parent)\n        return vnode\n    }\n    if(dom.NodeName==\"router-view\"){\n        let RouterNode=require(\"../vnode/router-node\").RouterNode\n        let vnode= new RouterNode(dom,mvvm,parent,dom.GetAttr(\"name\"))\n        return vnode\n    }\n    let ns=GetNS(dom.NodeName)\n    if(IsComponentRegistered(ns.value,ns.namespace||mvvm.$namespace)){\n        let construct=InitComponent(ns.value,ns.namespace||mvvm.$namespace)\n        let selfmvvm=new construct()\n\n        let CustomNode=require(\"../vnode/custom-node\").CustomNode\n        let cust= new CustomNode(dom,mvvm,parent,selfmvvm)\n        selfmvvm.$SetFenceNode(cust)\n\n        selfmvvm.$initialize()\n        selfmvvm.$AttachChildren()\n        \n        \n        return cust\n    }\n        \n    return new VinallaNode(dom,mvvm,parent)\n}","import { REG_IN, REG_OUT, VNodeStatus } from \"../const\";\nimport { GetInnerDir } from '../directive/inner-dir';\nimport { DomStatus } from '../models';\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { NewVNode, VDom } from \"../vdom/vdom\";\nimport { PRE } from './../const';\nimport { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { PlugNode } from \"./plug-node\";\nimport { VNode } from \"./vnode\";\n\nexport class CustomNode extends VNode{\n    //输入与输出值\n    private ins_pure:{[name:string]:any}={}\n    private ins_exp:{[name:string]:string}={}\n    private outs:{[name:string]:string}={}\n\n    /**获取自定义组建上的style 或者r-style属性 */\n    private styles:{[key:string]:string}={};\n    /**获取自定义组建上的class 或者r-class属性 */\n    private classes:{[key:string]:string}={};\n\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode,public SurroundMvvm:ComponentMvvm) {\n        super(Vdom,mvvm,Parent)\n        if(this.Vdom){\n            for (let i = 0; i < this.Vdom.Attrs.length; i++) {\n                let name=this.Vdom.Attrs[i].Name;\n                let value=this.Vdom.Attrs[i].Value;\n                //是否是样式\n                if(name==\"style\" ||name==PRE+\"style\"){\n                    this.styles[name]=value;\n                    continue;\n                }\n                if(name==\"class\"||name==PRE+\"class\"){\n                    this.classes[name]=value;\n                    continue;\n                }\n                //输入\n                let ins=this.SurroundMvvm.$InitIns()\n                for(let i=0;i<ins.length;i++){\n                    let prop=ins[i]\n                    \n                    if(REG_IN.test(name) && prop.name==RegExp.$1){\n                        this.ins_exp[RegExp.$1]=value\n                        break\n                    }else{\n                        if(prop.name==name){\n                            this.ins_pure[name]=value\n                            break\n                        }\n                    }\n                }\n                //输出\n                let outs=this.SurroundMvvm.$InitOuts()\n                for(let i=0;i<outs.length;i++){\n                    let event=outs[i]\n                    \n                    if(REG_OUT.test(name) && event.name==RegExp.$1){\n                        this.outs[RegExp.$1]=value\n                        break\n                    }\n                }\n            }\n        }\n        \n    }\n    AddIns(name:string,exp:string){\n        this.ins_exp[name]=exp\n    }\n    /**获取跟slot匹配的模版内容 */\n    GetTemplate(name:string):PlugNode{\n        for(let i=0;i<this.Children.length;i++){\n            let template=this.Children[i] as PlugNode\n            if(template.templatename==name)\n                return template\n        }\n        return null\n    }\n    Render(): DomStatus[] {\n        let dom=this.SurroundMvvm.$Render();\n        this.DomSet=[dom];\n        \n        if(this.styles['style']!=null){\n            let exp=this.styles['style'];\n            let styleitems=exp.split(\";\");\n            styleitems.forEach(item=>{\n                let kv=item.split(\":\");\n                ((dom.dom as HTMLElement).style as any)[kv[0]]=kv[1];\n            });\n        }\n        if(this.styles[PRE+'style']!=null){\n            let styledir=GetInnerDir(PRE+\"style\");\n            let exp=this.styles[PRE+'style'];\n            styledir(exp,this);\n        }\n        if(this.classes['class']!=null){\n            let classitem=this.classes['class'].split(/\\s+/);\n            (dom.dom as HTMLElement).classList.add(...classitem);\n        }\n        if(this.classes[PRE+\"class\"]!=null){\n            let classdir=GetInnerDir(PRE+'class');\n            let exp=this.classes[PRE+'class'];\n            classdir(exp,this);\n        }\n        return this.DomSet\n    }\n    \n    AttachChildren(){\n        if(this.Vdom!=null){\n            //制造中间节点管理template\n            let defaultTemplate=new PlugNode(null,this.mvvm,null,\"default\")\n            let templates:{[name:string]:VNode}={\"default\":defaultTemplate}\n            //解析子节点\n            for (let i = 0; i < this.Vdom.Children.length; i++) {\n                let childnode=this.Vdom.Children[i]\n\n                let name=childnode.GetAttr(\"slot\")\n                if(name==null || name==\"\"){\n                    name=\"default\"\n                }\n                if(templates[name]==null){\n                    templates[name]=new PlugNode(null,this.mvvm,null,name)\n                }\n                let vchild=NewVNode(childnode,templates[name].mvvm,templates[name])\n                \n                vchild.AttachChildren()\n                templates[name].Children.push(vchild)\n            }\n            for(let name in templates){\n                this.Children.push(templates[name])\n            }\n        }\n    }\n\n    GetInValue(prop:string){\n        if(this.ins_pure[prop]!=null)\n            return this.ins_pure[prop]\n        if(this.ins_exp[prop]!=null)\n            return this.mvvm.$GetExpOrFunValue(this.ins_exp[prop])\n        return null\n    }\n    GetIn(prop:string){\n        if(this.ins_pure[prop]!=null)\n            return {value:this.ins_pure[prop],const:true} \n        if(this.ins_exp[prop]!=null)\n            return {value:this.ins_exp[prop],const:false}\n        return null\n    }\n    GetOut(prop:string){\n        return this.outs[prop]\n    }\n    \n    \n    Refresh() {\n        this.SurroundMvvm.$Refresh()\n    }\n    Update(){\n        this.SurroundMvvm.$Update()\n    }\n\n    OnDestroy(){\n        this.SurroundMvvm.$OnDestroy()\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        this.SurroundMvvm.$SetStatus(status)\n    }\n    Reflow(){\n    }\n    OnRouterChange(){\n        this.SurroundMvvm.$OnRouterChange();\n    }\n}","import { REG_IN, REG_OUT } from '../const';\nimport { VDom } from '../vdom/vdom';\n\nexport class DirectiveNode {\n    //输入与输出值\n    protected ins_pure: { [name: string]: any } = {}\n    protected ins_exp: { [name: string]: string } = {}\n    protected outs: { [name: string]: string } = {}\n\n    constructor(private vdom:VDom) {\n        this.vdom.Attrs.forEach(attr=>{\n            this.addProperty(attr.Name,attr.Value)\n        })\n    }\n    private addProperty(name: string, value: string):boolean{\n        //输入\n        if(REG_IN.test(name)){\n            this.ins_exp[RegExp.$1]=value\n            return\n        }\n        //输出\n        if(REG_OUT.test(name) ){\n            this.outs[RegExp.$1]=value\n            return\n        }\n        this.ins_pure[name]=value\n        return\n    }\n    GetIn(prop:string){\n        if(this.ins_pure[prop]!=null)\n            return {value:this.ins_pure[prop],const:true} \n        if(this.ins_exp[prop]!=null)\n            return {value:this.ins_exp[prop],const:false}\n\n        return null\n    }\n    GetOut(prop:string){\n        return this.outs[prop]\n    }\n}","import { VNodeStatus } from \"../const\";\nimport { Diff } from \"../diff/diff\";\nimport { EvalExp } from '../eval';\nimport { DomStatus, ForExp } from \"../models\";\nimport { Mvvm } from '../mvvm/mvvm';\nimport { Watcher } from \"../observer/watcher\";\nimport { NewVNode, Priority, VDom } from '../vdom/vdom';\nimport { DomType } from './../const';\nimport { VNode } from \"./vnode\";\n\nexport class ForNode extends VNode{\n    private forExp:ForExp;\n    private indexName:string;\n    private arrayExpWatcher:Watcher;\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode,private originForExp:string) {\n        super(Vdom,mvvm,Parent)\n        let items=this.originForExp.trim().split(\";\");\n        let forSplit=items[0].split(/\\s+/);\n        this.forExp=new ForExp(forSplit[0],forSplit[2]);\n\n        if(items.length>1){\n            let kvs=items[1].split(\"=\");\n            if(kvs.length==2){\n                if(kvs[1]==\"$index\")\n                    this.indexName=kvs[0];\n                else\n                    throw new Error(\"unrecognized variable \"+kvs[1]);\n            }\n        }\n    }\n    private newCopyNode(item:any){\n        let that=this;\n        let itemexp=this.forExp.itemExp;\n        let mvvm=new (class extends Mvvm{\n            $InitDataItems(): { name: string; value: any; }[] {\n                return [];\n            }\n            $InitComputeItems(): { name: string; get: () => any; }[] {\n                return [];\n            }\n            $Render(): DomStatus {\n                return null;\n            }\n            protected $hirented=that.mvvm;\n            $InitTreeroot(): VNode {\n                return null;\n            }\n            $InitNamespace(): string {\n                return that.mvvm.$InitNamespace();\n            }\n            $GetExpOrFunValue(exp:string):any{\n                let mvvm=this.$ExtendMvvm()\n                return EvalExp(mvvm,exp)\n            }\n            $ExtendMvvm(){\n                let mvvm=that.mvvm.$ExtendMvvm();\n                \n                Object.defineProperty(mvvm,itemexp,{\n                    value:item,\n                    enumerable:true,\n                    configurable:true\n                });\n                if(that.indexName!=null)\n                    Object.defineProperty(mvvm,that.indexName,{\n                        get:function(){\n                            let items=mvvm.$GetExpOrFunValue(that.forExp.arrayExp);\n                            return items.indexOf(item);\n                        },\n                        configurable:true,\n                        enumerable:true\n                    });\n                else\n                    Object.defineProperty(mvvm,\"$index\",{\n                        get:function(){\n                            let items=mvvm.$GetExpOrFunValue(that.forExp.arrayExp);\n                            return items.indexOf(item);\n                        },\n                        configurable:true,\n                        enumerable:true\n                    });\n                \n                return mvvm\n            }\n            $RevokeMethod(method:string,...params:any[]){\n                let mvvm=this.$ExtendMvvm();\n                mvvm.$RevokeMethod(method,...params);\n            }\n        });\n        let vnode=NewVNode(this.Vdom,mvvm,this,Priority.IF);\n        vnode.AttachChildren();\n        return vnode;\n    }\n    private implementForExp(newitems:any[],olditems:any[]){\n        let opers=Diff(olditems,newitems);\n        \n        let childToDeleted:VNode[]=[];\n        opers.forEach(oper=>{\n            if(oper.type==\"add\"){\n                let custnode=this.newCopyNode(newitems[oper.newSetIndex]);\n                custnode.Render();\n                if(oper.oldSetIndex==-1){\n                    this.Children.unshift(custnode);\n                }else{\n                    this.Children.splice(oper.oldSetIndex+1,0,custnode);\n                }\n            }\n            if(oper.type==\"remove\"){\n                childToDeleted.push(this.Children[oper.oldSetIndex]);\n            }\n            if(oper.type==\"replace\"){\n                let custnode=this.newCopyNode(newitems[oper.newSetIndex]);\n                custnode.Render();\n                childToDeleted.push(this.Children[oper.oldSetIndex]);\n\n                this.Children.splice(oper.oldSetIndex,0,custnode);\n            }\n        });\n        childToDeleted.forEach(i=>{\n            i.SetStatus(VNodeStatus.DEPRECATED);\n            i.OnDestroy();\n            i.DomSet.forEach(dom=>{\n                dom.type=DomType.DELETE;\n            });\n        });\n        this.DomSet=[];\n        this.Children.forEach(child=>{\n            this.DomSet=this.DomSet.concat(child.DomSet);\n        });\n        this.Children=this.Children.filter(child=>{\n            return !childToDeleted.includes(child);\n        });\n\n        this.Parent.Reflow();\n    }\n    \n    \n\n    \n    Update(){\n        let olditems=this.arrayExpWatcher.GetCurValue();\n        let newitems=this.mvvm.$GetExpOrFunValue(this.forExp.arrayExp)\n        if(toString.call(newitems) === \"[object Array]\"){\n            this.implementForExp(newitems,olditems);\n        }else{\n            throw new Error(`${this.forExp.arrayExp} must be an array`);\n        }\n    }\n    AttachChildren() {\n        let array=this.mvvm.$GetExpOrFunValue(this.forExp.arrayExp);\n        if(toString.call(array)==\"[object Array]\"){\n            for(let value of array){\n                let child=this.newCopyNode(value);\n                this.Children.push(child);\n            }\n        }else{\n            throw new Error(`${this.forExp.arrayExp} must be an array`);\n        }\n        \n    }\n    Render():DomStatus[]{\n        this.arrayExpWatcher=this.mvvm.$CreateWatcher(this,this.forExp.arrayExp,this.implementForExp.bind(this),true);\n\n        this.Children.forEach(child=>{\n            this.DomSet=this.DomSet.concat(child.Render())\n        })\n        return this.DomSet;\n    }\n    OnDestroy(){\n        this.Children.forEach(vnode=>vnode.OnDestroy())\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        this.Children.forEach(vnode=>vnode.SetStatus(status))\n    }\n    \n}","import { DomType } from './../const';\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { VNode } from \"./vnode\";\nimport { VDom, NewVNode, Priority } from \"../vdom/vdom\";\nimport { VNodeStatus } from \"../const\";\nimport { DomStatus } from '../models';\n\nexport class IfNode extends VNode {\n    constructor(public Vdom:VDom,public mvvm: Mvvm, public Parent: VNode, private ifExp: string) {\n        super(Vdom,mvvm, Parent)\n    }\n    \n    AttachChildren() {\n        let boolvalue=this.mvvm.$GetExpOrFunValue(this.ifExp)\n        if(boolvalue){\n            let vnode=NewVNode(this.Vdom,this.mvvm,null,Priority.NORMAL)\n            vnode.AttachChildren()\n            this.Children=[vnode]\n        }\n    }\n    Render():DomStatus[]{\n        this.Children.forEach(child=>{\n            this.DomSet=this.DomSet.concat(child.Render())\n        })\n        this.mvvm.$CreateWatcher(this,this.ifExp, newvalue=>this.reImpletement(newvalue))\n        return this.DomSet\n    }\n    Update(){\n        let attached = this.mvvm.$GetExpOrFunValue(this.ifExp)\n        this.reImpletement(attached)\n    }\n\n    private reImpletement(newvalue:boolean){\n        if (newvalue) {\n            let vnode=NewVNode(this.Vdom,this.mvvm,null,Priority.NORMAL)\n            vnode.AttachChildren()\n            this.Children=[vnode]\n            this.Children.forEach(child=>{\n                this.DomSet=this.DomSet.concat(child.Render())\n            })\n            this.Parent.Reflow();\n        }else{\n            this.Children.forEach(child=>{\n                child.SetStatus(VNodeStatus.DEPRECATED);\n                child.OnDestroy();\n            });\n            this.Children=[]\n            this.DomSet.forEach(dom=>{\n                dom.type=DomType.DELETE\n            });\n        }\n    }\n\n    OnDestroy(){\n        if(this.Children.length>0)\n            this.Children[0].OnDestroy()\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        if(this.Children.length>0)\n            this.Children[0].SetStatus(status)\n    }\n    \n}","import { DomStatus } from '../models';\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { VDom } from \"../vdom/vdom\";\nimport { VNode } from \"./vnode\";\n\nexport class PlugNode extends VNode{\n    constructor(protected vdom:VDom,public mvvm: Mvvm,public Parent:VNode,public templatename:string) {\n        super(vdom,mvvm,Parent)\n    }\n    \n    Render():DomStatus[]{\n        this.Children.forEach(child=>{\n            let doms=child.Render()\n            this.DomSet=this.DomSet.concat(doms)\n        })\n        return this.DomSet\n    }\n    \n    Update(){\n        let children: VNode[] = []\n        this.Children.forEach(child => {\n            children.push(child)\n        })\n        children.forEach(child => {\n            child.Update()\n        })\n    }\n    \n}","import { DomStatus } from '../models';\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { MoveBack, NextRouter } from \"../router/router-manager\";\nimport { VDom } from '../vdom/vdom';\nimport { DomType, VNodeStatus } from './../const';\nimport { IComponentMvvm } from './../models';\nimport { CustomNode } from \"./custom-node\";\nimport { VNode } from \"./vnode\";\n\nexport class RouterNode extends VNode{\n    private lastConstructor:IComponentMvvm=null;\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode,private routername:string) {\n        super(Vdom,mvvm,Parent)\n    }\n\n    Render() :DomStatus[]{\n        let router=NextRouter(this,this.routername);\n        this.lastConstructor=router;\n        if(router!=null){\n            let vnode=this.instance(router)\n            this.Children=[vnode]\n            this.DomSet=vnode.Render()\n            MoveBack()\n        }\n        return this.DomSet\n        \n    }\n    OnRouterChange(){\n        let constructor=NextRouter(this,this.routername);\n        if(this.lastConstructor!=constructor){\n            this.lastConstructor=constructor;\n            //释放旧的资源\n            this.Children.forEach(child=>{\n                child.SetStatus(VNodeStatus.DEPRECATED);\n                child.OnDestroy();\n            });\n\n            if(constructor!=null){\n                let vnode=this.instance(constructor)\n                this.Children=[vnode]\n                this.DomSet.forEach(dom=>dom.type=DomType.DELETE)\n                this.DomSet= this.DomSet.concat(vnode.Render())\n                this.Parent.Reflow();\n                MoveBack()\n            }else{\n                this.Children=[]\n                this.DomSet.forEach(dom=>{\n                    dom.type=DomType.DELETE\n                })\n            }\n        }else{\n            this.Children.forEach(child=>child.OnRouterChange());\n            MoveBack();\n        }\n        \n    }\n    private instance(construct:IComponentMvvm):VNode{\n        let mvvm=new construct()\n        let custnode=new CustomNode(null,this.mvvm,null,mvvm)\n        mvvm.$SetFenceNode(custnode)\n\n        mvvm.$initialize()\n        mvvm.$AttachChildren()\n        \n        return custnode\n    }\n    Update(){\n\n    }\n    Reflow(){\n    }\n}\n","import { VNodeStatus } from \"../const\";\nimport { DomStatus } from '../models';\nimport { VDom } from \"../vdom/vdom\";\nimport { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { VNode } from \"./vnode\";\n\nexport class SlotNode extends VNode{\n    constructor(protected vdom:VDom,public mvvm: ComponentMvvm, public Parent: VNode, private name: string) {\n        super(vdom,mvvm,Parent)\n        if(this.name==null || this.name==\"\")\n            this.name=\"default\"\n    }\n    Render(): DomStatus[] {\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        if(template!=null){\n            template.Parent=this;\n            this.Children=[template];\n            this.DomSet=template.Render();\n        }\n        return this.DomSet;\n    }\n    \n    Update(){\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        if(template!=null){\n            template.Update()\n        }\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        template.SetStatus(status)\n    }\n    OnDestroy(){\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        template.OnDestroy()\n    }\n    \n}","import { DomStatus } from './../models';\nimport { VNode } from \"./vnode\";\n\nexport class TemplateNode extends VNode{\n    Render():DomStatus[]{\n        this.Children.forEach(child=>{\n            this.DomSet=this.DomSet.concat(child.Render())\n        })\n        return this.DomSet;\n    }\n    Update(){\n\n    }\n}","import { GetInnerDir } from \"../directive/inner-dir\";\nimport { GetDirectiveCon, IsDirectiveRegistered } from '../manager/directive-manager';\nimport { DirectiveMVVM } from '../mvvm/directive-mvvm';\nimport { GetNS, InsertDomChild, StrToEvalstr } from '../util';\nimport { DomType, REG_IN, REG_OUT, REG_ATTR, PRE, ANCHOR } from './../const';\nimport { InnerDirective } from './../directive/inner-dir';\nimport { DirectiveNode } from './directive-node';\nimport { VNode } from './vnode';\nimport { VDom } from \"../vdom/vdom\";\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { DomStatus } from \"../models\";\nexport class VinallaNode extends VNode{\n    \n    private directives:DirectiveMVVM[]=[]\n    private innerDirective:{dir:InnerDirective,exp:string,options:string[]}[]=[];\n    \n    private isAnchor:boolean=false;\n    private anchorName:string=\"\";\n\n    /**普通属性 */\n    protected attrs: { name: string, value: string }[] = [];\n    \n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode){\n        super(Vdom,mvvm,Parent);\n        this.nodeValue = this.Vdom.NodeValue\n        this.nodeName = this.Vdom.NodeName\n        this.nodeType = this.Vdom.NodeType\n        //保存元素属性\n        let vanillaAttrs=this.Vdom.Attrs\n        for (let i = 0; i < this.Vdom.Attrs.length; i++) {\n            let attr=this.Vdom.Attrs[i]\n            let ns=GetNS(attr.Name)\n            if(ns.namespace==null)\n                ns.namespace=this.mvvm.$InitNamespace()\n            if(IsDirectiveRegistered(ns.value,ns.namespace)){\n                let dirNode=new DirectiveNode(this.Vdom)\n                let dirCons=GetDirectiveCon(ns.value,ns.namespace)\n                let dirMvvm=new dirCons();\n                dirMvvm.$Initialize(dirNode,this);\n                vanillaAttrs=vanillaAttrs.filter(attr=>{\n                    let name=attr.Name\n                    if(REG_IN.test(attr.Name) || REG_OUT.test(attr.Name))\n                        name=RegExp.$1\n                    \n                    let isprop= dirMvvm.$Ins.some(prop=>prop.name==name)\n                    let isevent=dirMvvm.$Outs.some(event=>event==name)\n                    return !(isprop || isevent)\n                })\n                this.directives.push(dirMvvm)\n            }\n        }\n        vanillaAttrs= vanillaAttrs.filter(attr=>{\n            let slice=attr.Name.split(\":\");\n            let dir=GetInnerDir(slice[0]);\n            if(dir!=null){\n                this.innerDirective.push({dir:dir,exp:attr.Value,options:slice.slice(1)})\n                return false\n            }\n            return true\n        })\n        vanillaAttrs.forEach(attr=>{\n            if(REG_ATTR.test(attr.Name)){\n                this.attrs.push({name:attr.Name,value:attr.Value});\n                if(attr.Name==PRE+ANCHOR){\n                    this.isAnchor=true;\n                    this.anchorName=attr.Value;\n                }\n            }\n        })\n    }\n\n    OnDestroy(){\n        super.OnDestroy()\n        this.directives.forEach(dir=>dir.$OnDestroy())\n    }\n\n    protected directiveBind(){\n        this.directives.forEach(dir=>dir.$Render())\n        this.innerDirective.forEach(item=>{\n            item.dir(item.exp,this,item.options)\n        })\n    }\n    \n    \n    Render() :DomStatus[]{\n        if (this.nodeType == 1) {\n            let dom = document.createElement(this.nodeName)\n            this.attrs.forEach(prop => {\n                let evalexp=StrToEvalstr(prop.value);\n                if (!evalexp.isconst) {\n                    let watcher=this.mvvm.$CreateWatcher(this,evalexp.exp,(newvalue, oldvalue)=>{\n                        dom.setAttribute(prop.name, newvalue);\n                    });\n                    let value=watcher.GetCurValue();\n                    if(prop.name=='src' && this.nodeName=='img')\n                        (dom as HTMLImageElement).src=value;\n                    else\n                        dom.setAttribute(prop.name, value);\n                }else{\n                    dom.setAttribute(prop.name, evalexp.exp);\n                }\n                \n            })\n            \n            this.DomSet = [{type:DomType.NEW,dom:dom}] \n            \n            this.Children.forEach(child => {\n                let childdomset=child.Render();\n                childdomset.forEach(childdom=>{\n                    this.DomSet[0].dom.appendChild(childdom.dom)\n                });\n                childdomset.forEach(childom=>{\n                    childom.type=DomType.CONSTANT\n                });\n            })\n            this.directiveBind()\n            return this.DomSet\n        }\n        if (this.nodeType == 3) {\n            let dom = document.createTextNode(this.nodeValue)\n            this.DomSet=[{type:DomType.NEW,dom:dom}]\n            let evalexp=StrToEvalstr(this.nodeValue)\n            if (!evalexp.isconst) {\n                let watcher=this.mvvm.$CreateWatcher(this,evalexp.exp,(newvalue, oldvalue)=>{\n                    dom.textContent = newvalue\n                });\n                dom.textContent=watcher.GetCurValue();\n            }else{\n                dom.textContent=evalexp.exp\n            }\n            return this.DomSet\n        }\n        if(this.nodeType==8){\n            let dom=document.createComment(this.nodeValue)\n            this.DomSet=[{type:DomType.NEW,dom: dom}]\n            return this.DomSet\n        }\n    }\n    Refresh() {\n        this.DomSet.forEach(dom=>dom.type=DomType.CONSTANT);\n        if(this.nodeType==1){\n            let thedom=this.DomSet[0].dom\n            let childdom:Node=null\n            this.Children.forEach(child=>{\n                child.DomSet.forEach(domstate=>{\n                    if(domstate.type==DomType.CONSTANT){\n                        childdom=domstate.dom\n                        return\n                    }\n                    if(domstate.type==DomType.NEW){\n                        InsertDomChild(thedom,domstate.dom,childdom)\n                        childdom=domstate.dom\n                        return\n                    }\n                    if(domstate.type==DomType.DELETE){\n                        thedom.removeChild(domstate.dom)\n                        return\n                    }\n                })\n            })\n        }\n        this.Children.forEach(child=>child.Refresh())\n    }\n    Update(){\n        //todo 更新属性\n        if (this.nodeType == 1) {\n            let children: VNode[] = []\n            this.Children.forEach(child => {\n                children.push(child)\n            })\n            children.forEach(child => {\n                child.Update()\n            })\n            //todo 设置属性\n            return\n        }\n        if (this.nodeType == 3) {\n            let evalexp=StrToEvalstr(this.nodeValue)\n            if (!evalexp.isconst) {\n                this.DomSet[0].dom.textContent=this.mvvm.$GetExpOrFunValue(evalexp.exp)\n            }else{\n                this.DomSet[0].dom.textContent=evalexp.exp\n            }\n        }\n    }\n    Reflow(){\n    }\n    GetAnchor(name:string):VinallaNode{\n        if(this.isAnchor && this.anchorName==name){\n            return this;\n        }\n        return super.GetAnchor(name);\n    }\n}","import { Mvvm } from '../mvvm/mvvm';\nimport { NewVNode, VDom } from '../vdom/vdom';\nimport { DomType, VNodeStatus } from './../const';\nimport { DomStatus } from './../models';\nimport { VinallaNode } from './vinalla-node';\nexport abstract class VNode {\n    //元素值 只有当nodeType为3时才有用，其他时候为null\n    protected nodeValue: string\n    //元素名称 都是小写字母\n    protected nodeName: string\n    //元素类型：1 元素 3 文本 8 注释\n    protected nodeType: number\n    \n    \n    Children: VNode[] = []\n    DomSet: {type:DomType,dom:Node}[]=[]\n\n    \n    protected status:VNodeStatus=VNodeStatus.ACTIVE\n\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode) {\n        if(this.Vdom!=null){\n            this.nodeValue = this.Vdom.NodeValue\n            this.nodeName = this.Vdom.NodeName\n            this.nodeType = this.Vdom.NodeType\n        }\n    }\n\n\n    abstract Render():DomStatus[];\n\n    Reflow(){\n        this.DomSet=[];\n        this.Children.forEach(child=>{\n            this.DomSet=this.DomSet.concat(child.DomSet)\n        });\n        if(this.Parent!=null)\n            this.Parent.Reflow()\n    }\n    Refresh():void{\n        this.DomSet=this.DomSet.filter(dom=>dom.type!=DomType.DELETE)\n        this.Children.forEach(child=>child.Refresh())\n    }\n    \n\n    abstract Update():void;\n    \n    \n    OnDestroy(){\n        this.Children.forEach(child=>{\n            child.OnDestroy()\n        })\n    }\n    \n    AttachChildren() {\n        //解析子节点\n        for (let i = 0; i < this.Vdom.Children.length; i++) {\n            let childdom=this.Vdom.Children[i]\n            let vchild=NewVNode(childdom,this.mvvm,this)\n            \n            if(vchild!=null){\n                vchild.AttachChildren()\n                this.Children.push(vchild)\n            }\n        }\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        this.Children.forEach(child=>{\n            child.SetStatus(status)\n        })\n    }\n    GetStatus(){\n        return this.status\n    }\n    OnRouterChange(){\n        this.Children.forEach(child=>child.OnRouterChange())\n    }\n    GetNodeName(){\n        return this.nodeName.toLowerCase()\n    }\n    GetAnchor(name:string):VinallaNode{\n        for(let i=0;i<this.Children.length;i++){\n            let anchor=this.Children[i].GetAnchor(name);\n            if(anchor!=null)\n                return anchor;\n        }\n        return null;\n    }\n}"],"sourceRoot":""}