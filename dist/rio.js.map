{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/const.ts","webpack:///./src/decorator/app.ts","webpack:///./src/decorator/component.ts","webpack:///./src/decorator/directive.ts","webpack:///./src/decorator/property.ts","webpack:///./src/directive/href.ts","webpack:///./src/directive/html.ts","webpack:///./src/directive/inner-dir.ts","webpack:///./src/directive/model.ts","webpack:///./src/directive/onclick.ts","webpack:///./src/eval.js","webpack:///./src/main.ts","webpack:///./src/manager/app-manager.ts","webpack:///./src/manager/components-manager.ts","webpack:///./src/manager/directive-manager.ts","webpack:///./src/manager/start.ts","webpack:///./src/models.ts","webpack:///./src/mvvm/app-mvvm.ts","webpack:///./src/mvvm/component-mvvm.ts","webpack:///./src/mvvm/directive-mvvm.ts","webpack:///./src/mvvm/mvvm.ts","webpack:///./src/mvvm/revoke-event.ts","webpack:///./src/observer/msg-queue.ts","webpack:///./src/observer/observe.ts","webpack:///./src/observer/watcher.ts","webpack:///./src/router/router-manager.ts","webpack:///./src/router/router-state.ts","webpack:///./src/util.ts","webpack:///./src/vdom/vdom.ts","webpack:///./src/vnode/custom-node.ts","webpack:///./src/vnode/directive-node.ts","webpack:///./src/vnode/for-node.ts","webpack:///./src/vnode/if-node.ts","webpack:///./src/vnode/router-node.ts","webpack:///./src/vnode/slot-node.ts","webpack:///./src/vnode/template-node.ts","webpack:///./src/vnode/vinalla-node.ts","webpack:///./src/vnode/vnode.ts"],"names":[],"mappings":"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","file":"rio.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","export const DIR_MODEL = \"model\"\nexport const DIR_EVENT_CLICK = \"click\"\nexport const PRE=\"r-\"\n\n/**花括号数据绑定表达式 */\nexport const REG_SINGLE = /^\\{\\{([^\\{\\}]*)\\}\\}$/\nexport const REG_MULTI = /\\{\\{(.*?)\\}\\}/\n/**事件监听响应函数 */\nexport const REG_EVENT=/^(\\w+)\\((.*)\\)$/\n/**字符串 */\nexport const REG_STR=/^(['\"])(.*?)\\1$/\nexport const REG_MID_STR=/(['\"])(.*?)\\1/\n\n/**输入属性 */\nexport const REG_IN=/^\\[(\\w+)\\]$/\n/**输出事件 */\nexport const REG_OUT=/^\\((\\w+)\\)$/\n/**正常属性 */\nexport const REG_ATTR=/^[A-z_]\\w*$/\n\n\n/**测试输出项 */\nexport const REG_TEST_OUTPUT=/^((click))$/\n\nexport enum VNodeStatus{\n    /**依然处于vnode树中 */\n    ACTIVE,\n    /**不在vnode树中但是有可能重新加回来 */\n    INACTIVE,\n    /**抛弃 */\n    DEPRECATED\n}","import { RegisterApp } from \"../manager/app-manager\";\nimport { AppOption, IAppMvvm } from \"../models\";\nimport { NewVNode, TraverseDom } from \"../vdom/vdom\";\nimport { VNode } from \"../vnode/vnode\";\nimport { FetchProperty } from \"./property\";\n\n\n\nexport function App(option:AppOption){\n    checkAppOption(option)\n    let res=FetchProperty()\n    return function(target:IAppMvvm){\n        let constructor= class $AppMvvm extends target{\n            \n            $InitFuncs:string[]=res.initFuncs\n            $DestroyFuncs:string[]=res.destroyFuncs\n            \n            $initialize(){\n                super.$initialize()\n                this.$InitFuncs.forEach(init=>{\n                    (this as any)[init].call(this)\n                })\n            }\n            $OnDestroy(){\n                super.$OnDestroy()\n                this.$DestroyFuncs.forEach(destroy=>{\n                    (this as any)[destroy].call(this)\n                })\n            }\n            $InitTreeroot(): VNode {\n                let dom=document.querySelector(option.el)\n                if(dom==null){\n                    throw new Error(\"no specified element \"+option.el)\n                }\n                let vdom=TraverseDom(dom)\n                let vnode=NewVNode(vdom,this,null)\n                return vnode\n            }\n            $InitNamespace(): string {\n                return option.namespace\n            }\n            $InitDataItems(): {name:string,value:any}[] {\n                let datas:{name:string,value:any}[]=[]\n                res.datas.forEach(item=>{\n                    datas.push({name:item,value:(this as any)[item]})\n                })\n                return datas\n            }\n            $InitComputeItems(): { name: string; get: () => any }[] {\n                return res.computes\n            }\n            $InitEl(){\n                return option.el\n            }\n            \n        }\n        RegisterApp(constructor)\n    }\n}\nfunction checkAppOption(option:AppOption){\n    option.namespace=option.namespace?option.namespace:\"default\"\n}","import { IComponentMvvm } from './../models';\nimport { RegisterComponent, GetDomTree } from '../manager/components-manager';\nimport { ComponentOption, Prop } from '../models';\nimport { FetchProperty } from './property';\nimport { VNode } from '../vnode/vnode';\nimport { NewVNode } from '../vdom/vdom';\n\n\n\nexport function Component(option:ComponentOption){\n    checkComponentOption(option)\n    let res=FetchProperty()\n    return function(target:IComponentMvvm){\n        let constructor= class $ComponentMvvm extends target{\n            $InitFuncs:string[]=res.initFuncs\n            $DestroyFuncs:string[]=res.destroyFuncs\n            \n            $initialize(){\n                super.$initialize()\n                this.$InitFuncs.forEach(init=>{\n                    (this as any)[init].call(this)\n                })\n            }\n            $OnDestroy(){\n                super.$OnDestroy()\n                this.$DestroyFuncs.forEach(destroy=>{\n                    (this as any)[destroy].call(this)\n                })\n            }\n            $InitTreeroot():VNode{\n                let domtree=GetDomTree(this.$InitName(),this.$InitNamespace())\n                if(domtree==null){\n                    throw new Error(\"not found template or templateUrl for component \"+this.$InitName()+\" in \"+this.$InitNamespace())\n                }\n                let vnode=NewVNode(domtree,this,null)\n                return vnode\n            }\n            $InitNamespace(): string {\n                return option.namespace\n            }\n            $InitDataItems(): {name:string,value:any}[] {\n                let datas:{name:string,value:any}[]=[]\n                res.datas.forEach(item=>{\n                    datas.push({name:item,value:(this as any)[item]})\n                })\n                return datas\n            }\n            $InitComputeItems(): { name: string; get: () => any }[] {\n                return res.computes\n            }\n            $InitName():string{\n                return option.name\n            }\n            $InitIns():Prop[]{\n                return res.props\n            }\n            $InitOuts():string[]{\n                //todo\n                return []\n            }\n        }\n        RegisterComponent(option.name,option.namespace,constructor,option)\n    }\n}\n\n\nfunction checkComponentOption(option:ComponentOption){\n    option.namespace=option.namespace?option.namespace:\"default\"\n    option.events=option.events?option.events:[]\n}\n\n","import { DirectiveOption, IDirectiveConstructor } from \"../models\";\nimport { FetchProperty } from \"./property\";\nimport { RegisterDirective } from \"../manager/directive-manager\";\nimport { VNode } from \"../vnode/vnode\";\nimport { DirectiveNode } from \"../vnode/directive-node\";\n\nexport function Directive(option:DirectiveOption){\n    checkDirectiveOption(option)\n    let res=FetchProperty()\n    return function(target:IDirectiveConstructor){\n        let constructor= class $DirectiveMvvm extends target{\n            $Name=option.name\n            $Namespace=option.namespace\n            $Ins=res.props\n            $Out=option.events\n            $InitFuncs=res.initFuncs\n            $DestroyFuncs=res.destroyFuncs\n            constructor(directive:DirectiveNode,vnode:VNode){\n                super(directive,vnode)\n            }\n        }\n        RegisterDirective(option.name,option.namespace,constructor)\n    }\n}\nfunction checkDirectiveOption(option:DirectiveOption){\n    option.events=option.events?option.events:[]\n    option.namespace=option.namespace?option.namespace:\"default\"\n}","import { Prop, PropType } from './../models';\nlet datas:string[]=[]\nlet computes:{name:string,get:()=>any}[]=[]\nlet props:Prop[]=[]\nlet initFuncs:string[]=[]\nlet destroyFuncs:string[]=[]\n\n\n\nexport function Data(target:any,key:string){\n    datas.push(key)\n}\nexport function Computed(target:any,key:string,descriptor:PropertyDescriptor){\n    computes.push({name:key,get:(descriptor as any).get})\n}\nexport function Prop(name:string,required:boolean,type?:PropType){\n    props.push({\n        name:name,\n        required:required,\n        type:type\n    })\n    return function(target:any,key:string){}\n}\nexport function OnInit(target:any,key:string,descriptor:PropertyDescriptor){\n    initFuncs.push(key)\n}\nexport function OnDestroy(target:any,key:string,descriptor:PropertyDescriptor){\n    destroyFuncs.push(key)\n}\n\n\n\nexport function FetchProperty(){\n    let res={\n        computes:computes,\n        props:props,\n        initFuncs:initFuncs,\n        destroyFuncs:destroyFuncs,\n        datas:datas\n    }\n    computes=[]\n    props=[]\n    initFuncs=[]\n    destroyFuncs=[]\n    datas=[]\n    return res\n}","import { VNode } from \"../vnode/vnode\";\nimport { StrToEvalstr } from \"../util\";\nimport { PRE } from \"../const\";\n\nexport function Href(exp:string,vnode:VNode,isconst:boolean){\n    let href:string=\"\"\n    if(vnode.Dom.nodeName.toLowerCase()==\"a\"){\n        if(isconst){\n            let streval=StrToEvalstr(exp)\n            if(streval.isconst)\n                (vnode.Dom as HTMLElement).setAttribute(PRE+\"href\",streval.exp);\n            else{\n                vnode.mvvm.$Watch(vnode,streval.exp,newvalue=>{\n                    href=newvalue;\n                    (vnode.Dom as HTMLElement).setAttribute(PRE+\"href\",newvalue);\n                })                \n            }\n        }else{\n            vnode.mvvm.$Watch(vnode,exp,newvalue=>{\n                href=newvalue;\n                (vnode.Dom as HTMLElement).setAttribute(PRE+\"href\",newvalue);\n            })\n        }\n        \n    }\n    vnode.Dom.addEventListener(\"click\",()=>{\n        vnode.NavigateTo(href)\n    })\n}\n","import { VNode } from \"../vnode/vnode\";\nimport { StrToEvalstr } from \"../util\";\n\nexport function Html(exp:string,vnode:VNode,noBracket:boolean){\n    if(noBracket){\n        let strEval=StrToEvalstr(exp);\n        if(strEval.isconst)\n            (vnode.Dom as HTMLElement).innerHTML=strEval.exp;\n        else\n            vnode.mvvm.$Watch(vnode,strEval.exp,newvalue=>{\n                (vnode.Dom as HTMLElement).innerHTML=newvalue\n            })\n    }else{\n        vnode.mvvm.$Watch(vnode,exp,newvalue=>{\n            (vnode.Dom as HTMLElement).innerHTML=newvalue\n        })\n    }\n}","import {VNode} from '../vnode/vnode';\nimport { Href } from './href';\nimport { PRE } from '../const';\nimport { DirModel } from './model';\nimport { OnClick } from './onclick';\nimport {Html} from \"./html\"\n\nlet innerDirs:{[name:string]:InnerDirective}={}\nfunction RegisterInnerDir(name:string,comiple:InnerDirective){\n    if(innerDirs[name]!=null)\n        throw new Error(\"inner directive \"+name+\" already exists\")\n    innerDirs[name]=comiple\n}\n\nexport function GetInnerDir(name:string){\n    return innerDirs[name]\n}\n\nexport interface InnerDirective{\n    (exp:string,vnode:VNode,isconst:boolean,):void\n}\n\n\nRegisterInnerDir(PRE+\"href\",Href)\nRegisterInnerDir(PRE+\"model\",DirModel)\nRegisterInnerDir(PRE+\"click\",OnClick)\nRegisterInnerDir(PRE+\"html\",Html)","import { VNode } from \"../vnode/vnode\"\nexport function DirModel(exp: string, vnode: VNode,isconst:boolean) {\n    let inputtype=vnode.Vdom.GetAttr(\"type\")\n    let input=vnode.Vdom.NodeName.toLowerCase()\n    if(input==\"input\" && inputtype==\"checkbox\"){\n        vnode.mvvm.$Watch(vnode,exp, (newvalue) => {\n            setValue(vnode, newvalue)\n        },true);\n    }else{\n        vnode.mvvm.$Watch(vnode,exp, (newvalue) => {\n            setValue(vnode, newvalue)\n        });\n    }\n    vnode.Dom.addEventListener(\"input\", (event: any) => {\n        //select控件\n        if (vnode.NodeName.toLowerCase() == \"select\") {\n            vnode.mvvm.$SetValue(exp, event.target.value)\n            return\n        }\n        //text radio checkbox控件\n        let inputType = (vnode.Dom as HTMLElement).getAttribute(\"type\")\n        if (inputType == null || inputType == \"\")\n            inputType = \"text\"\n        switch (inputType) {\n            case \"text\":\n            case \"radio\":\n                vnode.mvvm.$SetValue(exp, event.target.value)\n                break\n            case \"checkbox\":\n                let cur = vnode.mvvm.$GetExpValue(exp)\n                if (toString.call(cur) == \"[object Array]\") {\n                    let oldarray = cur as Array<any>;\n                    let index = oldarray.indexOf(event.target.value)\n                    if (index == -1) {\n                        oldarray.push(event.target.value)\n                    } else {\n                        oldarray.splice(index, 1)\n                    }\n                }\n                break\n        }\n    })\n}\n\nfunction setValue(vnode: VNode, newvalue: any) {\n    //select控件\n    if (vnode.NodeName.toLowerCase() == \"select\") {\n        (vnode.Dom as HTMLInputElement).value = newvalue\n        return\n    }\n    //text radio checkbox控件\n    let inputType = (vnode.Dom as HTMLElement).getAttribute(\"type\")\n    if (inputType == null || inputType == \"\")\n        inputType = \"text\"\n    switch (inputType) {\n        case \"text\":\n            (vnode.Dom as HTMLInputElement).value = newvalue\n            break\n        case \"radio\":\n            if ((vnode.Dom as HTMLInputElement).value == newvalue) {\n                (vnode.Dom as HTMLInputElement).checked = true\n            } else\n                (vnode.Dom as HTMLInputElement).checked = false;\n            break\n        case \"checkbox\":\n            if (toString.call(newvalue) == \"[object Array]\") {\n                if (newvalue.indexOf((vnode.Dom as HTMLInputElement).value) == -1) {\n                    (vnode.Dom as HTMLInputElement).checked = false\n                } else\n                    (vnode.Dom as HTMLInputElement).checked = true;\n            }\n\n            break\n    }\n}","import {REG_EVENT, REG_STR} from \"../const\"\nimport { VNode } from \"../vnode/vnode\";\nexport function OnClick(exp:string,vnode:VNode,isconst:boolean){\n    if (REG_EVENT.test(exp)) {\n        let methodStr = RegExp.$1\n        let paramsStr = RegExp.$2\n        if (paramsStr.length > 0) {\n            let ps = paramsStr.split(\",\")\n            vnode.Dom.addEventListener(\"click\", () => {\n                let params: any[] = []\n                ps.forEach(p => {\n                    if (!REG_STR.test(p)) {\n                        if (p === \"true\") {\n                            params.push(true)\n                            return\n                        }\n                        if (p === \"false\") {\n                            params.push(false)\n                        }\n                        let n = new Number(p).valueOf()\n                        if (!isNaN(n)) {\n                            params.push(n.valueOf())\n                        } else {\n                            //肯定是本地变量\n                            params.push(vnode.mvvm.$GetExpValue(p))\n                        }\n                    } else {\n                        params.push(RegExp.$2)\n                    }\n                })\n                vnode.mvvm.$RevokeMethod(methodStr, ...params)\n            })\n        }else{\n            vnode.Dom.addEventListener(\"click\", () => {\n                vnode.mvvm.$RevokeMethod(methodStr)  \n            })\n        }\n    }\n}","var EvalExp=function(context,exp){\n    var res\n    try {\n        with(context){\n            res=eval(exp)\n        }\n        return res\n    } catch (error) {\n        console.error(\"eval \"+exp+\" failed\")\n        console.error(error)\n    }\n    return \"\" \n}\nexports.EvalExp=EvalExp\n","import { Start } from \"./manager/start\";\n\n\nexport {Component} from \"./decorator/component\";\nexport {App} from \"./decorator/app\";\nexport {Data,Computed,Prop,OnInit,OnDestroy} from \"./decorator/property\";\nexport {Directive} from \"./decorator/directive\"\n\nexport {ComponentMvvm} from \"./mvvm/component-mvvm\"\nexport {AppMvvm} from \"./mvvm/app-mvvm\"\nexport {DirectiveMVVM} from \"./mvvm/directive-mvvm\"\n\nexport {RegisterRouter} from \"./router/router-manager\"\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    Start()\n})\n\n\n","import { IAppMvvm } from './../models';\n\nlet apps:IAppMvvm[]=[]\n\nexport function RegisterApp(app:IAppMvvm){\n    apps.push(app)\n}\nexport function GetApp(){\n    return apps\n}","import { IComponentMvvm } from './../models';\nimport { ComponentOption, ComponentMvvmFactoryOption } from '../models';\nimport { HttpGet, LogError } from \"../util\";\nimport { TraverseDom } from \"../vdom/vdom\";\nimport { VDom } from './../vdom/vdom';\n\n\nlet repository:{[id:string]:ComponentMvvmFactoryOption}={}\n\nexport function Id(namespace:string,name:string){\n    return namespace+\"::\"+name;\n}\n\nexport function RegisterComponent(name:string,namespace:string,constructor:IComponentMvvm,option:ComponentOption) {\n    let factoryOption:ComponentMvvmFactoryOption={\n        $constructor:constructor,\n        $id:Id(namespace,name),\n        $preProcess:false,\n        $domtree:null,\n        $origin:option\n    }\n    if(repository[factoryOption.$id]!=null)\n        throw new Error(\"component \"+factoryOption.$id+\" already exists\")\n    repository[factoryOption.$id]=factoryOption\n}\nexport function RegisterComponentDirect(option:ComponentMvvmFactoryOption){\n    if(repository[option.$id]!=null)\n        throw new Error(\"component \" + option.$id + \" has already exist\")\n    repository[option.$id]=option\n}\n\nexport function InitComponent(name: string, namespace: string): IComponentMvvm {\n    name = name.toLowerCase()\n    namespace = namespace.toLowerCase()\n    let factory = repository[Id(namespace,name)]\n    if (factory && !factory.$preProcess){\n        preProcess(factory)\n        factory.$preProcess=true\n    }\n    if(factory){\n        return factory.$constructor\n    }else{\n        throw new Error(\"component \"+Id(namespace,name)+\" not exists\")\n    }\n    \n}\nexport function GetDomTree(name: string, namespace: string){\n    name = name.toLowerCase()\n    namespace = namespace.toLowerCase()\n    let factory = repository[Id(namespace,name)]\n    if(factory==null)\n        return null\n    return factory.$domtree\n}\nexport function IsComponentRegistered(name: string, namespace: string) {\n    name = name.toLowerCase()\n    namespace = namespace.toLowerCase()\n    if (repository[Id(namespace,name)])\n        return true\n    else\n        return false\n}\nfunction preProcess(option: ComponentMvvmFactoryOption) {\n    //模版\n    if (option.$origin.templateUrl != null) {\n        option.$origin.template = HttpGet(option.$origin.templateUrl)\n        if (option.$origin.template == null) {\n            LogError(\"path \" + option.$origin.templateUrl + \" not found\")\n            return\n        }\n    }\n\n    let res=(new DOMParser()).parseFromString(option.$origin.template, \"text/html\").body\n    if(res.children.length>1)\n        throw new Error(option.$origin.name+\"::\"+option.$origin.namespace+\" template should have only one root\")\n    if(res.children.length==1)\n        option.$domtree = TraverseDom(res.children[0])\n    else{\n        if(res.childNodes.length==1)\n            option.$domtree = TraverseDom(res.childNodes[0])\n        else\n            throw new Error(\"template should not be empty\")\n    }\n    //样式\n    if (option.$origin.styleUrl != null) {\n        option.$origin.style = HttpGet(option.$origin.styleUrl)\n    }\n    if (option.$origin.style != null) {\n        // let css = option.style.replace(/(?!\\s)([^\\{\\}]+?)(?=\\s*\\{[^\\{\\}]*\\})/g, function (str) {\n        //     return str + \"[\" + option.$id + \"]\"\n        // })\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        style.innerHTML = option.$origin.style;\n        document.getElementsByTagName('head')[0].appendChild(style);\n        addAttr(option.$domtree, option.$id)\n    }\n}\nfunction addAttr(dom: VDom, attr: string) {\n    dom.AddAttr(attr)\n    if (dom.NodeType == 1) {\n        dom.Children.forEach(child => {\n            addAttr(child, attr)\n        })\n    }\n}\n","import { IDirectiveConstructor } from \"../models\";\nimport { Id } from \"./components-manager\";\n\nlet repository:{[id:string]:IDirectiveConstructor}={}\n\nexport function RegisterDirective(name:string,namespace:string,constructor:IDirectiveConstructor){\n    if(repository[Id(namespace,name)]!=null)\n        throw new Error(\"directive \"+Id(namespace,name)+\" already exists\")\n    repository[Id(namespace,name)]=constructor\n}\nexport function GetDirectiveCon(name:string,namespace:string):IDirectiveConstructor{\n    name=name.toLowerCase()\n    namespace=namespace.toLowerCase()\n    let constructor=repository[Id(namespace,name)]\n    return constructor\n}\nexport function IsDirectiveRegistered(name:string,namespace:string){\n    name=name.toLowerCase()\n    namespace=namespace.toLowerCase()\n    if(repository[Id(namespace,name)]!=null)\n        return true\n    else\n        return false\n}\n","import { GetApp } from \"./app-manager\";\n\nexport function Start() {\n    let apps=GetApp()\n    apps.forEach(App=>{\n        let mvvm=new App()\n        mvvm.$initialize()\n        mvvm.$SetRoot(true)\n    \n        let content = mvvm.$Render()\n        let target=document.querySelector(mvvm.$InitEl())\n        target.parentElement.replaceChild(content, target)\n    })\n    \n}","import { AppMvvm } from './mvvm/app-mvvm';\nimport { ComponentMvvm } from './mvvm/component-mvvm';\nimport { DirectiveMVVM } from './mvvm/directive-mvvm';\nimport { VDom } from './vdom/vdom';\nimport { DirectiveNode } from './vnode/directive-node';\nimport { VNode } from './vnode/vnode';\n\ninterface BaseOption{\n    namespace?:string,\n}\nexport interface ComponentOption extends BaseOption{\n    events?:string[],\n    name:string,\n    template?:string,\n    templateUrl?:string,\n    style?:string,\n    styleUrl?:string\n    \n}\nexport interface AppOption extends BaseOption{\n    el:string\n}\nexport interface DirectiveOption extends BaseOption{\n    name:string\n    events?:string[]\n}\n\nexport type PropType=\"array\"|\"object\"|\"number\"|\"string\"|\"boolean\"\nexport interface Prop{\n    name:string\n    required:boolean\n    type?:PropType\n}\nexport interface OnDataChange {\n    (newvalue:any,oldvalue:any):void\n}\n/**for语句 */\nexport class ForExp{\n    constructor(public itemExp:string,public arrayExp:string){}\n}\n\n\n\nexport interface IComponentMvvm{\n    new ():ComponentMvvm\n}\nexport interface IAppMvvm{\n    new ():AppMvvm\n}\nexport interface IDirectiveConstructor{\n    new (directive:DirectiveNode,vnode:VNode):DirectiveMVVM\n}\nexport interface ComponentMvvmFactoryOption {\n    $constructor:IComponentMvvm\n    $preProcess:boolean\n    $id:string,\n    $domtree:VDom,\n    $origin:ComponentOption\n}\nexport interface RouterInfo{\n    path:string,\n    params:{\n        name:string,\n        value:string\n    }[],\n    getParam(name:string):string\n}\nexport interface RouterState{\n    active:RouterInfo,\n    cur:RouterInfo\n}\nexport type RouterChangeCallback=(newrouter:RouterInfo,oldrouter:RouterInfo)=>void","import { NotifyUrlChange } from '../router/router-manager';\nimport { VNode } from '../vnode/vnode';\nimport { Mvvm } from './mvvm';\nexport class AppMvvm extends Mvvm{\n    protected $el:string=\"\"\n\n    $NavigateTo(url:string){\n        window.history.replaceState(null,null,url)\n        NotifyUrlChange()\n    }\n    $Render(): Node {\n        this.$treeRoot.Render()\n        return this.$treeRoot.Dom\n    }\n    $RevokeMethod(method: string, ...params: any[]): void {\n        if(typeof (this as any)[method]==\"function\")\n            (this as any)[method].apply(this,params)\n    }\n    $InitNamespace(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitDataItems(): {name:string,value:any}[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitComputeItems(): { name: string; get: () => any }[] {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    $InitTreeroot(): VNode {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitEl():string{\n        throw new Error(\"Method not implemented.\");\n    }\n}","import { Prop } from \"../models\";\nimport { CustomNode } from \"../vnode/custom-node\";\nimport { VNode } from \"../vnode/vnode\";\nimport { VNodeStatus } from './../const';\nimport { Mvvm } from './mvvm';\nimport { RevokeEvent } from './revoke-event';\nexport class ComponentMvvm extends Mvvm{\n    \n    private hirented=false\n\n    private $fenceNode:CustomNode\n    private $name:string=\"\"\n    \n    private $ins:Prop[]=[]\n\n    \n    $initialize(){\n        super.$initialize()\n        this.$name=this.$InitName()\n        this.$ins=this.$InitIns()\n    }\n    \n    private $checkProp(prop:Prop,value:any){\n        let error=(name:string,prop:string,type:string)=>{\n            throw new Error(\"component \\'\"+name+\"\\' prop \\'\"+prop+\"\\' not receive \"+type)\n        }\n        if(prop.type==\"array\" && toString.call(value)!=\"[object Array]\"){\n            error(this.$name,prop.name,prop.type)\n        }\n        if(prop.type==\"object\" && toString.call(value)!=\"[object Object]\"){\n            error(this.$name,prop.name,prop.type)\n        }\n        if(prop.type==\"number\" && toString.call(value)!=\"[object Number]\"){\n            error(this.$name,prop.name,prop.type)\n        }\n        if(prop.type==\"boolean\" && toString.call(value)!=\"[object Boolean]\"){\n            error(this.$name,prop.name,prop.type)\n        }\n        if(prop.type==\"string\" && toString.call(value)!=\"[object String]\"){\n            error(this.$name,prop.name,prop.type)\n        }\n    }\n\n    $SetHirented(hirentedFromParent:boolean){\n        this.hirented=hirentedFromParent\n    }\n\n    $Render(){\n        if(this.hirented){\n            this.$dataItems.forEach(item=>{\n                this.$fenceNode.mvvm.$Watch(this.$fenceNode,item.name,(newvalue:any,oldvalue:any)=>{\n                    (this as any)[item.name]=newvalue\n                })\n            })\n        }\n        this.$ins.forEach(prop=>{\n            let inName=this.$fenceNode.GetIn(prop.name)\n            if(inName==null && prop.required){\n                throw new Error(\"component \\'\"+this.$name+\"\\' need prop \\'\"+prop.name)\n            }\n            if(inName!=null){\n                if(inName.const){\n                    (this as any)[prop.name]=inName.value\n                }else{\n                    this.$fenceNode.mvvm.$Watch(this.$fenceNode,inName.value,(newvalue:any,oldvalue:any)=>{\n                        this.$checkProp(prop,newvalue);\n                        (this as any)[prop.name]=newvalue\n                    });\n                    this.$observe.ReactiveKey(this,prop.name,true)\n                }\n            }\n        })\n        \n        this.$treeRoot.Render()\n        return this.$treeRoot.Dom\n    }\n    $Refresh(){\n        this.$treeRoot.Refresh()\n    }\n    $Update(){\n        this.$treeRoot.Update()\n    }\n    $SetStatus(status:VNodeStatus){\n        this.$treeRoot.SetStatus(status)\n    }\n    $RevokeMethod(method:string,...params:any[]){\n        if(this.hirented){\n            this.$fenceNode.mvvm.$RevokeMethod(method,...params)\n        }else{\n            if(typeof (this as any)[method]==\"function\")\n                (this as any)[method].apply(this,params)\n        }\n    }\n    \n    $Emit(event:string,...data:any[]){\n        if(this.$fenceNode!=null && this.$fenceNode.mvvm!=null){\n            let method=this.$fenceNode.GetOut(event)\n            RevokeEvent(method,data,this.$fenceNode.mvvm)\n        }\n    };\n    \n    $OnRouterChange(){\n        this.$treeRoot.OnRouterChange()\n    }\n    $GetFenceNode(){\n        return this.$fenceNode\n    }\n    $SetFenceNode(node:CustomNode){\n        this.$fenceNode=node\n    }\n\n    \n    $InitNamespace(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitDataItems(): {name:string,value:any}[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitComputeItems(): { name: string; get: () => any }[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitName():string{\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitIns():Prop[]{\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitOuts():string[]{\n        throw new Error(\"Method not implemented.\");\n    }\n    $InitTreeroot(): VNode {\n        throw new Error(\"Method not implemented.\");\n    }\n    $GetIns(){\n        return this.$ins\n    }\n}","import { Prop } from \"../models\";\nimport { DirectiveNode } from \"../vnode/directive-node\";\nimport { VNode } from \"../vnode/vnode\";\nexport class DirectiveMVVM {\n    \n\n    $Name:string\n    $element:HTMLElement\n\n\n    $Ins:Prop[]=[]\n    $Outs:string[]=[]\n\n    $InitFuncs:string[]=[]\n    $DestroyFuncs:string[]=[]\n    \n\n    constructor(private $directive:DirectiveNode,private $vnode:VNode){\n    }\n    \n    \n    $OnDestroy(){\n        this.$DestroyFuncs.forEach(destroy=>{\n            (this as any)[destroy].call(this)\n        })\n    }\n    \n    $Render(){\n        this.$element=(this.$vnode.Dom as HTMLElement)\n        this.$InitFuncs.forEach(init=>{\n            (this as any)[init].call(this)\n        })\n        this.$Ins.forEach(prop=>{\n            let inName=this.$directive.GetIn(prop.name)\n            if(inName==null && prop.required){\n                throw new Error(\"component \\'\"+this.$Name+\"\\' need prop \\'\"+prop.name)\n            }\n            if(inName!=null){\n                if(inName.const){\n                    (this as any)[prop.name]=inName.value\n                }else{\n                    this.$vnode.mvvm.$Watch(this.$vnode,inName.value,(newvalue:any,oldvalue:any)=>{\n                        this.$checkProp(prop,newvalue);\n                        (this as any)[prop.name]=newvalue\n                    });\n                }\n            }\n        })\n    }\n    private $checkProp(prop:Prop,value:any){\n        let error=(name:string,prop:string,type:string)=>{\n            throw new Error(\"component \\'\"+name+\"\\' prop \\'\"+prop+\"\\' not receive \"+type)\n        }\n        if(prop.type==\"array\" && toString.call(value)!=\"[object Array]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"object\" && toString.call(value)!=\"[object Object]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"number\" && toString.call(value)!=\"[object Number]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"boolean\" && toString.call(value)!=\"[object Boolean]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n        if(prop.type==\"string\" && toString.call(value)!=\"[object String]\"){\n            error(this.$Name,prop.name,prop.type)\n        }\n    }\n}","import { Observe } from \"../observer/observe\";\nimport { GetActiveRouter } from \"../router/router-state\";\nimport { VNode } from \"../vnode/vnode\";\nimport { OnDataChange, RouterState } from './../models';\nexport abstract class Mvvm {\n    private $data:any={}\n    protected $observe:Observe\n\n    protected $treeRoot:VNode\n    \n    protected $dataItems:{name:string,value:any}[]=[]\n    protected $computeItems:{name:string,get:()=>any}[]=[]\n    private $isroot=false\n\n    protected get $router():RouterState{\n        return {\n            active:GetActiveRouter(),\n            cur:null\n        }\n    }\n\n    constructor(){\n    }\n    $initialize(){\n        this.$observe=new Observe(this)    \n        this.$dataItems=this.$InitDataItems()\n        this.$computeItems=this.$InitComputeItems()\n        this.$treeRoot=this.$InitTreeroot()\n\n        this.$treeRoot.AttachDom()\n\n        this.$dataItems.forEach(item=>{\n            this.$data[item.name]=item.value\n            Object.defineProperty(this,item.name,{\n                get:()=>{\n                    return this.$data[item.name]\n                },\n                set:(value:any)=>{\n                    this.$data[item.name]=value\n                }\n            })\n        })\n        this.$observe.ReactiveData(this.$data)\n\n        this.$computeItems.forEach(item=>{\n            this.$observe.WatchComputed(this.$treeRoot,item.name,item.get)\n        })\n    }\n    \n    $GetExpValue(exp:string):any{\n        return this.$observe.GetValueWithExp(exp)\n    }\n    \n    $SetValue(exp:string,value:any){\n        let keys=exp.split(\".\")\n        let target=this.$data\n        let hasTraget=true\n        for(let i=0;i<keys.length-1;i++){\n            if(target!=null)\n                target=target[keys[i]]\n            else{\n                hasTraget=false\n                break\n            }\n        }\n        if(hasTraget && target!=null)\n            target[keys[keys.length-1]]=value\n    }\n    $Watch(vnode:VNode,exp:string|Function,listener:OnDataChange,arraydeep?:boolean){\n        this.$observe.AddWatcher(vnode,exp,listener,arraydeep)\n    }\n    \n    \n    $OnDestroy(){\n        this.$treeRoot.OnRemoved()\n    }\n    $SetRoot(isroot:boolean){\n        this.$isroot=isroot\n    }\n    $IsRoot(){\n        return this.$isroot\n    }\n    $GetDataItems(){\n        return this.$dataItems\n    }\n    $GetComputedItems(){\n        return this.$computeItems\n    }\n    abstract $InitDataItems():{name:string,value:any}[];\n    abstract $InitComputeItems():{name:string,get:(()=>any)}[];\n    abstract $InitNamespace():string;\n\n    abstract $Render():Node;\n    abstract $RevokeMethod(method:string,...params:any[]):void;\n    abstract $InitTreeroot():VNode;\n}","import {REG_EVENT, REG_STR} from \"../const\"\nimport { Mvvm } from \"./mvvm\";\nexport function RevokeEvent(method:string,data:any,mvvm:Mvvm){\n    if (REG_EVENT.test(method)) {\n        let methodStr = RegExp.$1\n        let paramsStr = RegExp.$2\n        if (paramsStr.length > 0) {\n            let ps = paramsStr.split(\",\")\n            let params: any[] = []\n            ps.forEach(p => {\n                if (!REG_STR.test(p)) {\n                    if (p === \"true\") {\n                        params.push(true)\n                        return\n                    }\n                    if (p === \"false\") {\n                        params.push(false)\n                        return\n                    }\n                    if(p==\"$event\"){\n                        params.push(...data)\n                        return\n                    }\n                    let n = new Number(p).valueOf()\n                    if (!isNaN(n)) {\n                        params.push(n.valueOf())\n                    } else {\n                        //肯定是本地变量\n                        params.push(mvvm.$GetExpValue(p))\n                    }\n                } else {\n                    params.push(RegExp.$2)\n                }\n            })\n            mvvm.$RevokeMethod(methodStr, ...params)\n        }else{\n            mvvm.$RevokeMethod(methodStr)  \n        }\n    }\n}","import { Watcher } from './watcher';\n\nlet queue:Watcher[]=[]\nlet settimeout=false\nexport function AddWatcher(watcher:Watcher){\n    if(queue.indexOf(watcher)==-1)\n        queue.push(watcher)\n    if(!settimeout){\n        settimeout=true\n        \n        setTimeout(() => {\n            RevokeWatcher()\n            settimeout=false            \n        }, 0);\n    }\n}\nexport function RevokeWatcher(){\n    let temp:Watcher[]=[]\n    queue.forEach(q=>temp.push(q))\n    queue=[]\n    temp.forEach(watcher=>watcher.Update())\n    if(queue.length>0){\n        RevokeWatcher()\n    }\n}","import { VNode } from '../vnode/vnode';\nimport { OnDataChange } from './../models';\nimport { Watcher } from \"./watcher\";\nimport { AddWatcher } from './msg-queue';\nimport { VNodeStatus } from '../const';\nimport {EvalExp} from \"../eval\"\n\nexport class Observe{\n    private static target:Watcher\n    constructor(private data:any){}\n    GetValue(watcher:Watcher){\n        Observe.target=watcher\n        let res:any\n        if(typeof watcher.ExpOrFunc == \"string\"){\n            res=EvalExp(this.data,watcher.ExpOrFunc)\n        }\n        if(typeof watcher.ExpOrFunc ==\"function\"){\n            res=watcher.ExpOrFunc.call(this.data)\n        }\n        Observe.target=null   \n        return res\n    }\n    GetValueWithExp(exp:string){\n        let res=EvalExp(this.data,exp)\n        return res\n    }\n    \n    AddWatcher(vnode:VNode,exp:string|Function,listener:OnDataChange,deep?:boolean){\n        new Watcher(vnode,exp,listener,this,deep)\n    }\n    \n    ReactiveData(data:any){\n        if(data!=null && typeof data==\"object\"){\n            Object.keys(data).forEach(key=>{\n                let depend=new Depender(key)\n                this.defineReactive(data,key,false,depend)\n                this.ReactiveData(data[key])\n            })\n        }\n    }\n    ReactiveKey(data:any,key:string,shallow:boolean){\n        let depend=new Depender(key)        \n        this.defineReactive(data,key,shallow,depend)\n    }\n    \n    private reactiveArray(array:any[],depend:Depender){\n        if(array.push!=Array.prototype.push)\n            return\n        Object.defineProperty(array,\"push\",{\n            enumerable:false,\n            configurable:true,\n            value:(...params:any[])=>{\n                let old=array.length\n                let res=Array.prototype.push.call(array,...params)\n                for(let i=old;i<res;i++){\n                    this.ReactiveKey(array,\"\"+i,false)\n                }\n                depend.Notify()                \n                return res\n            }\n        })\n        Object.defineProperty(array,\"pop\",{\n            enumerable:false,\n            configurable:true,\n            value:(...params:any[])=>{\n                let res=Array.prototype.pop.call(array,...params)\n                depend.Notify()                \n                return res\n            }\n        })\n        Object.defineProperty(array,\"splice\",{\n            enumerable:false,\n            configurable:true,\n            value:(...params:any[])=>{\n                let res=Array.prototype.splice.call(array,...params)\n                if(params.length>2){\n                    let newitems=params.slice(2)\n                    newitems.forEach(item=>{\n                        let index=array.indexOf(item)\n                        this.ReactiveKey(array,\"\"+index,false)\n                    })\n                }\n                depend.Notify()                \n                return res\n            }\n        })\n        Object.defineProperty(array,\"shift\",{\n            enumerable:false,\n            configurable:true,\n            value:(...params:any[])=>{\n                let res=Array.prototype.shift.call(array,...params)\n                depend.Notify()                \n                return res\n            }\n        })\n    }\n    private defineReactive(data:any,key:string,shallow:boolean,depend:Depender){\n        let value = data[key]\n        if(toString.call(value)==\"[object Array]\"){\n            this.reactiveArray(value,depend)\n        }\n        Object.defineProperty(data, key, {\n            get: ()=> {\n                if(Observe.target!=null){\n                    depend.AddTarget(Observe.target)\n                }\n                return value\n            },\n            set: (newval)=>{\n                if (newval != value) {\n                    value=newval\n                    if(toString.call(value)==\"[object Array]\"){\n                        this.reactiveArray(value,depend)\n                    }\n                    if(!shallow)\n                        this.ReactiveData(newval)                    \n                    depend.Notify()\n                }\n            },\n            enumerable:true,\n            configurable:true\n        })\n    }\n    WatchComputed(vnode:VNode,key:string,func:()=>any){\n        let depend=new Depender(key)\n        let firstget=true\n        let value:any\n        \n        Object.defineProperty(this.data, key, {\n            get: ()=> {\n                if(Observe.target!=null){\n                    depend.AddTarget(Observe.target)\n                }\n                if(firstget){\n                    let old=Observe.target\n                    Observe.target=null\n                    new Watcher(vnode,func,(newval)=>{\n                        value=newval\n                        depend.Notify()\n                    },this)\n                    Observe.target=old\n                    firstget=false\n                }\n                return value\n            },\n            enumerable:true,\n            configurable:true\n        })\n    }\n\n}\nexport class Depender{\n    private watches:Watcher[]=[]\n    constructor(private key:string){\n    }\n    GetKey(){\n        return this.key\n    }\n    AddTarget(watcher:Watcher){\n        if(this.watches.indexOf(watcher)==-1)\n            this.watches.push(watcher)\n    }\n    Notify(){\n        this.watches=this.watches.filter(watcher=>{\n            if(watcher.GetVNode().GetStatus()==VNodeStatus.ACTIVE ){\n                AddWatcher(watcher)\n                return true\n            }\n            if(watcher.GetVNode().GetStatus()==VNodeStatus.INACTIVE )\n                return true\n            if(watcher.GetVNode().GetStatus()==VNodeStatus.DEPRECATED )\n                return false\n        })\n    }\n}","import { VNode } from './../vnode/vnode';\nimport { OnDataChange } from './../models';\nimport { Observe } from './observe';\nimport { VNodeStatus } from '../const';\n\n\nexport class Watcher{\n    private value:any\n    private deepRecord:any[]=[]\n\n    constructor(private vnode:VNode,public ExpOrFunc:string|Function,private cb:OnDataChange,private observer:Observe,private deep?:boolean){\n        this.value=this.observer.GetValue(this)\n        if(this.deep && toString.call(this.value)==\"[object Array]\"){\n            for(let i=0;i<this.value.length;i++){\n                this.deepRecord[i]=this.value[i]\n            }\n        }\n        this.cb(this.value,undefined)\n    }\n    GetVNode(){\n        return this.vnode\n    }\n    Update(){\n        let newval=this.observer.GetValue(this)\n        if(this.value!=newval){\n            if(this.vnode.GetStatus()==VNodeStatus.ACTIVE)\n                this.cb(newval,this.value)\n            this.value=newval\n        }else{\n            //判断数组元素是否有变化\n            if(this.deep && toString.call(this.value)==\"[object Array]\" ){\n                let diff=false\n                for(let i=0;i<newval.length;i++){\n                    if(newval[i]!=this.deepRecord[i]){\n                        this.cb(newval,this.value)\n                        diff=true\n                        break\n                    }\n                }\n                if(diff){\n                    this.deepRecord=[]\n                    for(let i=0;i<newval.length;i++){\n                        this.deepRecord[i]=newval[i]\n                    }\n                }\n            }\n        }\n        \n        \n    }\n}\n","import { VNode } from '../vnode/vnode';\nimport { SetActiveRouter } from './router-state';\n\n\nlet matchedRouter:InnerRouter[]=[]\n\nlet appRouters:InnerRouter[]=[]\nlet cursor:number=-1\nlet firstVNode:VNode=null\nexport function RegisterRouter(routers:Router[]){\n    checkRouter(routers)\n    routers.forEach(router=>{\n        router.urls=router.urls.map(url=>{\n            if(url.indexOf(\"/\")!=0)\n                return \"/\"+url\n            else\n                return url\n        })\n    })\n    routers.forEach(router=>{\n        appRouters.push(copyRouter(null,router))\n    })\n}\nfunction checkRouter(routers:Router[]){\n    routers.forEach(router=>{\n        router.children=router.children?router.children:[]\n        if(router.redirect!=null){\n            router.component=\"\"\n            router.url=\"\"\n        }\n        if(router.component==null && router.components==null){\n            throw new Error(\"must specify component or components in router\")\n        }\n        if(router.url==null && router.urls==null){\n            throw new Error(\"must specify url or urls in router\")\n        }\n        router.params=router.params?router.params:[]\n        router.urls=router.urls?router.urls:[]\n        if(router.url!=null)\n            router.urls.push(router.url)\n        checkRouter(router.children)\n    })\n}\nfunction copyRouter(parent:InnerRouter,router:Router):InnerRouter{\n    let r:InnerRouter= {\n        urls:router.urls,\n        component:router.component,\n        components:router.components,\n        children:[],\n        parent:parent,\n        fullUrls:[],\n        params:router.params,\n        redirect:router.redirect,\n        marked:false\n    }\n    if(parent!=null){\n        r.urls.forEach(url=>{\n            parent.fullUrls.forEach(fullurl=>{\n                if(url.indexOf(\"/\")==0){\n                    r.fullUrls.push(url)\n                }else{\n                    if(url==\"\")\n                        r.fullUrls.push(fullurl)\n                    else\n                        r.fullUrls.push(fullurl+\"/\"+url)\n                }\n            })\n        })\n    }else{\n        r.urls.forEach(url=>r.fullUrls.push(url))\n    }\n    for(let i=0;i<router.children.length;i++){\n        r.children.push(copyRouter(r,router.children[i]))\n    }\n    return r\n}\nfunction matchRouter(matchedRouter:InnerRouter):{name:string,value:string}[]{\n    let vinallaUrl=location.pathname\n    while(vinallaUrl.endsWith(\"/\")){\n        vinallaUrl=vinallaUrl.substr(0,vinallaUrl.length-1)\n    }\n    let vinallaSlice=vinallaUrl.split(\"/\");\n    for(let i=0;i<matchedRouter.fullUrls.length;i++){\n        let matchedUrl=matchedRouter.fullUrls[i];\n        let matchedSlice=matchedUrl.split(\"/\");\n        if(vinallaSlice.length!=matchedSlice.length)\n            continue;\n        let params:{name:string,value:string}[]=[];\n        for(var j=0;j<matchedSlice.length;j++){\n            if(/^\\:(\\w+)$/.test(matchedSlice[j]) ){\n                if(vinallaSlice[j]!=\"\"){\n                    let name=RegExp.$1\n                    params.push({name:name,value:vinallaSlice[j]})\n                    continue;\n                }else{\n                    break\n                }\n            }\n            if(matchedSlice[j]==vinallaSlice[j]){\n                continue;\n            }\n            break;\n        }\n        if(j==matchedSlice.length){\n            let requireParams=matchedRouter.params;\n            let searchParams=getSearchParams();\n            params=params.concat(searchParams);\n            requireParams.forEach(rp=>{\n                let exist=params.find(p=>p.name==rp.name);\n                if(exist==null && rp.required){\n                    throw new Error(\"router match failed,no matched params:\"+rp.name);\n                }\n            })\n            return params;\n        }\n    }\n    return null;\n}\nfunction getSearchParams():{name:string,value:string}[]{\n    let searchSlice=location.search.split(\"?\")\n    let res:{name:string,value:string}[]=[]\n    if(searchSlice.length==2){\n        let params=searchSlice[1].split(\"&\")\n        params.forEach(p=>{\n            let name_value=p.split(\"=\")\n            if(name_value.length==2){\n                res.push({name:name_value[0],value:name_value[1]})\n            }\n        })\n    }\n    return res\n}\nfunction getLeaf(router:InnerRouter):InnerRouter[]{\n    if(router.marked)\n        return []\n    if(router.children.length==0){\n        router.marked=true\n        return [router];\n    }\n    \n    let res:InnerRouter[]=[]\n    router.children.forEach(child=>{\n        res=res.concat(getLeaf(child))\n    })\n    if(res.length==0){\n        router.marked=true\n        return [router];\n    }\n    return res\n}\nfunction clearMark(router:InnerRouter){\n    router.children.forEach(child=>{\n        clearMark(child)\n    })\n    router.marked=false\n}\nfunction matchUrl(){\n    appRouters.forEach(r=>clearMark(r))\n\n    let routers:InnerRouter[]=[]\n\n    while(true){\n        let res:InnerRouter[]=[]\n        appRouters.forEach(r=>{\n            res=res.concat(getLeaf(r))\n        })\n        if(res.length==0){\n            break\n        }else{\n            routers=routers.concat(res)\n        }\n    }\n\n    let redirect=false\n    for(let i=0;i<routers.length;i++){\n        let router=routers[i]\n        if(router.redirect!=null){\n            window.history.replaceState(null,\"\",router.redirect)\n            redirect=true\n            break\n        }\n        let params=matchRouter(router)\n        if(params!=null){\n            SetActiveRouter(location.pathname,params)\n            matchedRouter=[router]\n            let parent=router.parent\n            while(parent!=null){\n                matchedRouter.unshift(parent)\n                parent=parent.parent\n            }\n            break\n        }\n    }\n    if(redirect){\n        matchUrl()\n    }\n}\nexport function NextRouter(vnode:VNode,name?:string):string{\n    if(appRouters==null){\n        throw new Error(\"no router specified\")\n    }\n    if(cursor==-1){\n        matchUrl()\n        firstVNode=vnode\n        cursor=0\n    }\n    if(cursor<matchedRouter.length){\n        let component=name?matchedRouter[cursor].components[name]:matchedRouter[cursor].component\n        cursor++\n        return component\n    }else{\n        throw new Error(\"router match failed\")\n    }\n    \n}\nexport function MoveBack(){\n    cursor--\n}\nexport interface Router extends _Router{\n    url?: string\n}\nexport interface _Router{\n    urls?:string[]\n    component?: string\n    components?:{[name:string]:string}\n    children?:Router[]\n    params?:{name:string,required:boolean}[],\n    redirect?:string\n}\ninterface InnerRouter extends _Router{\n    parent:InnerRouter\n    children:InnerRouter[]\n    fullUrls:string[],\n    marked:boolean\n}\n\nexport function NotifyUrlChange(){\n    matchUrl()\n    firstVNode.OnRouterChange()\n}\n\n\n","import { RouterInfo, RouterChangeCallback } from './../models';\nimport { VNode } from '../vnode/vnode';\nimport { VNodeStatus } from '../const';\n\nclass _RouterInfo implements RouterInfo{\n    constructor(public path:string,public params:{name:string,value:string}[]){\n\n    }\n    getParam(name:string):string{\n        let p=this.params.find(p=>p.name==name)\n        return p && p.value ||null\n    }\n}\n\nlet active:RouterInfo=new _RouterInfo(\"\",[])\n\nlet listeners:{cb:RouterChangeCallback,vnode:VNode}[]=[]\n\nexport function SetActiveRouter(path:string,params:{name:string,value:any}[]){\n    let old:RouterInfo=new _RouterInfo(path,params)\n    \n    active.path=path\n    active.params=params\n\n    listeners= listeners.filter(listen=>listen.vnode.GetStatus()!=VNodeStatus.DEPRECATED)\n    listeners.forEach(listen=>{\n        if(listen.vnode.GetStatus()==VNodeStatus.ACTIVE)\n            listen.cb(active,old)\n    })\n}\nexport function GetActiveRouter(){\n    return active\n}\nexport function WatchRouterChange(vnode:VNode,listener:RouterChangeCallback){\n    listeners.push({cb:listener,vnode:vnode})\n}\n\n\n","import { REG_SINGLE, REG_MULTI } from \"./const\";\n\nexport function LogError(msg:any){\n    console.error(msg)\n}\nexport function LogInfo(msg:any){\n    console.log(msg)\n}\nexport function GetNS(str:string):{namespace:string,value:string}{\n    let res=str.split(\":\")\n    if(res.length==1)\n        return {namespace:null,value:res[0]}\n    return {namespace:res[0],value:res.slice(1).join(\":\")}\n}\nexport function HttpGet(url:string):string{\n    let xhr=new XMLHttpRequest()\n    xhr.open(\"GET\",url,false)\n    xhr.send()\n    if(xhr.readyState==4 && xhr.status==200)\n        return xhr.responseText\n    else\n        return null\n}\nexport function IsStringEmpty(str:string){\n    if(str==null)\n        return true\n    str=str.trim()\n    if(str==\"\")\n        return true\n    return false\n}\nexport function Trim(str:string,char:string){\n    if(char.length>1)\n        throw new Error(\"only receve one character\")\n    let start=-1\n    while(str[start+1]==char){\n        start++\n    }\n    let end=str.length\n    while(str[end-1]==char){\n        end--\n    }\n    return str.substring(start+1,end)\n}\n\nexport function StrToEvalstr(str:string):{isconst:boolean,exp:string}{\n    if (REG_SINGLE.test(str)) {\n        return {isconst:false,exp:RegExp.$1}\n    }else{\n        if(REG_MULTI.test(str)){\n            let reg=/\\{\\{([^\\{\\}]*)\\}\\}/g\n            let res=reg.exec(str)\n            let exp=\"\"\n            let lastindex=0\n            while(res){\n                if(res.index!=lastindex){\n                    exp+=\"\\'\"+str.substring(lastindex,res.index)+\"\\'+\"\n                }\n                lastindex=res.index+res[0].length\n                exp+=\"(\"+RegExp.$1+\")+\"\n                res=reg.exec(str)\n            }\n            if(exp.endsWith(\"+\")){\n                exp=exp.substring(0,exp.length-1)\n            }\n\n            return {isconst:false,exp:exp}\n        }else{\n            return {isconst:true,exp:str}\n        }\n    }\n}","import { VNode } from \"../vnode/vnode\";\nimport { IsComponentRegistered, InitComponent } from \"../manager/components-manager\";\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { GetNS } from \"../util\";\nimport { PRE } from \"../const\";\nimport { VinallaNode } from \"../vnode/vinalla-node\";\n\ndeclare let require:(module:string)=>any\nexport class VDom{\n    NodeValue: string\n    NodeName: string\n    NodeType: number\n    Attrs: { Name: string, Value: string }[] = []\n    Children: VDom[] = []\n    GetAttr(name:string){\n        for(let i=0;i<this.Attrs.length;i++){\n            if(this.Attrs[i].Name==name)\n                return this.Attrs[i].Value\n        }\n        return null\n    }\n    AddAttr(attr:string){\n        this.Attrs.push({Name:attr,Value:\"\"})\n    }\n}\nexport function TraverseDom(dom:Node):VDom{\n    if(dom.nodeType==3 && dom.nodeValue.trim()==\"\")\n        return\n    let root=new VDom()\n    root.NodeValue=dom.nodeValue\n    if(root.NodeValue!=null){\n        root.NodeValue=root.NodeValue.replace(/\\s+/g,\"\")\n    }\n    root.NodeName=dom.nodeName.toLowerCase()\n    root.NodeType=dom.nodeType\n    if(dom.nodeType==1){\n        let htmldom=dom as HTMLElement\n        for(let i=0;i<htmldom.attributes.length;i++){\n            root.Attrs.push({Name:htmldom.attributes[i].name,Value:htmldom.attributes[i].value})\n        }\n        for(let i=0;i<htmldom.childNodes.length;i++){\n            let child=TraverseDom(htmldom.childNodes[i])\n            child && root.Children.push(child)\n        }\n    }\n    return root\n}\nexport enum Priority{\n    NORMAL,\n    IF,\n    FOR\n}\nexport function NewVNode(dom:VDom,mvvm:Mvvm,parent:VNode,priority:Priority=Priority.FOR):VNode{\n    if(dom.NodeName.toLowerCase()==\"slot\"){\n        let SlotNode=require(\"../vnode/slot-node\").SlotNode\n        return new SlotNode(dom,mvvm,parent,dom.GetAttr(\"name\"))\n    }\n\n    if(priority>=Priority.FOR && dom.GetAttr(PRE+\"for\")!=null){\n        let ForNode=require(\"../vnode/for-node\").ForNode\n        return new ForNode(dom,mvvm,parent,dom.GetAttr(PRE+\"for\"))\n    }\n    if(priority>=Priority.IF && dom.GetAttr(PRE+\"if\")!=null){\n        let IfNode=require(\"../vnode/if-node\").IfNode\n        return new IfNode(dom,mvvm,parent,dom.GetAttr(PRE+\"if\"))              \n    }\n    if(dom.NodeName==\"router-view\"){\n        let RouterNode=require(\"../vnode/router-node\").RouterNode\n        return new RouterNode(dom,mvvm,parent)\n    }\n    let ns=GetNS(dom.NodeName)\n    if(IsComponentRegistered(ns.value,ns.namespace||\"default\")){\n        let construct=InitComponent(ns.value,ns.namespace||\"default\")\n        let selfmvvm=new construct()\n        selfmvvm.$initialize()\n        let CustomNode=require(\"../vnode/custom-node\").CustomNode\n        let cust= new CustomNode(dom,mvvm,parent,selfmvvm)\n        selfmvvm.$SetFenceNode(cust)\n        return cust\n    }\n        \n    return new VinallaNode(dom,mvvm,parent)\n}","import { REG_IN, REG_OUT, VNodeStatus } from \"../const\";\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { NewVNode, VDom } from \"../vdom/vdom\";\nimport { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { TemplateNode } from \"./template-node\";\nimport { VNode } from \"./vnode\";\n\nexport class CustomNode extends VNode{\n    //输入与输出值\n    private ins_pure:{[name:string]:any}={}\n    private ins_exp:{[name:string]:string}={}\n    private outs:{[name:string]:string}={}\n\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode,public SurroundMvvm:ComponentMvvm) {\n        super(Vdom,mvvm,Parent)\n    }\n    AddIns(name:string,exp:string){\n        this.ins_exp[name]=exp\n    }\n    /**获取跟slot匹配的模版内容 */\n    GetTemplate(name:string):TemplateNode{\n        for(let i=0;i<this.Children.length;i++){\n            let template=this.Children[i] as TemplateNode\n            if(template.templatename==name)\n                return template\n        }\n        return null\n    }\n    Render(): void {\n        this.Dom=this.SurroundMvvm.$Render()\n        if(this.Dom && this.Parent && this.Parent.Dom)\n            this.Parent.Dom.appendChild(this.Dom)\n    }\n    \n\n    /**override vnode */\n    protected childSet(){\n        //制造中间节点管理template\n        let defaultTemplate=new TemplateNode(this.Vdom,this.mvvm?this.mvvm:this.SurroundMvvm,this,\"default\")\n        defaultTemplate.Parent=this\n        let templates:{[name:string]:VNode}={\"default\":defaultTemplate}\n        //解析子节点\n        for (let i = 0; i < this.Vdom.Children.length; i++) {\n            let childnode=this.Vdom.Children[i]\n\n            let name=this.Vdom.GetAttr(\"slot\")\n            if(name==null || name==\"\"){\n                name=\"default\"\n            }\n            if(templates[name]==null){\n                templates[name]=new TemplateNode(this.Vdom,this.mvvm?this.mvvm:this.SurroundMvvm,this,name)\n                templates[name].Parent=this\n            }\n            let vchild=NewVNode(childnode,templates[name].mvvm,templates[name])\n            \n            vchild.AttachDom()\n            templates[name].Children.push(vchild)\n        }\n        for(let name in templates){\n            this.Children.push(templates[name])\n        }\n    }\n    \n\n    GetInValue(prop:string){\n        if(this.ins_pure[prop]!=null)\n            return this.ins_pure[prop]\n        if(this.ins_exp[prop]!=null)\n            return this.mvvm.$GetExpValue(this.ins_exp[prop])\n        return null\n    }\n    GetIn(prop:string){\n        if(this.ins_pure[prop]!=null)\n            return {value:this.ins_pure[prop],const:true} \n        if(this.ins_exp[prop]!=null)\n            return {value:this.ins_exp[prop],const:false}\n        return null\n    }\n    GetOut(prop:string){\n        return this.outs[prop]\n    }\n    \n    \n    Refresh() {\n        this.SurroundMvvm.$Refresh()\n    }\n    Update(){\n        this.SurroundMvvm.$Update()\n    }\n\n    OnRemoved(){\n        this.SurroundMvvm.$OnDestroy()\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        this.SurroundMvvm.$SetStatus(status)\n    }\n    AddProperty(name: string, value: string) {\n        //输入\n        let ins=this.SurroundMvvm.$InitIns()\n        for(let i=0;i<ins.length;i++){\n            let prop=ins[i]\n            \n            if(REG_IN.test(name) && prop.name==RegExp.$1){\n                this.ins_exp[RegExp.$1]=value\n                return\n            }else{\n                if(prop.name==name){\n                    this.ins_pure[name]=value\n                    return\n                }\n            }\n        }\n        //输出\n        let outs=this.SurroundMvvm.$InitOuts()\n        for(let i=0;i<outs.length;i++){\n            let event=outs[i]\n            \n            if(REG_OUT.test(name) && event==RegExp.$1){\n                this.outs[RegExp.$1]=value\n                return\n            }\n        }\n        \n        super.AddProperty(name,value)\n    }\n    \n}","import { REG_IN, REG_OUT } from '../const';\nimport { VDom } from '../vdom/vdom';\n\nexport class DirectiveNode {\n    //输入与输出值\n    protected ins_pure: { [name: string]: any } = {}\n    protected ins_exp: { [name: string]: string } = {}\n    protected outs: { [name: string]: string } = {}\n\n    constructor(private vdom:VDom) {\n        this.vdom.Attrs.forEach(attr=>{\n            this.addProperty(attr.Name,attr.Value)\n        })\n    }\n    private addProperty(name: string, value: string):boolean{\n        //输入\n        if(REG_IN.test(name)){\n            this.ins_exp[RegExp.$1]=value\n            return\n        }\n        //输出\n        if(REG_OUT.test(name) ){\n            this.outs[RegExp.$1]=value\n            return\n        }\n        this.ins_pure[name]=value\n        return\n    }\n    GetIn(prop:string){\n        if(this.ins_pure[prop]!=null)\n            return {value:this.ins_pure[prop],const:true} \n        if(this.ins_exp[prop]!=null)\n            return {value:this.ins_exp[prop],const:false}\n\n        return null\n    }\n    GetOut(prop:string){\n        return this.outs[prop]\n    }\n}","import { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { ForExp, Prop } from \"../models\";\nimport { Mvvm } from '../mvvm/mvvm';\nimport { VDom, NewVNode, Priority } from '../vdom/vdom';\nimport { CustomNode } from './custom-node';\nimport { VNode } from \"./vnode\";\nimport { VNodeStatus } from \"../const\";\n\nexport class ForNode extends VNode{\n    private dynamicVNodes:CustomNode[] = []\n    public ForExp:ForExp\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode,private originForExp:string) {\n        super(Vdom,mvvm,Parent)\n        this.IsTemplate=true       \n        let forSplit=this.originForExp.trim().split(/\\s+/)\n        this.ForExp=new ForExp(forSplit[0],forSplit[2]) \n    }\n    private newCopyNode(n:number){\n        let itemexp=this.ForExp.itemExp\n        let that=this\n        let mvvm=new (class extends ComponentMvvm{\n            $InitTreeroot(): VNode {\n                let vnode=NewVNode(that.Vdom,this,null,Priority.IF)\n                return vnode\n            }\n            $InitNamespace(): string {\n                return that.mvvm.$InitNamespace();\n            }\n            $InitDataItems(): {name:string,value:any}[] {\n                let datas:{name:string,value:any}[]=[]\n                that.mvvm.$GetDataItems().forEach(item=>{\n                    datas.push({name:item.name,value:(that.mvvm as any)[item.name]})\n                })\n                that.mvvm.$GetComputedItems().forEach(item=>{\n                    datas.push({name:item.name,value:(that.mvvm as any)[item.name]})\n                })\n                if(that.mvvm instanceof ComponentMvvm){\n                    let props=that.mvvm.$GetIns()\n                    props.forEach(prop=>{\n                        datas.push({name:prop.name,value:(that.mvvm as any)[prop.name]})\n                    })\n                }\n                \n                return datas\n            }\n            $InitComputeItems(): { name: string; get: () => any }[] {\n                return []\n            }\n            $InitName():string{\n                return \"\"\n            }\n            $InitIns():Prop[]{\n                return [{name:itemexp,required:true}]\n            }\n            $InitOuts():string[]{\n                return []\n            }\n            $GetParams():{alias:string,name:string,required:boolean}[]{\n               return []\n            }\n        });\n        mvvm.$initialize()\n        mvvm.$SetHirented(true)\n\n        let fencenode=new CustomNode(this.Vdom,this.mvvm,null,mvvm)\n        mvvm.$SetFenceNode(fencenode)     \n        fencenode.IsCopy=true\n        fencenode.AddIns(itemexp,this.ForExp.arrayExp+\"[\"+n+\"]\")\n        return fencenode\n    }\n    private reImplementForExp(newcount:number){\n        if(newcount>this.dynamicVNodes.length){\n            let custnodes:CustomNode[]=[]\n            let oldcount=this.dynamicVNodes.length\n            for(let i=this.dynamicVNodes.length;i<newcount;i++){       \n                let custnode=this.newCopyNode(i)\n                custnode.Source=this\n                custnodes.push(custnode)\n            }\n            custnodes.forEach(custnode=>{\n                this.dynamicVNodes.push(custnode)                    \n                custnode.Render()\n            })\n            this.Parent.AddChildren(this,custnodes,oldcount)\n            this.Parent.Refresh()\n            return\n        }\n        if(newcount<this.dynamicVNodes.length){\n            let moved=this.dynamicVNodes.splice(newcount)\n            moved.forEach(vnode=>vnode.SetStatus(VNodeStatus.DEPRECATED))\n            this.Parent.RemoveChildren(moved)\n            moved.forEach(item=>{\n                item.OnRemoved()\n            })\n            this.Parent.Refresh()\n        }\n    }\n    \n    Update(){\n        let items=this.mvvm.$GetExpValue(this.ForExp.arrayExp)\n        if(toString.call(items) === \"[object Array]\"){\n            this.reImplementForExp(items.length)\n        }\n    }\n    AttachDom() {}\n    Render(){\n        this.mvvm.$Watch(this,this.ForExp.arrayExp+\".length\",this.reImplementForExp.bind(this))\n    }\n    OnRemoved(){\n        this.dynamicVNodes.forEach(vnode=>vnode.OnRemoved())\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        this.dynamicVNodes.forEach(vnode=>vnode.SetStatus(status))\n    }\n}","import { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { VNode } from \"./vnode\";\nimport { VDom, NewVNode, Priority } from \"../vdom/vdom\";\nimport { VNodeStatus } from \"../const\";\n\nexport class IfNode extends VNode {\n    private dynamicVNode: VNode\n    private rendered=false\n    constructor(public Vdom:VDom,public mvvm: Mvvm, public Parent: VNode, private ifExp: string) {\n        super(Vdom,mvvm, Parent)\n        this.IsTemplate=true\n    }\n    \n    AttachDom() {}\n    Render(){\n        this.mvvm.$Watch(this,this.ifExp, newvalue=>this.reImpletement(newvalue))\n    }\n    Update(){\n        let attached = this.mvvm.$GetExpValue(this.ifExp)\n        this.reImpletement(attached)\n    }\n\n    private reImpletement(newvalue:boolean){\n        if(!this.rendered){\n            this.rendered=true\n            if (newvalue) {\n                this.instance()\n                this.dynamicVNode.Render()\n                this.Dom=this.dynamicVNode.Dom\n                if(this.Parent!=null){\n                    this.Parent.AddChildren(this, [this.dynamicVNode],0)\n                    this.Parent.Refresh()\n                }\n            }\n        }else{\n            if (newvalue) {\n                if(this.dynamicVNode==null){\n                    this.instance()\n                    this.dynamicVNode.Render()\n                    this.Dom=this.dynamicVNode.Dom\n                }else{\n                    this.dynamicVNode.Update()\n                }\n                if(this.Parent!=null){\n                    this.Parent.AddChildren(this, [this.dynamicVNode],0)\n                    this.Parent.Refresh()\n                }\n                else{\n                    (this.mvvm as ComponentMvvm).$GetFenceNode().Dom=this.Dom;\n                    (this.mvvm as ComponentMvvm).$GetFenceNode().Source.Parent.Refresh()           \n                }\n                this.dynamicVNode.SetStatus(VNodeStatus.ACTIVE)\n                \n            } else {\n                if(this.Parent!=null){\n                    this.Parent.RemoveChildren([this.dynamicVNode])\n                    this.Parent.Refresh()\n                }\n                else{                \n                    (this.mvvm as ComponentMvvm).$GetFenceNode().Dom=null;\n                    (this.mvvm as ComponentMvvm).$GetFenceNode().Source.Parent.Refresh()\n                }\n                this.dynamicVNode.SetStatus(VNodeStatus.INACTIVE)\n            }\n        }\n        \n    }\n\n    private instance(){\n        this.dynamicVNode=NewVNode(this.Vdom,this.mvvm,null,Priority.NORMAL)\n        this.dynamicVNode.IsCopy=true\n        this.dynamicVNode.AttachDom()\n    }\n    OnRemoved(){\n        if(this.dynamicVNode!=null)\n            this.dynamicVNode.OnRemoved()\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        if(this.dynamicVNode!=null)\n            this.dynamicVNode.SetStatus(status)\n    }\n}","import { VNode } from \"./vnode\";\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { CustomNode } from \"./custom-node\";\nimport { InitComponent } from \"../manager/components-manager\";\nimport { GetNS } from '../util';\nimport { VDom } from '../vdom/vdom';\nimport { NextRouter, MoveBack } from \"../router/router-manager\";\n\nexport class RouterNode extends VNode{\n    private dynamicVNode: CustomNode\n\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode) {\n        super(Vdom,mvvm,Parent)\n    }\n\n    Render() :void{\n        let router=NextRouter(this)\n        if(router!=null){\n            this.instance(router)\n            this.dynamicVNode.Render()\n            MoveBack()\n            this.Parent.AddChildren(this, [this.dynamicVNode],0)\n            this.Parent.Refresh()\n        }\n        \n    }\n    OnRouterChange(){\n        let router=NextRouter(this)\n        if(router!=null){\n            this.Parent.RemoveChildren([this.dynamicVNode])\n            this.instance(router)\n\n            this.dynamicVNode.Render()\n            MoveBack()\n            this.Parent.AddChildren(this, [this.dynamicVNode],0)\n            this.Parent.Refresh()\n        }else{\n            this.Parent.RemoveChildren([this.dynamicVNode])\n            this.Parent.Refresh()\n        }\n    }\n    \n    private instance(componentStr:string){\n\n        let ns=GetNS(componentStr)\n        if(ns.namespace==null)\n            ns.namespace=\"default\"\n        let construct=InitComponent(ns.value,ns.namespace)\n        \n        if(construct==null){\n            throw new Error(`router can not find component name:${ns.value},namespace:${ns.namespace}`)\n        }\n        let mvvm=new construct()\n        mvvm.$initialize()\n        \n        let custnode=new CustomNode(null,this.mvvm,null,mvvm)\n        mvvm.$SetFenceNode(custnode)\n        this.dynamicVNode=custnode\n    }\n}\n","import { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { VNode } from \"./vnode\";\nimport { VDom } from \"../vdom/vdom\";\nimport { VNodeStatus } from \"../const\";\n\nexport class SlotNode extends VNode{\n    constructor(protected vdom:VDom,public mvvm: ComponentMvvm, public Parent: VNode, private name: string) {\n        super(vdom,mvvm,Parent)\n        if(this.name==null || this.name==\"\")\n            this.name=\"default\"\n    }\n    Render(): void {\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        if(template!=null){\n            template.Render()\n            this.Dom = template.Dom\n            while(this.Dom.firstChild!=null){\n                this.Parent.Dom.appendChild(this.Dom.firstChild)\n            }\n        }\n    }\n    \n    Update(){\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        if(template!=null){\n            template.Update()\n        }\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        template.SetStatus(status)\n    }\n    OnRemoved(){\n        let template=this.mvvm.$GetFenceNode().GetTemplate(this.name)\n        template.OnRemoved()\n    }\n}","import { VNode } from \"./vnode\";\nimport { Mvvm } from \"../mvvm/mvvm\";\nimport { VDom } from \"../vdom/vdom\";\n\nexport class TemplateNode extends VNode{\n    constructor(protected vdom:VDom,public mvvm: Mvvm,public Parent:VNode,public templatename:string) {\n        super(vdom,mvvm,Parent)\n    }\n    \n    Render() :void{\n        this.Dom=document.createElement(\"div\")\n        this.Children.forEach(child=>{\n            child.Render()\n        })\n    }\n    \n    Update(){\n        let children: VNode[] = []\n        this.Children.forEach(child => {\n            children.push(child)\n        })\n        children.forEach(child => {\n            child.Update()\n        })\n    }\n}","import { GetInnerDir } from \"../directive/inner-dir\";\nimport { GetDirectiveCon, IsDirectiveRegistered } from '../manager/directive-manager';\nimport { DirectiveMVVM } from '../mvvm/directive-mvvm';\nimport { GetNS } from '../util';\nimport { REG_ATTR, REG_IN, REG_OUT } from './../const';\nimport { InnerDirective } from './../directive/inner-dir';\nimport { DirectiveNode } from './directive-node';\nimport { VNode } from './vnode';\nexport class VinallaNode extends VNode{\n    \n    private directives:DirectiveMVVM[]=[]\n    private innerDirective:{dir:InnerDirective,isconst:boolean,exp:string}[]=[]\n    \n    AddProperty(name: string, value: string) {\n        if(REG_ATTR.test(name)){\n            this.Attrs.push({name:name,value:value})\n        }\n    }\n    \n    OnRemoved(){\n        super.OnRemoved()\n        this.directives.forEach(dir=>dir.$OnDestroy())\n    }\n\n    protected directiveBind(){\n        this.directives.forEach(dir=>dir.$Render())\n        this.innerDirective.forEach(item=>{\n            item.dir(item.exp,this,item.isconst)\n        })\n    }\n    \n    /**解析基本信息 */\n    protected basicSet(){\n        this.NodeValue = this.Vdom.NodeValue\n        this.NodeName = this.Vdom.NodeName\n        this.NodeType = this.Vdom.NodeType\n        //保存元素属性\n        let vanillaAttrs=this.Vdom.Attrs\n        for (let i = 0; i < this.Vdom.Attrs.length; i++) {\n            let attr=this.Vdom.Attrs[i]\n            let ns=GetNS(attr.Name)\n            if(ns.namespace==null)\n                ns.namespace=this.mvvm.$InitNamespace()\n            if(IsDirectiveRegistered(ns.value,ns.namespace)){\n                let dirNode=new DirectiveNode(this.Vdom)\n                let dirCons=GetDirectiveCon(ns.value,ns.namespace)\n                let dirMvvm=new dirCons(dirNode,this)\n                vanillaAttrs=vanillaAttrs.filter(attr=>{\n                    let name=attr.Name\n                    if(REG_IN.test(attr.Name) || REG_OUT.test(attr.Name))\n                        name=RegExp.$1\n                    \n                    let isprop= dirMvvm.$Ins.some(prop=>prop.name==name)\n                    let isevent=dirMvvm.$Outs.some(event=>event==name)\n                    return !(isprop || isevent)\n                })\n                this.directives.push(dirMvvm)\n                return\n            }\n        }\n        vanillaAttrs= vanillaAttrs.filter(attr=>{\n            if(REG_IN.test(attr.Name)){\n                let dir=GetInnerDir(RegExp.$1)\n                if(dir!=null){\n                    this.innerDirective.push({dir:dir,isconst:false,exp:attr.Value})\n                    return false\n                }\n            }\n            let dir=GetInnerDir(attr.Name)\n            if(dir!=null){\n                this.innerDirective.push({dir:dir,isconst:true,exp:attr.Value})\n                return false\n            }\n            return true\n        })\n        vanillaAttrs.forEach(attr=>{\n            this.AddProperty(attr.Name,attr.Value)\n        })\n    }\n}","import { Mvvm } from '../mvvm/mvvm';\nimport { StrToEvalstr } from '../util';\nimport { NewVNode, VDom } from '../vdom/vdom';\nimport { REG_ATTR, VNodeStatus } from './../const';\nimport { AppMvvm } from './../mvvm/app-mvvm';\nimport { ComponentMvvm } from './../mvvm/component-mvvm';\nimport { ForNode } from './for-node';\nexport abstract class VNode {\n    NodeValue: string\n    NodeName: string\n    NodeType: number\n    /**普通属性 */\n    Attrs: { name: string, value: string }[] = []\n    \n    Children: VNode[] = []\n    Dom: Node\n    IsTemplate = false\n    IsCopy=false\n\n    /**指向生成此节点的for节点 */\n    Source:ForNode\n    \n    protected status:VNodeStatus=VNodeStatus.ACTIVE\n\n    constructor(public Vdom:VDom,public mvvm: Mvvm,public Parent:VNode) {\n    }\n    \n    AddProperty(name: string, value: string) {\n        if(REG_ATTR.test(name)){\n            this.Attrs.push({name:name,value:value})\n        }\n    }\n    \n    protected directiveBind(){}\n    /**生成虚拟节点代表的dom并把自己加入父亲dom中 */\n    Render() :void{\n        if (this.NodeType == 1) {\n            let dom = document.createElement(this.NodeName)\n            this.Attrs.forEach(prop => {\n                dom.setAttribute(prop.name, prop.value)\n            })\n            this.Dom = dom \n            let children:VNode[]=[]\n            this.Children.forEach(child => {\n                if(!child.IsCopy)\n                    children.push(child)\n            })\n            children.forEach(child => {\n                child.Render()\n            })\n\n            this.directiveBind()\n        }\n        if (this.NodeType == 3) {\n            this.Dom = document.createTextNode(this.NodeValue)\n            \n            let evalexp=StrToEvalstr(this.NodeValue)\n            if (!evalexp.isconst) {\n                this.mvvm.$Watch(this,evalexp.exp,(newvalue, oldvalue)=>{\n                    this.Dom.textContent = newvalue\n                })\n            }else{\n                this.Dom.textContent=evalexp.exp\n            }\n        }\n        if(this.NodeType==8){\n            this.Dom=document.createComment(this.NodeValue)\n        }\n        if(this.NodeType==1 ||this.NodeType==3 ||this.NodeType==8)\n            if(this.Parent && this.Parent.Dom)\n                this.Parent.Dom.appendChild(this.Dom)\n    }\n    \n    Update(){\n        //todo 更新属性\n        if (this.NodeType == 1) {\n            let children: VNode[] = []\n            this.Children.forEach(child => {\n                children.push(child)\n            })\n            children.forEach(child => {\n                child.Update()\n            })\n            //todo 设置属性\n            return\n        }\n        if (this.NodeType == 3) {\n            let evalexp=StrToEvalstr(this.NodeValue)\n            if (!evalexp.isconst) {\n                this.Dom.textContent=this.mvvm.$GetExpValue(evalexp.exp)\n            }else{\n                this.Dom.textContent=evalexp.exp\n            }\n        }\n    }\n    Refresh() {\n        if (this.IsTemplate){\n            return\n        }\n        let allnodes = this.Dom.childNodes\n        let allvnodes: VNode[] = []\n        this.Children.forEach(child => {\n            if (!child.IsTemplate && child.Dom!=null) {\n                allvnodes = allvnodes.concat(child)\n            }\n        })\n\n        let ruler = {\n            old_j: -1,\n            i: 0,\n            j: 0\n        }\n        let opers: any[] = []\n        while (true) {\n            if (ruler.i > allnodes.length - 1) {\n                break\n            }\n            if (ruler.j > allvnodes.length - 1) {\n                opers.push({\n                    type: \"remove\",\n                    node: allnodes[ruler.i]\n                })\n                ruler.i++\n                ruler.j = ruler.old_j + 1\n                continue\n            }\n            if (allnodes[ruler.i] != allvnodes[ruler.j].Dom) {\n                ruler.j++\n                continue\n            }\n            if (allnodes[ruler.i] == allvnodes[ruler.j].Dom) {\n                if (ruler.i < ruler.j) {\n                    let index = ruler.old_j + 1\n                    while (index < ruler.j) {\n                        opers.push({\n                            type: \"add\",\n                            beforeNode: allnodes[ruler.i],\n                            node: allvnodes[index].Dom\n                        })\n                        index++\n                    }\n                }\n                ruler.old_j = ruler.j\n                ruler.i++\n                ruler.j++\n                continue\n            }\n        }\n        while (ruler.j < allvnodes.length) {\n            opers.push({\n                type: \"add\",\n                beforeNode: null,\n                node: allvnodes[ruler.j].Dom\n            })\n            ruler.j++\n        }\n        opers.forEach(oper => {\n            if (oper.type == \"add\") {\n                if(oper.beforeNode!=null)\n                    this.Dom.insertBefore(oper.node, oper.beforeNode)\n                else\n                    this.Dom.appendChild(oper.node)\n            }\n            if (oper.type == \"remove\")\n                (oper.node as HTMLElement).remove()\n        })\n        \n    }\n    AddChildren(child: VNode, nodes: VNode[],offset:number) {\n        for (let i = 0; i < this.Children.length; i++) {\n            if (this.Children[i] == child) {\n                this.Children.splice(i + 1+offset, 0, ...nodes)\n                break\n            }\n        }\n    }\n    RemoveChildren(nodes:VNode[]){\n        this.Children=this.Children.filter(child=>{\n            return nodes.indexOf(child)==-1\n        })\n    }\n    OnRemoved(){\n        this.Children.forEach(child=>{\n            if(!child.IsCopy)\n                child.OnRemoved()\n        })\n    }\n    \n    \n    /**解析基本信息 */\n    protected basicSet(){\n        this.NodeValue = this.Vdom.NodeValue\n        this.NodeName = this.Vdom.NodeName\n        this.NodeType = this.Vdom.NodeType\n        //保存元素属性\n        for (let i = 0; i < this.Vdom.Attrs.length; i++) {\n            this.AddProperty(this.Vdom.Attrs[i].Name,this.Vdom.Attrs[i].Value)\n        }\n    }\n    /**解析自节点信息 */\n    protected childSet(){\n        //解析子节点\n        for (let i = 0; i < this.Vdom.Children.length; i++) {\n            let childdom=this.Vdom.Children[i]\n            let vchild=NewVNode(childdom,this.mvvm,this)\n            \n            if(vchild!=null){\n                vchild.AttachDom()\n                this.Children.push(vchild)\n            }\n        }\n    }\n    AttachDom() {\n        this.basicSet()\n        this.childSet()\n    }\n    SetStatus(status:VNodeStatus){\n        this.status=status\n        this.Children.forEach(child=>{\n            if(!child.IsCopy)\n                child.SetStatus(status)\n        })\n    }\n    GetStatus(){\n        return this.status\n    }\n    OnRouterChange(){\n        this.Children.forEach(child=>child.OnRouterChange())\n    }\n    NavigateTo(url:string):void{\n        if(this.mvvm.$IsRoot()){\n            (this.mvvm as AppMvvm).$NavigateTo(url)\n        }else{\n            if(this.Parent!=null)\n                this.Parent.NavigateTo(url)\n            else{\n                (this.mvvm as ComponentMvvm).$GetFenceNode().NavigateTo(url)\n            }\n        }\n    }\n}"],"sourceRoot":""}